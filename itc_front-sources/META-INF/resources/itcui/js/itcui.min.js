/*! itc_ui 2017-02-09 11:22:26 */

function ITC_GetAbsPos(a){for(var b=$(a),c=b.offset().left,d=b.offset().top;b.attr("parentNode");)b=b.parent(),c+=b.offset().left,d+=b.offset().top;var e={left:c,top:d};return e}function isNull(a){return"undefined"==typeof a||null===a}function _parent(){return window.top==self?window:window.parent}function _topmost(){if(window._xssEmbbed)return window;for(var a=window;a.top!=a;)a=a.top;return a}function ITC_Len(a){for(var b=a.length,c=0,d=0;b>d;d++)a.charCodeAt(d)<27||a.charCodeAt(d)>126?c+=2:c++;return c}function ITC_Substr(a,b,d){var e=0;c=0,h=0,rstr="";var f=a.length,g=ITC_Len(a);for(0>b&&(b=g+b),1>d&&(d=g+d),e=0;f>e&&!(c>=b);e++){var h=a.charCodeAt(e);127>h?c+=1:c+=2}for(e=e;f>e;e++){var h=a.charCodeAt(e);if(127>h?c+=1:c+=2,rstr+=a.charAt(e),c>=d)break}return rstr}function isArray(a){return"[object Array]"===Object.prototype.toString.call(a)}function _banbackspace(a){var b=a||window.event,c=b.target||b.srcElement,d=$(c),e=c.type||c.getAttribute("type"),f=c.getAttribute("readonly"),g=c.getAttribute("enabled");f=null==f?!1:f,g=null==g?!0:g;var h=8!=b.keyCode||"password"!=e&&"text"!=e&&"textarea"!=e||1!=f&&1==g?!1:!0,i=8==b.keyCode&&"password"!=e&&"text"!=e&&"textarea"!=e?!0:!1;return"text"!=e&&"password"!=e||d.hasClass("enter-allowed")||13!=b.keyCode||(d.parents("form").length>0?a.preventDefault():d.addClass("enter-allowed")),h||i?!1:void 0}function _itc_getextname(a){var b=a.toLowerCase().split(".");b=b[b.length-1];for(var c=["jpg","png","gif","doc","docx","exe","dll","xls","xlsx","ppt","pptx","txt","zip","rar","7z","mp3","wav","pdf","tif","tiff","bmp"],d=!1,e=0;e<c.length;e++)if(b==c[e]){d=!0;break}return b=d?b:"unknown"}function _itc_getfilesize(a){a=Math.round(a/1024);var b="KB";a>1e3&&(a=Math.round(a/1e3),b="MB");var c=a.toString().split(".");return a=c[0],c.length>1&&(a+="."+c[1].substr(0,2)),a+=b}function _itc_binddownload(a){$(a).on("click",function(){var a=$(this),b=a.parents(".itc_upload_wrap"),c=b.attr("fileID"),d=b.parent(),e=d.data("options"),f=e.downloadFileUrl;f.indexOf("?")>0&&(f+="&"),_itc_download(f+"id="+c)})}function _itc_binddel(a){$(a).on("click",function(){var a=$(this),b=a.parents(".itc_upload_wrap"),c=b.data("ajaxMsg")||b.attr("fileID");if(c){var d=b.parent(),e=d.data("options");e.delFileAfterPost&&b.attr("init")?(b.remove(),e.singleFile&&d.show()):Notice.confirm("确认删除|是否删除该文件？该操作无法恢复。",function(){var a={type:"GET",dataType:"json",error:function(){FW.error("文件删除失败")},success:function(a){a&&1!=a.status?FW.error(a.msg||"文件删除失败"):(FW.success("文件删除成功"),b.remove(),e.singleFile&&d.show())}};e.delFileUrl?(a.url=e.delFileUrl,a.data={id:c}):a.url=c,$.ajax(a)})}})}function _loadgridcss(a){$("head").find("link[itc_tbl]").remove(),$("<link />").attr("rel","stylesheet").attr("href",a).attr("itc_tbl",!0).appendTo("head")}function _doeachframe(a,b){for(var c=_topmost().FW.getAllFrames(),d="ITCUI_Iframe_"+_topmost()._ITC.navTab.getCurrentTab(),e=0;e<c.length;e++){var f=$(c[e]);if(!f.hasClass(d)){var g=c[e].contentWindow;FW.debug("[dbg]do batch action in:"+f.attr("id")),a(g,b)}}}function _setgridfontsize(a,b){a._realFrame&&(a=a[a._realFrame].contentWindow||a[a._realFrame]);$(a);if(a._loadgridcss&&(a._loadgridcss(b.url),a.FW.refreshGrids(),b.theme)){a.styleOpt.defStyle=b.theme;var c=a.$(".itc_pagination_style");c.length>0&&(c.find(".dropdown-selected").removeClass("dropdown-selected").addClass("dropdown-unselected"),c.find("li[tblstyle='"+b.theme+"']").children("a").children("span").addClass("dropdown-selected"))}}function _setgridpgsize(a,b){if(a._realFrame)return a=a[a._realFrame].contentWindow||a[a._realFrame],void a._setgridpgsize(a,b);for(var c=$(".eu-datagrid"),d=0;d<c.length;d++){var e=$(c[d]);if(e.parent().hasClass("datagrid-view")){var f=e.datagrid("options");if(f.pagination){e.datagrid("getPager"),e.attr("id");$(".itc_pagination_container").each(function(){var a=$(this),c=a.data("targetPager");c.pagination({pageSize:b.pageSize}).pagination("select",1);var d=a.data("ptrGrid"),e=a.data("targetDiv");d.ITCUI_Pagination("create",e,a.data("opts"))})}}}}function _itc_download(a,b){$("#frame_download").remove(),$("<iframe id='frame_download' style='display:none'></iframe").appendTo("body"),$("#frame_download").attr("src",a)}function _download_show(a){var b=a.prop("tagName").toLowerCase();"button"==b?a.button("reset"):a.css("visibility","visible")}function _download_hide(a){var b=a.prop("tagName").toLowerCase();"button"==b?(a.attr("data-loading-text")||a.attr("data-loading-text",a.text()),a.button("loading")):a.css("visibility","hidden")}function _download_check_token(a,b,c){_download_tokens[b]=(new Date).getTime(),tokenTimer=setInterval(function(){var d=document.cookie,e=!1;if(d.indexOf(b)>=0)e=!0;else{var f=_download_tokens[b],g=(new Date).getTime();g-f>1e3*c&&($("#frame_download").remove(),FW.error("文件下载超时"),e=!0)}e&&(clearInterval(tokenTimer),tokenTimer=null,_download_show(a),delete _download_tokens[b])},200)}function _changeArg(a,b,c){a&&a[b]&&(a[c]=a[b],delete a[b])}function _swap(a,b,c){var d=a[b];a[b]=a[c],a[c]=d}function _arr_sort(a,b,c){for(var d=a.length-1;d>0;--d)for(var e=0;d>e;++e)"desc"==c?a[e][b]<a[e+1][b]&&_swap(a,e,e+1):a[e][b]>a[e+1][b]&&_swap(a,e,e+1)}function ITC_ValidStyle1(a,b){var c=$(b),d=parseInt(c.css("width")),e=(parseInt(b.offset().left),{top:"2px"});c.parent().hasClass("itcui_combo")?e.right="20px":e.left=d-22+"px",a.addClass("itcui_icon_warn_mid").css(e).attr("title",$(a).text()),a.insertAfter(b)}function ITC_ValidSucc1(a){$(a).remove()}function _itc_bindvalidation(a,b){if(b&&b.rules){var c=a.parents(".datagrid-view2").next("table"),d=c.data("datagrid").options.columns[0],e=a.attr("name");e&&(e=e.split("_")[0]);for(var f=0;f<d.length;f++){var g=d[f];g.field===e&&(b.title=g.title)}var h=c.data("validatorInited");if(!h){var i=c.parents("form");if(0==i.length)return void FW.debug("行编辑校验初始化失败，表格外层必须是form");i.validate({errorPlacement:ITC_ValidStyle1,success:ITC_ValidSucc1,ignore:".ignore"}),c.data("validatorInited",!0)}var j=$.extend({},b.rules);j.messages=j.messages||{};for(var k in j)if("messages"!=k){var l=j.messages[k]||defValidMsg[k]||"输入错误";l=UiCommon.replaceValidMsgTable(l,b,b.rules),j.messages[k]=l}a.rules("add",j)}}var Notice={};Notice.confirm=function(a,b,c,d){var e="function"==typeof b?b:b.onConfirm,f="object"==typeof b&&b.onCancel?b.onCancel:function(){},g=_parent();if(d=d||"info",0==g.$("#confirmDlg").length){var h='<div id="confirmDlg" style="padding-left:20px;padding-top:20px"><span class="cfmicon itcui_'+d+'mid" style="float:left"></span><span style="width:340px;float:left;font-size:14px;color:#555555;font-weight:bold;line-height:20px;padding-left:10px;" id="confirmMsg"></span><span style="width:340px;float:left;font-size:12px;color:#555555;margin-top:5px;height:40px;line-height:20px;padding-left:10px;" id="confirmMsg2"></span></div><div id="confirmDlgBtn" style="display:none;" class="bbox itcdlg-btns"><div class="btn-group btn-group-sm pull-right"><button type="button" class="btn btn-default" id="confirmCancel">取消</button></div><div class="btn-group btn-group-sm pull-right"><button type="button" class="btn btn-success" id="confirmOK" style="margin-right:10px">确定</button></div></div>';g.$("body").append(h)}else g.$("#confirmDlg").find(".cfmicon").removeClass("itcui_infomid").removeClass("itcui_okmid").removeClass("itcui_errormid").addClass("itcui_"+d+"mid");a.indexOf("|")<0?(g.$("#confirmMsg").html(a),g.$("#confirmMsg2").hide()):(msgSplit=a.split("|"),g.$("#confirmMsg").html(msgSplit[0]),g.$("#confirmMsg2").html(msgSplit[1]).show()),g.$("#confirmOK").unbind("click").click(function(){g.$("#confirmDlg").dialog("close"),e&&e(c)}),g.$("#confirmCancel").unbind("click").click(function(){g.$("#confirmDlg").dialog("close"),f&&f()}),g.$("#confirmDlg").dialog({closed:!1,closable:!1,buttons:"#confirmDlgBtn",width:450,title:" ",height:180,modal:!0})},Notice.input=function(a,b){var c=_parent();if(0==c.$("#inputDlg").length){var d='<div id="inputDlg" style="padding-left:20px;padding-top:20px"><span style="width:350px;font-size:14px;color:#555555;font-weight:bold;line-height:20px;" id="inputMsg"></span><input style="width:400px" id="inputdlg_val"/></div><div id="inputDlgBtn" style="display:none" class="bbox itcdlg-btns"><div class="btn-group btn-group-sm pull-right"><button type="button" class="btn btn-default" id="inputCancel">取消</button></div><div class="btn-group btn-group-sm pull-right"><button type="button" class="btn btn-success" id="inputOK" style="margin-right:10px">确定</button></div></div>';c.$("body").append(d)}c.$("#inputMsg").html(a),c.$("#inputOK").unbind("click").click(function(){c.$("#inputDlg").dialog("close"),b(c.$("#inputdlg_val").val())}),c.$("#inputCancel").unbind("click").click(function(){c.$("#inputDlg").dialog("close")}),c.$("#inputDlg").dialog({closed:!1,buttons:"#inputDlgBtn",width:450,title:" ",height:180,modal:!0})},Notice.remark=function(a,b){b=b||{},title=b.title||"备注信息",b.value=b.value||"",a=a||function(){};var c=_parent();if(0==c.$("#inputDlg").length){var d='<div id="remarkDlg" style="overflow:hidden"><textarea style="width:100%;height:100%" id="remarkdlg_val"/></div><div id="remarkDlgBtn" style="display:none;" class="bbox itcdlg-btns"><div class="btn-group btn-group-sm pull-right"><button type="button" class="btn btn-default" id="remarkCancel">取消</button></div><div class="btn-group btn-group-sm pull-right"><button type="button" class="btn btn-success" id="remarkOK" style="margin-right:10px">确定</button></div></div>';c.$("body").append(d)}c.$("#remarkdlg_val").val(b.value),c.$("#remarkOK").unbind("click").click(function(){a(c.$("#remarkdlg_val").val())||c.$("#remarkDlg").dialog("close")}),c.$("#remarkCancel").unbind("click").click(function(){c.$("#remarkDlg").dialog("close")}),c.$("#remarkDlg").dialog({closed:!1,buttons:"#remarkDlgBtn",width:495,title:title,height:180,modal:!0})},Notice.dialog=function(a,b,c){b=b||{};var d=$.extend({},b);d.closed=!1;var e=_parent(),f=d.idSuffix||"";if(d.noButtons?d.buttons=null:d.buttons="#itcDlg"+f+"Btn",0==e.$("#itcDlg"+f).length){var g='<div id="itcDlg'+f+'" style="overflow:hidden"><iframe style="width:100%;height:100%;" frameborder="no" border="0" id="itcDlg'+f+'Content"></iframe></div><div id="itcDlg'+f+'Btn" style="display:none;" class="bbox itcdlg-btns"><div id="itcDlg'+f+'BtnWrap" style="height:100%"></div></div>';e.$("body").append(g)}else{var h=e.$("#itcDlg"+f).data();for(var i in h)for(var j in h[i].options){var k=h[i].options[j];0===j.indexOf("on")&&"function"==typeof k&&(h[i].options[j]=function(){})}}c=c||[],FW.set("currentDialog","itcDlg"+f+"Content"),0==c.length&&c.push({name:"关闭","float":"right",style:"btn-default",onclick:function(){_parent().$("#itcDlg").dialog("close")}}),e.$("#itcDlg"+f+"BtnWrap").html("");var l="",m=!0,n=!0,o=!1;if(!d.noButtons){for(var p=0;p<c.length;p++){var q=c[p];q["float"]=q["float"]||"right",q.style=q.style||"btn-default";var r="";"left"==q["float"]?1==n?n=!1:r="margin-left:8px;":"right"==q["float"]?1==m?m=!1:r="margin-right:8px;":(q["float"]="middle",o=!0);var s="";q.width&&(s=' style="width:'+q.width+'px" '),l+='<div class="btn-group btn-group-sm pull-'+q["float"]+'" id="itcDlg'+f+"Btn_"+p+'" style="'+r+'">',l+='<button type="button" class="btn '+q.style+'" '+s+">"+q.name+"</button>",l+="</div>"}e.$("#itcDlg"+f+"BtnWrap").append(l),o&&e.$("#itcDlg"+f+"BtnWrap").css("text-align","center")}for(var p=0;p<c.length;p++){var q=c[p],t=function(){var a=q.onclick;return function(){var b=$(this),c=this;if(a.apply(c)){var d=b.parent().attr("id"),e=d.substring(6,d.length-5);_parent().$("#itcDlg"+e).dialog("close")}}}();e.$("#itcDlg"+f+"Btn_"+p).on("click","button",t)}d._onClose=d.onClose||function(){},d.onClose=function(){e.$("#itcDlg"+f+"Content").attr("src","about:blank"),e.$("#itc_combo_wrap").remove(),e.$(".datetimepicker").remove(),d._onClose()},d.onMove=function(){e.$("#itc_combo_wrap").remove(),e.$(".datetimepicker").hide()},e.$("#itcDlg"+f).dialog(d),a&&e.$("#itcDlg"+f+"Content").attr("src",a)},Notice.screenTopMsg=function(a,b,c){Notice.screenMsgId=Notice.screenMsgId||null;var d=c?_parent():window;d.$("#itcui_screen_top_msg").remove();var e=parseInt(document.documentElement.clientWidth),f="";if("success"==b)f="<div class='itcui_tips_success";else if("error"==b)f="<div class='itcui_tips_error";else{if("loading"!=b)return;f="<div class='itcui_tips_loading"}f+=" itcui_tips_top' style='width:auto' id='itcui_screen_top_msg'>",f+=a+"</div>",d.$("body").append(f);var g=d.$("#itcui_screen_top_msg");g.css("left",(e-g.outerWidth())/2+"px"),g.hide(),g.slideDown(),Notice.screenMsgId&&clearTimeout(Notice.screenMsgId),c?Notice.screenMsgId=setTimeout("_parent().$('#itcui_screen_top_msg').slideUp()",5e3):Notice.screenMsgId=setTimeout("$('#itcui_screen_top_msg').slideUp()",5e3)},Notice.successTopNotice=function(a){Notice.screenTopMsg(a,"success",!0)},Notice.errorTopNotice=function(a){Notice.screenTopMsg(a,"error",!0)},Notice.successNotice=function(a){Notice.screenTopMsg(a,"success",!1)},Notice.errorNotice=function(a){Notice.screenTopMsg(a,"error",!1)};var privMapping=window.privMapping||_parent().privMapping||null,itcui=itcui||{};itcui.combo_displayed=!1,Number.prototype.toFixed=function(a){var b=this+"";if(a||(a=0),-1==b.indexOf(".")&&(b+="."),b+=new Array(a+1).join("0"),new RegExp("^(-|\\+)?(\\d+(\\.\\d{0,"+(a+1)+"})?)\\d*$").test(b)){var b="0"+RegExp.$2,c=RegExp.$1,d=RegExp.$3.length,e=!0;if(d==a+2){if(d=b.match(/\d/g),parseInt(d[d.length-1])>4)for(var f=d.length-2;f>=0&&(d[f]=parseInt(d[f])+1,10==d[f]);f--)d[f]=0,e=1!=f;b=d.join("").replace(new RegExp("(\\d+)(\\d{"+a+"})\\d$"),"$1.$2")}return e&&(b=b.substr(1)),(c+b).replace(/\.$/,"")}return this+""},Date.prototype.format=function(a){var b={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(a)&&(a=a.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var c in b)new RegExp("("+c+")").test(a)&&(a=a.replace(RegExp.$1,1==RegExp.$1.length?b[c]:("00"+b[c]).substr((""+b[c]).length)));return a},document.onkeypress=_banbackspace,document.onkeydown=_banbackspace;var formToken=(new Date).getTime()+""+Math.floor(100*Math.random());String.prototype.replaceAll=function(a,b,c){return RegExp.prototype.isPrototypeOf(a)?this.replace(a,b):this.replace(new RegExp(a,c?"gi":"g"),b)},_itc_unloadcallback=function(){document.getElementsByTagName("body")[0].innerHTML=""},Function.prototype.bind||(Function.prototype.bind=function(a){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var b=Array.prototype.slice.call(arguments,1),c=this,d=function(){},e=function(){return c.apply(this instanceof d?this:a,b.concat(Array.prototype.slice.call(arguments)))};return this.prototype&&(d.prototype=this.prototype),e.prototype=new d,e}),$(document).ready(function(){$("body").on("click",function(){UiCommon.removeComboWrap(),FW.triggerEvent("onClickBlank")}),$.ajaxPrefilter(function(a,b,c){b&&b.type&&"POST"==b.type.toUpperCase()&&"object"==typeof b.data&&(a.data=$.param($.extend(b.data,{_token:window._token||formToken})))}),$(window).resize(function(){FW.refreshGrids(),setTimeout(function(){for(var a in _itc_gridsearches)for(var b=$("#"+a).children(".itc-gs-wrap"),c=0;c<b.length;c++){var d=$(b[c]),e=$("#"+d.attr("fieldid")),f=e.css("width").replace("px","");d.css("width",(c==b.length?f-18:f-8)+"px")}},200)}),$("body").on("mouseenter",".pl-ellipsis",function(a){var b=$(this);!b.attr("title")&&this.offsetWidth<this.scrollWidth&&b.attr("title",b.text())}),$("body").on("loadingMaskRemoved",function(){$(".datagrid-cell").each(function(){var a=$(this);!a.attr("title")&&this.offsetWidth<this.scrollWidth&&a.attr("title",a.text())})})}),ITCUI_EventHandler=function(){var a={},b={},c={},d={};this.get=function(a){return c[a]},this.set=function(a,b,d){d?c[a]=JSON.parse(JSON.stringify(b)):c[a]=b},this.registerEvent=function(c,e,f){var g=a[c];g||(a[c]=[],g=a[c]);var h=(new Date).getTime()%1e5+""+Math.abs(Math.round(1e3*Math.random()));if(g.push([e,h]),b[h]=c,f){var i=FW.getCurrentTabId();d[i]||(d[i]=[]),d[i].push(h)}return h},this.unregisterEvent=function(c){var d=b[c];if(d){var e=a[d];if(e){var f=0;for(f=0;f<e.length;f++){var g=e[f];if(g[1]==c)break}for(var h=[],i=0;i<e.length;i++)i!=f&&h.push(e[f]);e=h,delete b[c]}}},this.triggerEvent=function(b,c){var d=a[b],e=[];if(d)for(var f=0;f<d.length;f++){var g=d[f];g&&g[0]&&e.push(g[0](c))}return e.length>0?e:-1}};var _event_handler=window._event_handler||_parent()._event_handler||new ITCUI_EventHandler,FW={},_itc_grids={},_itc_resize_grids={},_enum_map={};FW.addTab=function(a,b){_parent()._ITC.addTab(a,b)},FW.initFrame=function(a){_parent()._ITC.init(a)},FW.switchDefaultTab=function(){_parent()._ITC.switchDefaultTab()},FW.adjustFrame=function(){_parent()._ITC.adjustFrame()},FW.navigate=function(a){_parent()._ITC.container.navigate(a)},FW.deleteTab=function(a){_parent()._ITC.deleteTab(a)},FW.activeTabById=function(a){window.iRoute&&window.enableNewRoute?window.iRoute.goByModule("/path="+a):_parent()._ITC.navTab.activeById(a)},FW.modifyTabId=function(a,b){_parent()._ITC.navTab.modifyTabId(a,b)},FW.deleteTabById=function(a){_parent()._eipMode&&"eipWindow"==FW.getCurrentTabId()?_parent()._ITC.closeWindow():_parent()._ITC.navTab.removeById(a)},FW.activeTreeItem=function(a){_parent()._ITC.navTree.ITCUI_NavTree("switchto",a)},FW.getCurrentTabId=function(){return _parent()._ITC.navTab.getCurrentTab()},FW.addTabWithTree=function(a){_parent()._ITC.addTabWithTree(a)},FW.getCurrentNavTreeId=function(){return _parent()._ITC.navTree.ITCUI_NavTree("getactive")},FW.setTreeStat=function(a){_parent()._ITC.toggleNavTree(a),FW.adjustMask()},FW.toggleSideTree=function(a){_parent()._ITC.toggleSideTree(a)},FW.addSideFrame=function(a){_parent()._ITC.addSideFrame(a)},FW.registerEvent=function(a,b){return _event_handler.registerEvent(a,b)},FW.unregisterEvent=function(a){_event_handler.unregisterEvent(a)},FW.get=function(a){return _event_handler.get(a)},FW.set=function(a,b){_event_handler.set(a,b)},FW.triggerEvent=function(a,b){return _event_handler.triggerEvent(a,b)},FW.confirm=function(a,b){Notice.confirm(a,b)},FW.input=function(a,b){Notice.input(a,b)},FW.remark=function(a,b){Notice.remark(a,b)},FW.dialog=function(a,b){if(b||"object"==typeof b){b.src||FW.debug("dialog方法以iframe方式显示页面，必须指定opts.src属性"),b.dlgOpts=b.dlgOpts||{},b.btnOpts=b.btnOpts||[{name:"取消","float":"right",style:"btn-default",onclick:function(){return!0}},{name:"确定","float":"right",style:"btn-success",onclick:function(){var a=_parent().window.document.getElementById("itcDlgContent").contentWindow;return a.onOkBtnClick&&a.onOkBtnClick()?!0:void 0}}];var c=b.dlgOpts;if(c.title=c.title||"无标题对话框",c.width=c.width||650,c.height=c.height||450,(c.width+"").indexOf("%")>0){var d=_parent().$("body").width();c.width=c.width.replace("%","")*d/100}else"string"==typeof c.width&&(c.width=parseInt(c.width));if((c.height+"").indexOf("%")>0){var e=_parent().$("body").height();c.height=c.height.replace("%","")*e/100}else"string"==typeof c.height&&(c.height=parseInt(c.height));c.closed=!1,c.modal=0==c.modal?!1:!0,Notice.dialog(b.src,b.dlgOpts,b.btnOpts)}},FW.success=_parent().Notice.successTopNotice,FW.error=_parent().Notice.errorTopNotice,FW.len=ITC_Len,FW.substr=ITC_Substr,FW.debug=function(a){try{window.console&&window.console.log&&console.log(a)}catch(b){}},FW.loadCss=function(a){if(/itc_dg/.test(a)){_loadgridcss(a);var b=null;if(window.cssMapping){for(var c in cssMapping)if(cssMapping[c]==a){b=c;break}}else FW.debug("无法找到cssMapping变量，这是一个在timss2中的全局约定变量");b&&(styleOpt.defStyle=b,FW.debug("[dbg]setting theme:"+b),_doeachframe(_setgridfontsize,{url:a,theme:b}),FW.success("显示设置已更新"))}},FW.setAllPageSize=function(a){FW.debug("[dbg]setting pagesize:"+a),_doeachframe(function(a,b){a._setgridpgsize&&a._setgridpgsize(a,b)},{pageSize:a})},FW.setGridsPgSize=function(){_doeachframe(_setgridpgsize)},FW.getAllFrames=function(){var a=_topmost()._ITC.opts.contentId;return _topmost().$("#"+a).children(".ITCUI_ContainerFrame")},FW.refreshGrids=function(){$(".eu-datagrid").each(function(){var a=$(this);a.parent().hasClass("datagrid-view")&&a.datagrid("resize")})},FW.date2long=function(a){return a?(s1=a.split("-"),new Date(s1[0],s1[1]-1,s1[2]).getTime()):null},FW.time2long=function(a){if(!a)return null;var b=a.split(" "),c=b[0].split("-"),d=b[1].split(":");return new Date(c[0],c[1]-1,c[2],d[0],d[1]).getTime()},FW.long2time=function(a){return null===a||"undefined"==typeof a?"":new Date(a).format("yyyy-MM-dd hh:mm")},FW.long2date=function(a){return null===a||"undefined"==typeof a?"":new Date(a).format("yyyy-MM-dd")},FW.getFrame=function(a){var b=_parent().$(".ITCUI_Iframe_"+a);return b.length>0?b[0].contentWindow:void 0},FW.split=function(a,b){return null==a?[]:"string"==typeof a?a.split(b):[a]},FW.getEnumMap=function(a){if(a&&(a=a.toLowerCase()),_enum_map[a])return _enum_map[a];if(window._enum){for(var b in _enum)if(_k=b.toLowerCase(),_k==a){for(var c=_enum[b],d={},e=0;e<c.length;e++){var f=c[e];d[f.code]=f.label}return _enum_map[a]=d,d}return FW.debug("无法找到枚举数据"+a+"，请检查配置是否正确"),{}}return FW.debug("无法找到全局变量_enum，getEnumMap函数只能和mvc组件库一起使用"),{}},FW.stringify=function(a){var b=typeof a;if("object"!=b||null===a)return"string"==b&&(a=a.replace(/\\/g,"\\\\"),a=a.replace(/\"/g,'\\"'),a=a.replace(/\t/g,"    "),a=a.replace(/\r\n/g,"\\n"),a=a.replace(/\n/g,"\\n"),a='"'+a+'"'),String(a);var c,d,e=[],f=a&&isArray(a);for(c in a){if(d=a[c],b=typeof d,"string"==b)d=d.replace(/\\/g,"\\\\"),d=d.replace(/\"/g,'\\"'),d=d.replace(/\t/g,"    "),d=d.replace(/\r\n/g,"\\n"),d=d.replace(/\n/g,"\\n"),d='"'+d+'"';else{if("undefined"==b)continue;"object"==b&&null!==d&&(d=FW.stringify(d))}e.push((f?"":'"'+c+'":')+String(d))}return(f?"[":"{")+String(e)+(f?"]":"}")},FW.parse=function(str){return eval("("+str+")")},FW.getScnWidth=function(){return parseInt(document.documentElement.clientWidth)},FW.escape=function(a){return escape(a)},FW.specialchars=function(a){if(a){if("string"!=typeof a)return a+""}else a="";return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/,"&#039")},FW.unspecialchars=function(a){return"string"!=typeof a?a+"":a.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&").replace(/&quot;/,'"').replace(/&#039/,"'")},FW.deepSpecialchars=function(a){if(!a)return a;if("string"==typeof a)return FW.specialchars(a);if(isArray(a)||"object"==typeof a){for(var b in a)"string"==typeof a[b]?a[b]=FW.specialchars(a[b]):(isArray(a[b])||"object"==typeof a[b])&&FW.deepSpecialchars(a[b]);return a}return a},FW.parseObjSpecialChars=function(a,b){if(a&&"object"==typeof a)for(var c in a)a[c]&&"string"==typeof a[c]?a[c]=FW[b?"escape":"unescape"](a[c]):a[c]=FW.parseObjSpecialChars(a[c],b);return a},FW.unescapeObj=function(a){return FW.parseObjSpecialChars(a,!1)},FW.escapeObj=function(a){return FW.parseObjSpecialChars(a,!0)},FW.unescape=function(a){return unescape(a)},FW.convertBRBRToBlankSpace=function(a){return a},FW.fixRoundButtons=function(a){var b=$(a);if(0!=b.length&&b.hasClass("btn-toolbar")){b.find(".left-button-corner").removeClass("left-button-corner"),b.find(".right-button-corner").removeClass("right-button-corner"),b.children(".button-mg0").removeClass("button-mg0");var c=b.children(".btn-group");b.children(".btn-group:visible:first").addClass("button-mg0");for(var d=0;d<c.length;d++){var e=$(c[d]),f=e.children("button:visible");0==f.length?e.hide():e.show(),f.first().addClass("left-button-corner"),f.last().addClass("right-button-corner")}}},FW.fixToolbar=function(a){var b=$(a);if(0!=b.length&&b.hasClass("btn-toolbar")){b.find(".left-button-corner").removeClass("left-button-corner"),b.find(".right-button-corner").removeClass("right-button-corner"),b.children(".button-mg0").removeClass("button-mg0");for(var c=b.children(".btn-group"),d=0;d<c.length;d++){for(var e=$(c[d]),f=e.children("button"),g=null,h=null,i=null,j=null,k=0;k<f.length;k++)g=$(f[k]),"none"!==g.css("display")&&"hidden"!==g.css("visibility")&&(j=g,h||(h=g));i=j,h?e.show():e.hide(),h&&h.addClass("left-button-corner"),i&&i.addClass("right-button-corner")}b.children(".btn-group:visible:first").addClass("button-mg0")}},FW.updateTreeTag=function(a){_parent()._ITC.updateTreeTag(a)},FW.initPrintButton=function(a,b,c,d){$(a).click(function(){FW.dialog("init",{src:b,btnOpts:[{name:"关闭","float":"right",style:"btn-default",onclick:function(){_parent().$("#itcDlg").dialog("close")}}],dlgOpts:{width:800,height:650,closed:!1,title:c,modal:!0}})})},FW.repairTableEllipsis=function(a){return a&&"function"==typeof a.find?void a.each(function(){var a=$(this);!a.attr("title")&&this.offsetWidth<this.scrollWidth&&a.attr("title",a.text())}):void FW.debug("FW.repairTableEllipsis函数需要传入一个包裹datagrid的$对象")},FW.renderTable=function(a,b){if(a&&b&&isArray(a)){for(var c={},d={fields:a},e=0;e<a.length;e++){var f=a[e];c[f.field]=f}b.rows&&(b=b.rows);for(var g=[],e=0;e<b.length;e++){for(var h=b[e],i=[],j=0;j<a.length;j++){var f=a[j];if(!f.hidden){var k=h[f.field]||"";f.formatter&&(k=f.formatter(k,h,e));var l={val:k};f.fixed&&(l.width=f.width),i.push(l)}}g.push(i)}d.rows=g;var m=template.compile(_templates.pureTable);return m(d)}};var _download_tokens={},tokenTimer=null;!function(a){a.fn.extend({bindDownload:function(b){var c=a(this);if(0!=c.length){if(null==b||null==b.url)return void FW.log("bindDownload函数参数错误，必须指定opts.url");b.twoSteps=b.twoSteps||!1,b.useCookie=b.useCookie||!1,b.prepareTimeout=b.prepareTimeout||20,b.downloadTimeout=b.downloadTimeout||5,c.data("downloadOptions",b),c.click(function(){tokenTimer&&clearInterval(tokenTimer);var c="token_"+Math.floor(1e6*Math.random()),d=a(this),e=d.data("downloadOptions"),f=e.url;f.indexOf("?")<0&&(f+="?"),f+="&rand="+c,(e.useCookie||e.twoSteps)&&_download_hide(d),b.useCookie&&(_download_tokens[c]=!0),e.twoSteps?a.ajax({url:f+"&prepare=1",timeout:1e3*e.prepareTimeout,success:function(a){(a===!0||"true"===a)&&(b.useCookie||_download_show(d),_itc_download(f),b.useCookie&&_download_check_token(d,c,e.downloadTimeout))},error:function(){FW.error("服务器暂时无法响应下载请求，请稍后再试"),_download_show(d),delete _download_tokens[c]}}):(_itc_download(f),b.useCookie&&_download_check_token(d,c,e.downloadTimeout))})}}})}(jQuery),function(a){a.fn.extend({iPager:function(b,c){if("init"==b&&(b="create"),"create"==b||"createPg"==b){if("object"!=typeof c)return;a(this).ITCUI_Pagination(b,c.target,c.styleOpts)}return a(this)},ITCUI_ComboBox:function(b,c){return a(this).iCombo(b,c)},iCombotree:function(b,c){return"init"!=b?"getVal"==b?a(this).ITCUI_ComboTree("getValue",c):a(this).ITCUI_ComboTree(b,c):(a(this).ITCUI_ComboTree("create",c),a(this))},ITC_Form:function(b,c){return a(this).iForm(b,c)},iFold:function(b,c){return"init"==b?("object"==typeof c&&c.title&&a(this).attr("grouptitle",c.title),a(this).ITCUI_Foldable()):a(this).ITCUI_Foldable(b,c),a(this)},iInput:function(b,c){return"init"==b&&("object"==typeof c&&(c.icon&&a(this).attr("icon",c.icon),c.onlylabel&&a(this).attr("onlylabel",!0)),a(this).removeClass("form-control").ITCUI_Input(c)),a(this)},iHint:function(b,c){var d=a(this);return _changeArg(c,"onGetPosition","getAbsPosFunc"),"init"==b&&(d.hasClass("form-control")&&(c.getAbsPosFunc=c.getAbsPosFunc||function(){return{left:0,top:1}}),d.ITCUI_HintList(c)),d},iDate:function(b,c){if("init"==b){var d=null,e=null;"object"==typeof c&&(d=c.inputOpts,e=c.datepickerOpts),a(this).ITCUI_LazyLoadPicker(d,e)}return a(this)},iUpload:function(b,c){return"init"!=b?a(this).ITCUI_FileUpload(b):(a(this).ITCUI_FileUpload(c),a(this))},iDatagrid:function(b,c){var d=a(this);if("beginSearch"==b)d.ITCUI_GridSearch("init",c);else if("endSearch"==b)d.ITCUI_GridSearch("end");else if("init"==b){c.data&&c.pageSize&&(c._data=c.data,c.data={total:c._data.total,rows:c._data.rows.slice(0,c.pageSize)}),c.url&&(c.remoteSort=!0);var e=d.attr("id");delete _itc_grids[e],c.fitColumns=0==c.fitColumns?!1:!0,c.pagination=!0,c.pageList=c.pageList||[10,15,20,30,100],c._onRenderFinish=c.onRenderFinish||function(){},c.onRenderFinish=function(){var b=a(this),c=b.data("datagrid").options,e=(b.datagrid("getData"),b.attr("id")),f=b.attr("pager");if(f){if(!_itc_grids[e]){var g="undefined"==typeof styleOpt?null:styleOpt;d.iPager("init",{target:f,styleOpts:g}),_itc_grids[e]=!0}b.iFixCheckbox(),c._onRenderFinish&&c._onRenderFinish.apply(this)}};var f=d.attr("style");(!f||f.toLowerCase().indexOf("height")<0)&&(c.scrollbarSize=c.scrollbarSize||0);var g=d.datagrid(c);return g}},iMenu:function(b,c){var d=a(this).attr("id");if("init"==b){if(!c||"object"!=typeof c)return;ITCUtil.createMenu("#"+d,c.menu,c)}else if("getVal"==b){var e=a("#"+c);return e.length>0&&e.find(".dropdown-unchecked").length>0?ITCUtil.getMenuCheckVal(c):ITCUtil.getMenuSelectVal("#"+d,c)}}})}(jQuery),FW.notify=function(a){_parent()._ITC.notify(a)},function(a){a.fn.extend({ITCUI_LazyLoadPicker:function(b,c){var d=a(this),e=b||{},f=c||{};f.language="ch",f.autoclose=f.autoclose||!0,f.forceParse=!0;var g=e.placeholder||"";e.inputId=e.inputId||d.attr("input-id")||"itc_dp"+a(".itcui_btn_calander").length;var h=e.inputName||d.attr("input-name")||null,i=h?" name='"+h+"'":"";d.addClass("input-group input-group-sm");var j=d.hasClass("valid-field-wrap")?"valid-field":"";a("<input"+i+" id='"+e.inputId+"' type='text' icon='itcui_btn_calander' class='"+j+" ' style='width:10px'></input>").attr("placeholder",g).appendTo(d);var k=a(d.children(":input"));k.ITCUI_Input();var l=k.next("span");d.children("input").data("opts",f),d.children("input").data("inited",!1),d.children("input").click(function(){var b=a(this),c=b.data("inited"),d=b.data("opts");c||(b.data("inited",!0),b.datetimepicker(d).datetimepicker("show"))}),l.click(function(b){var c=a(this),d=c.prev("input"),e=d.data("inited");if(e)d.datetimepicker("show");else{var f=d.data("opts");d.datetimepicker(f).datetimepicker("show"),d.data("inited",!0)}})}})}(jQuery),function(a){a.fn.extend({ITCUI_Foldable:function(b,c){var d="无标题栏目",e=a(this),f=this;f.initFoldable=function(){c=c||{},c.onExpand=c.onExpand||function(){},c.onFold=c.onFold||function(){},c.hideOnEmpty=c.hideOnEmpty===!1?!0:!1,e.data("opts",c),e.attr("grouptitle")&&(d=e.attr("grouptitle")),c&&c.grouptitle&&(d=c.grouptitle);var a="";e.css("float")&&(a="float:"+e.css("float"));var b='<div class="itcui_frm_grp_title" style="width:100%;'+a+'">';b+='<span class="itcui_frm_grp_title_txt">'+d+"</span>",b+='<span class="title-arrow',"none"!=e.css("display")&&(b+=" expand"),b+='"></span>',b+="</div>",e.before(b),f.hideOnEmpty()},f.hideOnEmpty=function(){for(var b=e.children(),c=!0,d=0;d<b.length;d++)if("none"!=a(b[d]).css("display")){c=!1;break}c&&f.hideAll()},f.hideAll=function(){e.hide(),e.prev(".itcui_frm_grp_title").hide()},f.showAll=function(){e.show(),e.prev(".itcui_frm_grp_title").show()},f.fold=function(){var a=e.prev(".itcui_frm_grp_title");f.foldOrExpand(a,"fold")},f.expand=function(){var a=e.prev(".itcui_frm_grp_title");f.foldOrExpand(a,"expand")},f.toggle=function(){var a=e.prev(".itcui_frm_grp_title");f.foldOrExpand(a)},f.foldOrExpand=function(b,c){var d=a(b).next("div"),e=d.data("opts");"none"!=d.css("display")&&"expand"!=c||"fold"==c?"expand"!=c&&(d.slideUp("normal",e.onFold),b.children(".title-arrow").removeClass("expand")):(b.children(".title-arrow").addClass("expand"),d.slideDown("normal",e.onExpand))},f.addEvents=function(){var a=e.prev(".itcui_frm_grp_title");e.attr("allowexpand")?a.click(function(b){f.foldOrExpand(a)}):a.addClass("no-expand")},b?"show"==b?f.showAll():"hide"==b?f.hideAll():"fold"==b?f.fold():"expand"==b?f.expand():"toggle"==b&&f.toggle():(f.initFoldable(),f.addEvents())}})}(jQuery);var hintTimerId=null;!function(a){a.fn.extend({ITCUI_Input:function(b){var c=a(this),d=b||{},e=c.parent();init=function(){var b=d.icon||c.attr("icon")||null,f=d.placeholder||c.attr("placeholder")||null,g=d.onlylabel||c.attr("onlylabel")||null,h=d.onPressEnter,i=d.onClickIcon,j=d.onSearch;j&&(h=j,
i=j);var k="100%";b&&(a("<span class='itcui_input_icon'></span>").appendTo(e).addClass(b).css({position:"absolute",top:"7px",right:"6px"}),e.css("padding-right","20px")),f||b?(c.css({"float":"left","border-width":"0px",outline:"none",height:"24px",display:"block",width:"95%"}),e.addClass("form-control-style")):c.addClass("form-control"),f&&(window.requestAnimationFrame||(a("<span class='itcui_placeholder' style='float:left'>"+f+"</span>").prependTo(e).addClass("itcui_placeholder").css({width:k}),e.children("input").hide().blur(function(){var b=a(this);b.val()||(b.hide(),b.prev("span").css("display","block"))}),e.children(".itcui_placeholder").click(function(){var b=a(this);b.hide(),b.next("input").css("display","block").focus()}))),g&&addLabel(),h&&(c.data("onPressEnter",h),c.on("keypress",function(b){13==b.which&&a(this).data("onPressEnter")(a(this).val())})),i&&(c.data("onClickIcon",i),c.parent().children(".itcui_input_icon").on("click",function(){var b=a(this).parent().children("input");b.data("onClickIcon")(b.val())}))},addLabel=function(){e.addClass("borderless").find(".itcui_input_icon").css("display","none"),e.find("input").css("visibility","hidden"),e.css("height",e.css("height")).css("overflow","hidden");var b=c.val();a("<span class='itcui_onlylabel'>"+b+"</span>").prependTo(e)},b&&"object"!=typeof b?"string"==typeof b&&"label"==b&&addLabel():init()}})}(jQuery),function($){$.fn.extend({ITCUI_HintList:function(opt){function createWrap(){var a=$(this),b=a.css("width"),c='<ul class="dropdown-menu hintlist-wrap" role="menu" style="overflow-x:hidden;position:absolute;min-width:200px;width:'+b+'">';c+='<li><span class="menuitem noclick">正在加载，请稍后</span></li>',c+="</ul>",$("body").append(c);var d=$(".hintlist-wrap");UiCommon.moveToParent(d,a),a.data("hintList",d);var e=a.data("opt"),f=a.offset();d.css({left:f.left,top:f.top+parseInt(a.css("height")+1),display:"block"}),"input"==e.showOn&&d.hide();var g={target:a,wrapObj:d,lastHintVal:null,hintTimer:null};createState(g),g.hintTimer=setInterval(function(){var a=g.target.val(),b=g.wrapObj;a.length>0&&"none"==b.css("display")&&b.show(),a!=g.lastHintVal&&(g.lastHintVal=a,changeData(g))},100)}function createState(a){_parent()._ITC.hintListState=a}function getState(){return _parent()._ITC.hintListState}function changeData(state){var target=state.target,kw=target.val(),opt=target.data("opt");if(opt.datafunc){var data=opt.datafunc(kw);isArray(data)&&genList({kw:kw,data:data,state:state})}else if(opt.datasource){var form={kw:kw};opt.extArgName&&(form[opt.extArgName]=opt.extArgFunc()),$.ajax({url:opt.datasource,type:"POST",data:form,success:function(result){result||(result=[]),isArray(result)||(result=eval("("+result+")")),isArray(result)&&genList({kw:kw,data:result,state:state})}})}}function genList(a){var b=a.kw,c=a.data,d=a.state,e=d.target,f=d.wrapObj;e.data("hintObjSelected",!1);for(var g=e.data("opt"),h=g.formatter,i="",j=c.length>g.maxItemCount?g.maxItemCount:c.length,k=0;j>k;k++){var l=c[k],m=h(l.id,FW.specialchars(l.name),l);if(g.highlight){var n=FW.specialchars(b),o=g.highlighter.replace("#",n);m=m.replace(n,o)}i+='<li><a class="menuitem" seq='+k+' hintid="'+l.id+"\" _name='"+FW.specialchars(l.name)+"'>"+m+"</a></li>"}0==c.length&&(i+='<li><span class="noclick">没有符合条件的结果</span></li>'),c.length>g.maxItemCount&&(i+='<li><span class="noclick">结果多于'+g.maxItemCount+"条，请补充关键字</span></li>"),f.data("listData",c).html(i).find(".menuitem").mousedown(function(){d.hintTimer&&clearInterval(d.hintTimer);var a=$(this),b=a.attr("hintid"),c=parseInt(a.attr("seq"),10),g=FW.unspecialchars(a.attr("_name")),h=e.data("opt");e.data("hintObjSelected",!0),h.clickEvent(b,g,f.data("listData")[c]),e.data("lastInputVal",e.val())})}function hintListBlur(a){var b=getState();if(b){b.hintTimer&&clearInterval(b.hintTimer);var c=b.target,d=b.wrapObj;if(d.length>0&&"none"!=d.css("display"))if(c.data("hintObjSelected"))c.data("hintObjSelected",!1);else if(0!=c.val().length){var e=c.data("opt"),f=e.forceParse;c.val()!=c.data("lastInputVal")&&("string"==typeof f?"clear"==f&&c.val(""):"function"==typeof f&&f(c,d.data("listData")))}d.remove(),createState(null)}}var _this=$(this),inited=_this.attr("data-ihint-init");inited||_this.attr("data-ihint-init",1);var _t=this;opt=opt||{},(opt.datasource||opt.datafunc)&&(opt.maxItemCount=opt.maxItemCount||10,opt.filterHere=opt.filterHere||!1,opt.getDataOnKeyPress=opt.getDataOnKeyPress||!1,opt.extArgName=opt.extArgName||null,opt.extArgFunc=opt.extArgFunc||function(){},opt.highlight=opt.highlight===!1?!1:!0,opt.clickEvent=opt.clickEvent||function(){},opt.formatter=opt.formatter||function(a,b){return b},opt.highlighter=opt.highlighter||"<span style='color:red'>#</span>",opt.showOn=opt.showOn||"click",opt.forceParse=opt.forceParse||"clear",_this.data("opt",opt),_this.addClass("enter-allowed").addClass("hintlist-input"),inited||(_this.on("click",function(a){a.stopPropagation()}),_this.on("focus",function(a){var b=getState(),c=this;b&&b.target.attr("id")==$(this).attr("id")||setTimeout(function(){createWrap.apply(c)},200)}),_this.on("blur",function(){hintListBlur()}),_this.on("keydown",function(a){var b=getState(),c=$(this);a=a||window.event;var d=a.which||a.keyCode,b=getState(),e=b.wrapObj;if(0!=e.length&&"none"!=e.css("display"))if(38==d||40==d){a.preventDefault();var f=e.children(".active");if(f.removeClass("active"),38==d)if(0==f.length)e.children("li").last().addClass("active");else if(0==f.prev("li").length){var g=e.children("li").last();0==g.children(".noclick").length?g.addClass("active"):g.prev("li").addClass("active")}else f.prev("li").addClass("active");else 40==d&&(0==f.length?e.children("li").first().addClass("active"):f.next("li").children(".noclick").length>0||0==f.next("li").length?e.children("li").first().addClass("active"):f.next("li").addClass("active"))}else 13==d&&e.find(".active")&&(e.find(".active").children("a").mousedown(),c.blur())})))}})}(jQuery),function(a){a.fn.extend({ITCUI_Pagination:function(b,c,d){var e=a(this),f=this,g=a(e.datagrid("getPager")),h=g.pagination("options"),i=2;f.bindMenuPagerEvents=function(){var b=a(c);b.find(".itc_pagination_menu li").click(function(b){var c=a(this),d=c.attr("turnto");f.turnTo(c.parents(".itc_pagination_container"),d)}),b.find(".itc_pagination_psize li").click(function(b){var c=a(this).children("a").html().replace(/<.*>/,"").replace("每页","").replace("条",""),d=a(this).parents(".itc_pagination_container"),f=d.data("targetPager");f&&(f.pagination({pageSize:c}).pagination("select",1),e=d.data("ptrGrid"),targetDiv=d.data("targetDiv"),e.ITCUI_Pagination("create",targetDiv,d.data("opts")),d.data("onChangePageSize")(c),"undefined"!=typeof FW.setAllPageSize&&FW.setAllPageSize(c))}),b.find(".itc_pagination_style li").click(function(b){var c=a(this),d=c.attr("tblStyle"),e=c.parents(".itc_pagination_container");c.parent().find(".dropdown-selected").removeClass("dropdown-selected").addClass("dropdown-unselected"),c.find(".dropdown-unselected").removeClass("dropdown-unselected").addClass("dropdown-selected"),e.data("onChangeStyle")(d)})},f.turnTo=function(a,b){FW.pushEvent("翻页","页数="+b,"");var c="TIMSS",d=a.data("targetPager");d.pagination("select",b),f.adjustButtons(a);var e=a.find(".itc_pg_selector_wrap");e.find(".currpage").html(b);var g=d.pagination("options"),h=parseInt(g.pageNumber),j=Math.ceil(g.total/g.pageSize)||1;if("TIMSS"!=c){var k=-1,l=-1;1+2*i>=j?(k=1,l=j):h-i>1&&j>h+i?(k=h-i,l=h+i):1>=h-i?(k=1,l=1+2*i):h+i>=j&&(l=j,k=j-1-2*i);for(var m="",n=k;l>=n;n++)m+="<li turnto="+n+"><a class='menuitem'>"+n+"/"+j+"</a></li>";m+="<li class='divider'></li>",m+="<li turnto=1><a class='menuitem'>首页</a></li>",m+="<li turnto="+j+"><a class='menuitem'>末页</a></li>",setTimeout('$("div .itc_pagination_menu").html("'+m+'");_t.bindMenuPagerEvents();',200)}},f.createPagination=function(){f.data("target",c),f.data("styleOpt",d);var i=e.datagrid("options");!i.url&&i._data&&("createPg"!=b&&(i.__data=i._data),h.datagrid=e,h.onSelectPage=function(b,c,d){for(var e=a(this).data("pagination").options,f=e.datagrid.datagrid("options")._data.rows,g=0,h=[];c>g;){var i=(b-1)*c+g;if(!(i<f.length))break;h.push(f[i]),g++}e.datagrid.datagrid("loadData",{total:f.length,rows:h})}),i.remoteSort||(i.onSortColumn=function(b,c){var d=a(this).datagrid("options"),e=d._data;_arr_sort(e.rows,b,c);var f=a(this).datagrid("getPager");a(f).pagination("select")}),a(c).addClass("itc_pagination_container");var j="",k=h.pageList;if(j+="<div class='dropdown bbox' style='float:right'><span data-toggle='dropdown' class='itc_pg_btn itc_pg_setting'></span>",j+="<ul class='dropdown-menu pull-right mnu-multilevel' role='menu'>",d&&d.defStyle&&d.styles){j+="<li class='dropdown-submenu pull-left'><a>显示设置</a><ul class='dropdown-menu itc_pagination_style'>";for(var l=0;l<d.styles.length;l++){var m=d.styles[l];j+="<li tblStyle='"+m.id+"'><a class='menuitem'>",j+=m.id==d.defStyle?"<span class='dropdown-selected'></span>":"<span class='dropdown-unselected'></span>",j+=m.title+"</a></li>"}a(c).data("onChangeStyle",d.onChangeStyle||function(){}),a(c).data("onChangePageSize",d.onChangePageSize||function(){}),a(c).data("opts",d),j+="</ul></li>"}j+="<li class='dropdown-submenu pull-left'><a>分页设置</a><ul class='dropdown-menu itc_pagination_psize'>";for(var l=0;l<k.length;l++){j+="<li><a class='menuitem'>";var n=k[l]==h.pageSize?"selected":"unselected";j+="<span class='dropdown-"+n+"' pagesize="+k[l]+"></span>",j+="每页"+k[l]+"条</a></li>"}j+="</ul></li>",j+="</ul></div>",j+="<span class='itc_pg_btn itc_pg_next'></span>",j+="<span class='itc_pg_btn itc_pg_prev'></span>";var o=Math.ceil(h.total/h.pageSize)||1;j+="<div class='dropdown bbox' style='float:right'><div class='itc_pg_selector_wrap' data-toggle='dropdown'><span class='currpage'>",j+=h.pageNumber+"</span><span class='itc_pagination_divider'>/</span><span>"+o,j+="</span><span class='itc_pg_selector_icon'></span></div>",j+="<ul class='itc_pagination_menu dropdown-menu' role='menu' style='overflow-y:auto;overflow-x:hidden;max-height:208px'>";for(var l=1;o>=l;l++)j+="<li turnto="+l+"><a class='menuitem'>"+l+"<span class='itc_pagination_divider'>/</span>"+o+"</a></li>";j+="</ul></div>",a(c).html(j);var p=a(c).attr("bottompager");if(p&&!window._dialogEmmbed){var q='<div class="btn-group btn-group-sm">';q+='<button type="button" class="btn btn-default itc_pg_round_l btn_sm_w88"><b class="itc_pgprev_nr"></b><span>上一页</span></button>',q+='<button type="button" class="btn btn-default itc_pg_round_r btn_sm_w88"><span>下一页</span><b class="itc_pgnext_nr"></b></button>',q+="</div>"}a(p).addClass("bbox").html(q).css({"text-align":"center","margin-top":"20px"}),a(p).data("targetITCPager",a(c)),a(p).data("targetEUPager",e),g.css("display","none"),f.bindMenuPagerEvents()},f.adjustButtons=function(b){tgt=null==b?a(c):b;var d=null==b?h:tgt.data("targetPager").pagination("options"),e=tgt.attr("bottompager"),f=!1,g=!1;if(d.pageNumber>1?tgt.find(".itc_pg_prev_disable").removeClass("itc_pg_prev_disable").addClass("itc_pg_prev"):(tgt.find(".itc_pg_prev").addClass("itc_pg_prev_disable").removeClass("itc_pg_prev"),f=!0),d.pageNumber*d.pageSize<d.total?tgt.find(".itc_pg_next_disable").removeClass("itc_pg_next_disable").addClass("itc_pg_next"):(tgt.find(".itc_pg_next").addClass("itc_pg_next_disable").removeClass("itc_pg_next"),g=!0),e&&!window._dialogEmmbed){var i=a(e);if(g&&f)i.hide();else{i.show();var j=i.children("div");f?j.children(".itc_pg_round_l").attr("disabled","disabled"):j.children(".itc_pg_round_l").removeAttr("disabled"),g?j.children(".itc_pg_round_r").attr("disabled","disabled"):j.children(".itc_pg_round_r").removeAttr("disabled")}}},f.addEvents=function(){var b=a(c).find(".itc_pg_btn");a(c).data("targetPager",g),a(c).data("targetDiv",c),a(c).data("ptrGrid",e);var d=a(c).attr("bottompager");if(d){var h=a(d).children("div");h.children(".itc_pg_round_l").click(function(){var b=a(this).parent().parent(),c=a(this).parent().parent().data("targetITCPager"),d=b.data("targetEUPager").datagrid("getPager").pagination("options");f.turnTo(c,parseInt(d.pageNumber)-1),a(this).blur()}),h.children(".itc_pg_round_r").click(function(){var b=a(this).parent().parent(),c=a(this).parent().parent().data("targetITCPager"),d=b.data("targetEUPager").datagrid("getPager").pagination("options");f.turnTo(c,parseInt(d.pageNumber)+1),a(this).blur()})}b.click(function(b){var c=a(this);if(!c.hasClass("itc_pg_setting")){var d=c.parent().data("targetPager"),e=a(c.parent().data("targetDiv")),g=d.pagination("options");c.hasClass("itc_pg_prev")&&f.turnTo(e,parseInt(g.pageNumber)-1),c.hasClass("itc_pg_next")&&f.turnTo(e,parseInt(g.pageNumber)+1)}})},f.search=function(a){var b=e.datagrid("options");!b.url&&b.__data&&f.localSearch(a)},f.localSearch=function(a){for(var b=e.datagrid("options"),c=[],d=b.__data.rows,g=0;g<d.length;g++){var h=!0,i=d[g];for(var j in i){var k=(""+i[j]).toLowerCase();if(a[j]){var l=(""+a[j]).toLowerCase();if("null"!=l&&l||(l=""),k.indexOf(l)<0){h=!1;break}}if(a["_"+j]){var l=(""+a["_"+j]).toLowerCase();if(k!=l&&l){h=!1;break}}}h&&c.push(i)}b._data={rows:c,total:c.length},b.data={rows:c.slice(0,b.pageSize),total:c.length},f.datagrid(b),f.ITCUI_Pagination("createPg",f.data("target"),f.data("styleOpt"))},"create"==b||"createPg"==b?(f.createPagination(),f.adjustButtons(),f.addEvents()):"search"==b&&f.search(c)}})}(jQuery);var Priv={secUser:(null!=_parent()._ItcMvc_ApplicationGlobal?_parent()._ItcMvc_ApplicationGlobal.userInfo:null)||window._userInfo||null,privMap:{},objCache:[],repFunc:["hasRole","hasGroup","hasPrivilege","siteIs","inOrg","idIs"],vPriv:window._vPrivilege||{}};Priv.hasRole=function(a){if(!Priv.secUser)return!1;for(var b=Priv.secUser.roles,c=0;c<b.length;c++){var d=b[c];if(d.id==a)return!0}return!1},Priv.hasGroup=function(a){if(!Priv.secUser)return!1;for(var b=Priv.secUser.groups,c=0;c<b.length;c++){var d=r[c];if(d.id==a)return!0}return!1},Priv.hasPrivilege=function(a){var b=_parent().privMapping||window.privMapping||{};return b[a]?!0:Priv.vPriv[a]?!0:!1},Priv.idIs=function(a){return Priv.secUser&&Priv.secUser.userId==a?!0:!1},Priv.siteIs=function(a){return Priv.secUser&&Priv.secUser.siteId==a?!0:!1},Priv.inOrg=function(a){if(!Priv.secUser)return!1;for(var b=Priv.secUser.orgs,c=0;c<b.length;c++){var d=b[c];if(d.code==a||d.parentCode==a)return!0}return!1},Priv.runExpr=function(expr){if(!expr.indexOf("(")<0)return Priv.hasPrivilege(expr);for(var pf=Priv.repFunc,i=0;i<pf.length;i++){var fn=pf[i];expr=expr.replaceAll(fn,"Priv."+fn)}try{return eval(expr)}catch(e){return!1}},Priv.map=function(a,b){a?Priv.privMap[b]=a:(delete Priv.vPriv[b],delete Priv.privMap[b])},Priv.applyPrivOnObj=function(a){var b=$(a),c=b.attr("privilege");if(c){Priv.objCache.push([b,c]);for(var d=c.split(" "),e=!0,f=0;f<d.length;f++){var g=d[f];if(!Priv.hasPrivilege(g)){b.hide(),e=!1;break}}e&&(b.hasClass("only-hide")||b.show())}},Priv.applyPrivOnForms=function(){$("form").each(function(){var a=$(this),b=a.data("fieldObjs");if(b)for(var c in b){var d=b[c].fieldOption,e=d.privilege;e&&(Priv.hasPrivilege(e)?a.iForm("show",c):a.iForm("hide",c))}})},Priv.applyPrivOnTables=function(){$("table").each(function(){var a=$(this),b=a.data("datagrid");if(b){var c=b.options.columns[0];if(c)for(var d=0;d<c.length;d++){var e=c[d],f=e.privilege;f&&(Priv.hasPrivilege(f)?a.datagrid("showColumn",e.field):a.datagrid("hideColumn",e.field))}}})},Priv.apply=function(a){a=!1;for(var b in Priv.privMap){var c=Priv.privMap[b];Priv.runExpr(c)?Priv.vPriv[b]=!0:delete Priv.vPriv[b]}var d=Priv.objCache,e=d.length;if(a&&e>0)for(var f=0;e>f;f++){var g=d[f];Priv.applyPrivOnObj(g[0])}else d=[],$(".priv").each(function(){Priv.applyPrivOnObj(this)});Priv.applyPrivOnForms(),Priv.applyPrivOnTables()},function(a){a.fn.extend({authShow:function(){var b=a(this),c=b.attr("privilege");c&&Priv.hasPrivilege(c)&&b.show()}})}(jQuery);var _timss_eventqueue=_parent()._timss_eventqueue||[];FW.pushEvent=function(a,b,c){if(20==_timss_eventqueue.length&&_timss_eventqueue.shift(),c=c||"无","object"==typeof c){var d=[];for(var e in c){var f=c[e];f&&"string"==typeof f&&(f.length>10&&(f=f.substring(0,10)),d.push(e+"= "+f))}c=d.join(" ")}c+="",c.indexOf(",")>0&&(c=c.replaceAll(","," ")),_timss_eventqueue.push((new Date).getTime()+","+a+","+b+","+c)},FW.loadEnumAsync=function(a){},FW.loadComboEnum=function(a,b,c){if(!window.TimssService&&!window.ItcMvcService)return void FW.debug("无法找到TimssService，FW.loadComboEnum是一个专用于TIMSS2的适配方法。");var d="ENUM_"+b,e=window.ItcMvcService||window.TimssService,f=FW.get(d);!f&&window._enum&&(f=_enum),f?FW._parseEnumData(a,b,f,c):e.getEnumParams([b],function(e){_parent().FW.set(d,e,!0),FW._parseEnumData(a,b,e,c)})},FW.parseEnumData=function(a,b,c){var d=b[a];if(!d)return FW.debug("无法找到枚举数据"+a+"，请检查配置是否正确"),[];for(var e=[],f=0;f<d.length;f++){var g=d[f];c==g.code?e.push([g.code,g.label,!0]):e.push([g.code,g.label])}return e},FW._parseEnumData=function(a,b,c,d){if(c&&c[b]){var e=FW.parseEnumData(b,c,d);$("#"+a).iCombo("loadData",e)}else FW.debug("枚举数据获取失败，请检查枚举类型code是否填写正确，以及TimssService是否有在干活")},FW.addFormCloseEvent=function(){var a=$("body").children(".inner-title");if(1==a.length&&/(新建|添加|新增|创建)/.test(a.text())&&_parent()._ITC){var b=FW.getCurrentTabId(),c=_parent()._ITC.navTab.findTabItem(b);c.beforeClose=c.beforeClose||function(){return FW.confirm("确定关闭|当前选项卡中未保存的内容将丢失，是否继续？",function(){delete evtMap[b].beforeClose,FW.deleteTabById(b)}),!1}}},function(a){a.fn.extend({initHintPersonList:function(b){var c=window.basePath||"";b=b||{},b.scope=b.scope||"site",b.showOn=b.showOn||"input",b.datasource=c+"user?method=hint",b.getDataOnKeyPress=!0,b.highlight=!0,b.formatter=function(a,b){return b+" / "+a.split("_")[0]},"all"==b.scope&&(b.datasource+="&ignoresite=1"),a(this).iHint("init",b)}})}(jQuery);var UiCommon={};UiCommon.replaceValidMsgForm=function(a,b,c,d){var e=b.rules,f=b.messages&&b.messages[a]?b.messages[a]:null;f=f||c.defValidMsg[a]||"字段填写错误",f=f.replace("%f",b.title);var g=e[a];return!g&&0!==g||isArray(g)||(f=f.replace("%l",g)),UiCommon._replaceValidMsg(f,e,c,d)},UiCommon.replaceValidMsgTable=function(a,b,c,d,e){a=a.replace("%f",b.title);var f=c.maxlength||c.minlength||c.enLength||c.chLength||c.maxChLength||c.maxEnLength||c.min||c.max;return f&&(a=a.replace("%l",f)),UiCommon._replaceValidMsg(a,c,d,e)},UiCommon._replaceValidMsg=function(a,b,c,d){var e=b.range||b.rangelength;e&&isArray(e)&&(a=a.replace("%l1",e[0]),a=a.replace("%l2",e[1]));var f=b.greaterThan||b.greaterEqualThan;if("string"==typeof f&&c&&f&&0==(f+"").indexOf("#")){var g=("#"+c.fieldPrefix).length,h=f.substring(g);d&&d[h]?a=a.replace("%f2",d[h].title):FW.debug("gt/gte的参数错误，在双输入框验证时，需要传入一个正确的选择器，如#f_endTime")}else a=a.replace("%f2",f);return a},UiCommon.getObjWidth=function(a){var b=a.attr("style");if(!b)return null;b=b.toLowerCase();for(var c=b.split(";"),d=0;d<c.length;d++){var e=c[d].split(":");if(2==e.length){var f=$.trim(e[0]),g=$.trim(e[1]);if("width"==f)return g}}return null},UiCommon.makeWrap=function(a){var b=$(a);if(!(b.parent(".itc_object_wrap").length>0)){for(var c=$("<div class='itc_object_wrap'></div>").insertBefore(b),d=["float","position","display","width","height","margin-left","margin-top","left","top"],e=UiCommon.getObjWidth(b)||"150px",f={},g=0;g<c.length;g++){var h=b.css(d[g]);h&&(f[d[g]]=h)}c.css(f),c.append(b),b.attr("style",""),b.css("width",e),c.css("width",e)}},UiCommon.onlyNumKeyDown=function(a,b){var c=a.dataType;if(/^number/.test(c)||/^digits/.test(c)){var d=c.indexOf("["),e=c.indexOf("]"),f=null,g=null;if(d>0&&e>0){var h=c.substring(d+1,e).split(",");2==h.length&&(g=h[0],f=h[1]),c=c.substring(0,d)}var i=a.minValue,j=a.maxValue;i&&j&&(f="function"==typeof j?j(b):j,g="function"==typeof g?i(b):i),null!==g&&null!==f&&(b.attr("minval",g),b.attr("maxval",f),b.bind("keyup",function(){var a=$(this),b=parseInt(a.attr("maxval"),10),c=parseInt(a.attr("minval"),10),d=parseInt(a.val(),10);d>b?a.val(b):c>d&&a.val(c)}));var k=["event","'"+c+"'",g+"",f+""];b.attr("onkeydown","UiCommon.validNum("+k.join(",")+")")}},UiCommon.validNum=function(a,b,c,d){var e=a||window.event,f=e.keyCode||e.which,g=!0;!e.shiftKey&&!e.altKey&&!e.ctrlKey&&f>=48&&57>=f||f>=96&&105>=f||8==f||9==f||13==f||35==f||36==f||37==f||39==f||46==f||45==f||("number"!=b||110!=f&&190!=f)&&(!(null==d||0>d)||109!=f&&189!=f)&&(g=!1),g||(e.returnValue=!1,e.preventDefault&&e.preventDefault())},UiCommon.moveToParent=function(a,b){if(!window._xssEmbbed&&window._dialogEmmbed){var c=_parent().$("body");a.detach().appendTo(c),a.data("relObj",b),UiCommon.adjustObjPosition(a)}},UiCommon.adjustObjPosition=function(a){if(relObj=a.data("relObj"),relObj){relObj.offset();setTimeout(function(){var b=relObj.offset(),c=relObj.height(),d=UiCommon.getMaskIndex(),e=UiCommon.getDialogOffset();if(!e)return FW.debug("无法找到一个打开的对话框，请注意只有在对话框里的页面才能声明_dialogEmbbed=true"),void(window._dialogEmmbed=!1);var f=$("body").scrollTop()||document.documentElement.scrollTop,g=$("body").scrollLeft()||document.documentElement.scrollLeft,h="text"==relObj.attr("type")?4:0;a.css({display:"block","z-index":d+1,top:b.top+e.top+28+c-f+h,left:b.left+e.left-g})},50)}},UiCommon.getTopMost=function(a){for(var b=null,c=_parent().$(".window"),d=0,e=0;e<c.length;e++){var f=$(c[e]),g=f.css("z-index");"block"==f.css("display")&&g>d&&(d=g,b=f.offset())}return 1===a?d:b},UiCommon.addValidStyle=function(a,b){var c=$(b),d=parseInt(c.css("width")),e={top:"2px"};c.parent().hasClass("itcui_combo")?e.right="20px":e.left=d-22+"px",a.addClass("itcui_icon_warn_mid").css(e).attr("title",$(a).text()),a.insertAfter(b)},UiCommon.joinKeys=function(a,b){b=b||",";var c=[];for(var d in a)a[d]&&c.push(d);return c.join(b)},UiCommon.removeComboWrap=function(){window._dialogEmmbed?_parent().$("#itc_combo_wrap").remove():$("#itc_combo_wrap").remove()},UiCommon.getMaskIndex=function(){return UiCommon.getTopMost(1)},UiCommon.getDialogOffset=function(){return UiCommon.getTopMost(0)},UiCommon.objData2Array=function(a){var b=[];for(var c in a)b.push([c,a[c]]);return b},UiCommon.getExtName=function(a){var b=a.lastIndexOf(".");return 0>b?"":a.substring(b+1).toLowerCase()},UiCommon.isPreviewableImg=function(a){var b=UiCommon.getExtName(a);return FW.get("canPreviewAttach")?/(jpg|jpeg|png|gif)/.test(b):!1},UiCommon.isPreviewableFile=function(a){var b=UiCommon.getExtName(a);return FW.get("canPreviewAttach")?/(doc|docx|xls|xlsx|ppt|pptx|pdf|txt|zip|rar|7z|tif|tiff)/.test(b):!1},UiCommon.debounce=function(a,b,c){var d,e,f,g,h,i=function(){var j=UiCommon.now()-g;b>j&&j>=0?d=setTimeout(i,b-j):(d=null,c||(h=a.apply(f,e),d||(f=e=null)))};return function(){f=this,e=arguments,g=UiCommon.now();var j=c&&!d;return d||(d=setTimeout(i,b)),j&&(h=a.apply(f,e),f=e=null),h}},UiCommon.now=Date.now||function(){return(new Date).getTime()},function(a){a.fn.extend({iCombo:function(b,c){function d(a){if(isArray(a))return!1;for(var b=0;b<a.length;b++){var c=a[b];if(c[2])return!0}return!1}function e(a,b){var c=a;if(isArray(a)){c={};for(var d=0;d<a.length;d++)c[a[d][0]]=!0}for(var e in c)if(b[e])return!0;return!1}var f=a(this),g=this;g.init=function(b){b=b||{};var c={fixWrapWidth:!!b.wrapWidth,wrapWidth:150,onChange:function(){},url:null,onRemoteData:function(a){return a},remoteLoadOn:"click",displayItemCount:6,allowEmpty:b.url&&"click"==b.remoteLoadOn||!1,initOnChange:!0,firstItemEmpty:!1,allowSearch:!1,sbPlaceHolder:"输入关键字搜索",delimiter:"##",highlight:"#aaa",multiselect:!1,onRenderFinish:function(){},syncOnChange:!1},d=a.extend(c,b);return f.data("options",d),f.data("dataMapping",[]),f.data("firstOnChange",!0),f.data("selectedValues",{}),d.data||g.initDataFromHtml(d),f.data("ptrInput",f.prev(".itcui_combo").children("input")),d.data&&(g.updateListData(d.data),g.setInitValue(),g.getVal()&&g.triggerOnChange()),g.initUI(),d.url&&g.doRemoteLoad(d.url),f},g.initDataFromHtml=function(b){var c=f.children();if(c.length){for(var d=f.data("options"),e=[],g=0;g<c.length;g++){var h=a(c[g]);e.push([h.attr("value"),h.text(),!!h.attr("selected")])}d.data=e}},g.doDataLoad=function(a){if(g.updateListData(a),!e(a,f.data("selectedValues"))){var b=f.data("options");if(!g.getVal()&&b.allowEmpty&&!d(a))return;g.setInitValue()}g.updateText()},g.doRemoteLoad=function(b){a.ajax({url:b,dataType:"json",error:function(a,b,c){FW.error("从服务器获取数据失败（"+b+"）")},success:function(a){var b=f.data("options").onRemoteData;a=b(a),g.doDataLoad(a)}})},g.setInitValue=function(){var a,b=f.data("dataMapping"),c=f.data("options"),d=!1,e={};if(b.length){for(var h=0;h<b.length;h++)a=b[h],a.initSelected&&(e[a.value]=!0,d=!0);d||c.allowEmpty||(a=b[0],e[a.value]=!0)}f.data("selectedValues",e),f.prev(".itcui_combo").find(".valid-field").val(g.getVal())},g.updateListData=function(a){var b=[],c=f.data("options");if(c.firstItemEmpty&&b.push({value:"",title:"请选择",clearSelect:!0}),isArray(a))for(var d=0;d<a.length;d++){var e=a[d];b.push({value:e[0],title:e[1]+"",initSelected:!!e[2]})}else for(var g in a)b.push({value:g,title:a[g]+""});f.data("dataMapping",b)},g.triggerOnChange=function(){var a=f.data("options");if(!a.initOnChange&&f.data("firstOnChange"))return void f.data("firstOnChange",!1);var b=g.getVal();f.trigger("onComboChange",{value:b,text:g.getTxt()}),a.syncOnChange?a.onChange(b,f):setTimeout(function(){a.onChange(b,f)},0)},g.initUI=function(){var a=f.prev("div");UiCommon.makeWrap(f),a.hasClass("itcui_combo")&&a.remove();var b=f.attr("_name"),c=g.getVal()?" value='"+g.getVal()+"' ":"",d="<div class='itcui_combo remove-on-scroll bbox' style='position:relative;width:100%;'>";d+="<input class='valid-field' type='hidden' name='"+b+"' "+c+"/>",d+="<span class='cb_text'>"+g.getTxt()+"</span><span class='arrow_wrap'><b class='itcui_combo_arrow'></b></span>",d+="</div>",f.css("display","none").before(d),f.prev(".itcui_combo").click(function(a){a.stopPropagation(),g.displayDropdown(),window._dialogEmmbed&&_parent().$(".window-mask").click(function(){UiCommon.removeComboWrap()})})},g.displayDropdown=function(){UiCommon.removeComboWrap();var b=f.data("options"),c=b.fixWrapWidth?parseInt(b.wrapWidth):f.parent().width();c=Math.max(c,150);var d=b.highlight,e=b.delimiter,h=f.data("dataMapping");if(d)for(var i=new RegExp(e+".*?"+e),j=new RegExp(e,"g"),k=0;k<h.length;k++){var l=h[k];if(l._title)break;var m=l.title,n=m.match(i);if(n){"string"!=typeof n&&(n=n[0]);var o=n.replace(j,"");o='<span style="color:'+d+'">'+o+"</span>",l._title=m.replace(n,o)}}for(var p=f.data("selectedValues"),q={cbWidth:c,dialogEmmbed:window._dialogEmmbed,opts:b,dataMapping:h,selectedValues:p},k=0;k<h.length;k++)if(b.multiselect)for(var k=0;k<h.length;k++){var l=h[k];l.checked=!!p[h[k].value]}var r=_templates._comboDropDown;r||(r=template.compile(_templates.comboDropDown),_templates._comboDropDown=r);var s=r(q),t=a(s);if(f.attr("fixposition")){a("body").append(t);var u=f.prev().offset();t.css({top:parseInt(u.top)+f.prev().height()+2+"px",left:u.left})}else f.after(t);t.data("targetSelect",f),b.allowSearch&&g.bindSearchEvent(),g.bindDropDownEvents(t),UiCommon.moveToParent(t,f.prev(".itcui_combo"))},g.bindSearchEvent=function(){var b=a("#itc_combo_search");b.iInput("init"),b.parent().click(function(a){a.stopPropagation()}),b.keyup(function(b){var c=a(this),d=c.parents(".itcui_dropdown_menu"),e=c.val().toLowerCase();d.children(".itcui_dropdown_item").each(function(){var b=a(this),c=b.text().toLowerCase();if(c.indexOf(e)>=0){b.show(),coloredTxt=c.replace(e,"<span style='color:#f00'>"+e+"</span>");var d=b.find(".itcui_dropdown_text");0===d.length&&(d=b.find("label")),d.html(coloredTxt)}else b.hide()})}).focus()},g.bindDropDownEvents=function(b){var c=f.data("options");c.multiselect?(b.find("input").iCheck({checkboxClass:"icheckbox_flat-blue",radioClass:"iradio_flat-blue"}),b.on("ifChanged",".itcui_dropdown_checkbox",function(b){var c=a(this).parents(".itcui_dropdown_item"),d=c.parents("#itc_combo_wrap");g.doSelect(d.data("targetSelect"),+c.attr("data-index"))})):b.on("click",".itcui_dropdown_item",function(b){var d=a(this),e=d.parents("#itc_combo_wrap"),f=e.data("targetSelect"),h=+d.attr("data-index");c.multiselect||e.remove(),g.doSelect(f,h)})},g.doSelect=function(a,b){var c=a.data("options"),d=a.data("dataMapping"),e=d[b],h=f.data("selectedValues");if(f.data("firstOnChange",!1),e.clearSelect)h={};else if(c.multiselect)h[e.value]=!h[e.value];else{if(h[e.value])return;h={},h[e.value]=!0}f.data("selectedValues",h),g.updateText()},g.setVal=function(a){var b={},c=f.data("options");if(c.multiselect&&"string"==typeof a){for(var d={},e=a.split(","),h=0;h<e.length;h++)d[e[h]]=!0;a=d}if(null===a||void 0===a);else if("object"==typeof a){b=a;for(var i in a)a[i]&&(b[i]=!0)}else(a||0===a)&&(b[a+""]=!0);return f.data("selectedValues",b),g.updateText(),f},g.getVal=function(){var a=f.data("selectedValues");return a?UiCommon.joinKeys(a):""},g.setTxt=function(a){return f.prev("div").children(".cb_text").html(a),f},g.updateText=function(){f.prev("div").children(".cb_text").html(g.getTxt()),f.prev(".itcui_combo").find(".valid-field").val(g.getVal()),g.triggerOnChange()},g.selectAll=function(){var a=f.data("options"),b=f.data("dataMapping"),c=f.data("selectedValues");if(a.multiselect){for(var d=0;d<b.length;d++)c[b[d].value]=!0;g.updateText()}},g.getTxt=function(){for(var a=[],b=f.data("dataMapping")||{},c=f.data("selectedValues"),d=f.data("options"),e=new RegExp(d.delimiter,"g"),g=0;g<b.length;g++){var h=b[g];if(c[h.value]){var i=h.title;"string"==typeof i&&(i=i.replace(e,"")),a.push(i)}}return a.join(",")},g.loadData=function(a){return a?(g.doDataLoad(a),f):void 0},g.getData=function(){return f.data("dataMapping")};var h=null,i={getSelected:"getVal",getSelectedText:"getTxt",select:"setVal",setValue:"setVal",setText:"setText"};return h=null==b?"init":i[b]?i[b]:b,h?g[h](c):void 0}})}(jQuery);var defValidMsg={minlength:"%f至少需要%l个字符",maxlength:"%f不能超过%l个字符",maxEnLength:"%f不能超过%l个字符",maxChLength:"%f不能超过%l个字符（中文算作2个字符）",email:"请输入合法的邮件地址",alphanumeric:"%f只能由字母和数字组成",regex:"%f格式错误",required:"%f不能为空",greaterThan:"%f不能早于%f2",equalTo:"两次密码输入必须一致",digits:"%f只能由0-9组成",number:"%f不是合法的数字",remote:"%f已经存在",range:"%f应该介于%l1和%l2之间",rangelength:"%f的长度应该介于%l1和%l2之间",enLength:"%f的长度应该是%l个字符",chLength:"%f的长度应该是%l个字符",greaterEqualThan:"%f必须晚于或者和%f2在同一天",min:"%f不能小于%l",max:"%f不能大于%l"},_toFixed=function(a,b){return"0"!=a&&a?new Number(a).toFixed(b):a};!function(a){a.fn.extend({iFormField:function(b,c){function d(a,b){return(/^(date|datetime)$/.test(a.dataType)||/^(date|datetime)$/.test(a.type))&&"string"==typeof b&&/^\-?[0-9]+$/.test(b)&&(b=parseInt(b)),"date"==a.dataType||"date"==a.type&&"string"!=typeof b?(b=FW.long2date(b),a.dataType="date"):("datetime"==a.dataType||"datetime"==a.type&&"string"!=typeof b)&&(b=FW.long2time(b),a.dataType="datetime"),b}var e=function(a){return a||0===a},f=this;f.text=function(b,c){var d=b,f=!1;return{init:function(){f||(b.options&&a("#"+d._id).iInput("init",b.options),UiCommon.onlyNumKeyDown(b,a("#"+d._id)),f=!0)},getVal:function(b){return a("#"+d._id).val()},setVal:function(b){a("#"+d._id).val(e(b)?b:"")},getText:function(){return FW.specialchars(a("#"+d._id).val())}}},f.textarea=function(){var c=b;return{getVal:function(b){return a("#"+c._id).val()},setVal:function(b){a("#"+c._id).val(e(b)?b:"")},getText:function(){var b=a("#"+c._id).val();return b&&(b=FW.specialchars(b).replace(/\n/g,"<br/>")),b}}},f.date=function(b,c){var e=c,g=b,h=a(f),i=!1,j=null,k={init:function(){if(!i){var c=h.find(".itc_dtp_wrap"),d=c.attr("dtptype"),f=g.options||{};f.language="ch",e.format||("date"==d?(f.format="yyyy-mm-dd",f.minView=2):f.format="yyyy-mm-dd hh:ii"),b.rules&&c.addClass("valid-field-wrap"),c.ITCUI_LazyLoadPicker(null,f),i=!0,j&&a("#"+g._id).val(FW.specialchars(j))}},setVal:function(b){j=d(g,b),i&&a("#"+g._id).val(FW.specialchars(j))},getText:function(){return i?a("#"+g._id).val():j},getVal:function(){var b=i?a("#"+g._id).val():j;return"date"==g.dataType?FW.date2long(b):"datetime"==g.dataType?FW.time2long(b):b},isInit:function(){return i},onBeginEdit:function(){k.init()}};return k},f.datetime=f.date,f.combobox=function(b,c){var d=b,e=a("#"+d._id),f=!1,g=d.options||{},h={
init:function(){f||(g.data=d.data||g.data,e.on("onComboChange",function(b,c){var e=c.text;d.userFormatter&&(e=d.formatter(h.getVal(),e)),a("#readonly_"+d._id).html(e)}),e.ITCUI_ComboBox(null,g),"enum"==d.dataType&&d.enumCat&&FW.loadComboEnum(d._id,d.enumCat,d.value),f=!0)},getVal:function(){return e.iCombo("getVal")},setVal:function(a,b){e.iCombo("setVal",a)},getText:function(){return e.iCombo("getTxt")},isInit:function(){return f},onBeginEdit:function(){}};return h},f.checkbox=function(b,c){var d=b,e=a(f),g=!1,h=null,i={init:function(){e.find(".autoform_cb").iCheck({checkboxClass:"icheckbox_flat-blue",radioClass:"iradio_flat-blue"}),g=!0},onBeginEdit:function(){g||(i.init(),null!==h&&i.setVal(h))},setVal:function(c,f){if(g){e.find("input[name='"+d._name+"']").iCheck("uncheck");for(var i="string"==typeof c?c.split(/,|，/):[c],j=0;j<i.length;j++)a("#"+b._id+"_"+i[j]).iCheck("check")}else h=c},getVal:function(){return i.getValOrText(!0)},getText:function(){return i.getValOrText()},getValOrText:function(b){var c=d.data||d.options.data;isArray(c)||(c=UiCommon.objData2Array(c));var e=[],f={};if(!g&&h){h+="";for(var i=h.split(/,|，/),j=0;j<i.length;j++)f[i[j]]=!0}for(var j=0;j<c.length;j++)g?a("#"+d._id+"_"+c[j][0]).parent().hasClass("checked")&&e.push(c[j][b?0:1]):f[c[j][0]]&&e.push(c[j][b?0:1]);return e.join(",")},isInit:function(){return g}};return i},f.radio=f.checkbox,f.label=function(b,c){var e=b,g=(a(f),null);return{init:function(){e.value&&(g=e.value)},setVal:function(b){g=b,b=d(e,b),e.noEscape||(b=FW.deepSpecialchars(b)),b=e.formatter(b),b+="",b.length||(b+=" "),a("#"+e._id).html((b+"").replace(/\n/g,"<br/>"))},getVal:function(){return g},getText:function(){return a.trim(a("#"+e._id).html())}}},f.hidden=function(b,c){var d=b;return{setVal:function(b){a("#"+d._id).val(b)},getVal:function(){return a("#"+d._id).val()}}},f.fileupload=function(b,c){var d=b,e=a("#"+d._id),f=!1;return{init:function(){e.iUpload("init",d.options),f=!0},setVal:function(a){e.ITCUI_FileUpload("setInitList",a)},getVal:function(){return e.iUpload("getVal")},isInit:function(){return f}}},f.userdefine=function(a,b){var c=a;return{init:function(){c.render&&"function"==typeof c.render&&c.render(c._id)},setVal:function(a){c.setValue&&"function"==typeof c.setValue&&c.setValue(a,c._id)},getVal:function(){var a=null;return c.getValue&&"function"==typeof c.getValue&&(a=c.getValue(c._id)),a},getText:function(){}}},f["switch"]=function(b,c){var d=b,e=a("#"+d._id);return{init:function(){e.bootstrapSwitch()},setVal:function(a){a===d.valueMapping[0]&&e.bootstrapSwitch("state",!0)},getVal:function(){var b=d.valueMapping;return a("#"+d._id).bootstrapSwitch("state")?b[0]:b[2]},getText:function(){}}},f.richtext=function(b,c){var d=b,e=(a("#"+d._id),!1),f="",g={init:function(){e||(CKEDITOR.replace(d._id),CKEDITOR.instances[d._id].on("instanceReady",function(b){if(e=!0,f){var c=a("#"+d._id).parents(".autoform"),g={};g[d.id]=f,c.iForm("setVal",g)}}))},setVal:function(a){CKEDITOR&&CKEDITOR.instances[d._id]&&e?CKEDITOR.instances[d._id].setData(a):f=a},getVal:function(){return CKEDITOR&&CKEDITOR.instances[d._id]?CKEDITOR.instances[d._id].getData():f},getText:function(){return CKEDITOR&&CKEDITOR.instances[d._id]?CKEDITOR.instances[d._id].getData():f}};return g};var g=f[b.type];return g?g(b,c):void 0}}),a.fn.extend({iForm:function(b,c){function d(a){var b={};if(a&&isArray(a)){for(var c=0;c<a.length;c++)b[a[c]]=!0;return b}return"string"==typeof a?(b[a]=!0,b):a}var e=a(this),f=this,g={xsWidth:6,mdWidth:4,labelWidth:3,labelFixWidth:"120px",container:!1,validate:!1,fieldPrefix:"f_",namePrefix:"",addNamePrefixOn:"get",fixLabelWidth:!0,labelColon:!0,hideEmpty:!0,initAsReadonly:!1,autoPrecision:!0,defValidMsg:{},hideZeroValue:!1,inputXsWidth:12,inputMdWidth:12};f.init=function(b,c){var d,h,i,j=[];if(c){for(var d=0;d<c.length;d++)j.push(a.extend({},c[d]));c=j}b=b||{};for(h in b)g[h]=b[h];for(h in defValidMsg)g.defValidMsg[h]=g.defValidMsg[h]||defValidMsg[h];var k=template.compile(_templates.formElement),l={};if(!c||0==c.length)return void FW.debug("error:empty fields when init form");for(d=0;d<c.length;d++)if(i=a.extend({},c[d]),i&&!i.nouse){i.userFormatter=!!i.formatter,c[d]=a.extend({wrapXsWidth:g.xsWidth,wrapMdWidth:g.mdWidth,inputXsWidth:g.inputXsWidth,inputMdWidth:g.inputMdWidth,labelFixWidth:g.labelFixWidth,_name:i.name||i.id,_id:g.fieldPrefix+i.id,type:"text",formatter:function(a){return a},hideZeroValue:/(combobox|radio|checkbox)/.test(i.type)?!1:g.hideZeroValue,hideEmpty:g.hideEmpty},i),i=c[d],"switch"==i.type&&(i.valueMapping=i.valueMapping||["Y","开启","N","关闭"]),/textarea/.test(i.type)&&void 0===i.breakAll&&(i.breakAll=!0),/richtext/.test(i.type)&&(i.linebreak=!0,i.wrapXsWidth=12,i.wrapMdWidth=12);var m=i.labelFixWidth;("string"!=typeof m||m.indexOf("px")<0)&&(i.labelFixWidth+="px"),/\(元\)/.test(i.title)&&g.autoPrecision&&!i.precision&&(c[d].precision=2),0==d?i.lineStart=!0:i.linebreak&&(i.lineStart=!0,c[d-1].lineEnd=!0),"userdefine"==i.type?i.getHtml&&"function"==typeof i.getHtml&&(i.el='<div class="element-wrap col-xs-12 col-md-12">'+i.getHtml(i._id)+"</div>"):i.el=k({field:i,opts:g}),l[i.id]=i}c[c.length-1].lineEnd=!0,e.data("options",g);var n=f.render(g,c);e.html(n).addClass("bbox").addClass("autoform");var o={};e.data("fieldObjs",o);var p;for(d=0;d<c.length;d++)if(i=c[d],!i.nouse){var q=e.find("div[fieldid='"+i.id+"']"),r=q.find(".element-wrap");q.addClass(g.initAsReadonly?"readonly":"edit"),p=a(r).iFormField(i,g),p.fieldWrap=q,p.fieldOption=i,o[i.id]=p,p&&!g.initAsReadonly?(p.init&&p.init(),i.render&&"function"==typeof i.render&&i.render(i._id)):"combobox"==i.type&&p.init()}for(e.data("mapping",l),d=0;d<c.length;d++)if(i=c[d],!i.nouse){if(void 0!==i.value){var s={};s[i.id]=i.value,f.setVal(s)}else o[i.id].fieldWrap.addClass("empty-hide");g.initAsReadonly&&o[i.id].fieldWrap.find("input,textarea").addClass("ignore")}if(g.validate){var t={},u={};for(d=0;d<c.length;d++)if(i=c[d],i.rules&&(!i.type||/(text|textarea|date|datetime|combobox)/.test(i.type))){t[i._name]={},u[i._name]={};for(var h in i.rules){var v=i.rules;t[i._name][h]=v[h],u[i._name][h]=UiCommon.replaceValidMsgForm(h,i,g,l)}}e.validate({rules:t,messages:u,errorPlacement:g.errorPlacement||UiCommon.addValidStyle,success:g.validSuccess||ITC_ValidSucc1,onkeyup:!1,ignore:".ignore"})}return e},f.render=function(a,b){var c=template.compile(_templates.formField),d={fields:b,opts:a};return c(d)},f.getVal=function(a){var b=e.data("fieldObjs"),c={};"string"==typeof a?c[a]=!0:c=b;var d={},f=e.data("options");for(var g in c){var h=b[g];if(h){var i=h.getVal(),j=h.fieldOption,k=j._name;("get"===f.addNamePrefixOn||"both"===f.addNamePrefixOn)&&(k=f.namePrefix+k),d[k]=i}}return"string"==typeof a?d[a]:d},f.setVal=function(a){var b=e.data("fieldObjs");for(var c in a){var d=a[c],g=b[c];if(g){var h=g.fieldOption;d&&"string"==typeof d&&(d=d.replace("BRBR","\n")),h.precision&&(d=_toFixed(d,h.precision)),g.setVal(d),/(fileupload|hidden|combobox)/.test(h.type)||f.setFieldText(g),f.doEmptyHide(g,d)}}return e},f.doEmptyHide=function(a,b){var c=a.fieldOption;b||!c.hideEmpty||"number"==typeof b&&!c.hideZeroValue?a.fieldWrap.removeClass("empty-hide"):a.fieldWrap.addClass("empty-hide")},f.setFieldText=function(b){var c=b.fieldOption,d=c.type,e=b.getText(),f=a("#readonly_"+c._id);"label"!=d&&c.userFormatter&&(e=c.formatter(FW.deepSpecialchars(b.getVal()),e)),f.html(e)},f.beginEdit=function(a){var b=e.data("fieldObjs");a=d(a||b);for(var c in a){var f=b[c];if(f){var g=f.fieldOption,h=f.fieldWrap;"hidden"!=g.type&&(f.onBeginEdit&&f.onBeginEdit(),"fileupload"!=g.type?h.addClass("edit").removeClass("readonly"):h.addClass("upload-edit").removeClass("upload-readonly"),h.hasClass("user-hide")||h.find("input,textarea").removeClass("ignore"))}}return e},f.endEdit=function(b){var c=e.data("fieldObjs");b=d(b||c);for(var g in b){var h=c[g];if(h){var i=h.fieldOption,j=h.fieldWrap;"hidden"!=i.type&&(h.onEndEdit&&h.onEndEdit(),"fileupload"!=i.type?(j.removeClass("edit").addClass("readonly"),a("#readonly_"+i._id).html(h.getText())):j.removeClass("upload-edit").addClass("upload-readonly"),f.doEmptyHide(h,h.getVal()),j.find("input,textarea").addClass("ignore"))}}return e},f.setFullVal=function(a){var b=e.data("fieldObjs");for(var c in b)void 0===a[c]&&(a[c]=null);return f.setVal(a)},f.hide=function(a){return f.hideOrShow(a,!1),e},f.show=function(a){return f.hideOrShow(a,!0),e},f.hideOrShow=function(a,b){a=d(a||c);var c=e.data("fieldObjs");for(var f in a){var g=c[f];if(g){var h=g.fieldWrap;b?(h.removeClass("user-hide"),h.hasClass("edit")&&h.find("input,textarea").removeClass("ignore")):(g.fieldWrap.addClass("user-hide"),h.find("input,textarea").addClass("ignore"))}}};var h={getdata:"getVal",loaddata:"setVal",beginedit:"beginEdit",readonly:"endEdit"};return"object"==typeof b?f.init(b,c):("string"==typeof h[b]&&(b=h[b]),"init"==b?f.init(c.options,c.fields):e.data("fieldObjs")?f[b](c):"getVal"==b?{}:e)}})}(jQuery),window.itcTagListBinded=!1,function(a){a.fn.extend({iTags:function(b,c){function d(a){var b=a.data("options");g(b),a.html(m(b))}function e(){return Math.random().toString(36).substr(2)}function f(a){var b=(new Date).getTime()%1e5;return a&&(b+=a),"item_"+b+"_"+e()}function g(a){for(var b=a.data,c=0;c<b.length;c++){var d=b[c];d.id||(d.id=f(c)),d.klass||(d.klass=a.klass)}return b}function h(a,b){for(var c=[],d=b.data("idMap"),e=0;e<a.length;e++){var f=a[e];f.id&&d[f.id]||c.push(f)}return c}function i(a,b){for(var c=b.data("options").data,e=b.data("idMap"),f=null,g=0;g<c.length;g++){var h=c[g];if(h.id===a){f=g;break}}null!==f&&(c.splice(f,1),delete e[a]),d(b)}function j(a,b){for(var c=b.data("idMap"),d=0;d<a.length;d++)c[a[d].id]=!0}var k=this,l=a(this),m=template.compile(_templates.tagList);return k.init=function(b){b=b||{},b.data&&isArray(b.data)||(FW.debug("Should specify parameter <data> for taglist"),b.data=[]),b.width=b.width||100,b.klass=b.klass||"label-primary";var c="taglist-"+e();l.data("options",b).addClass("taglist").addClass(c);var f=document.createElement("style");f.type="text/css",f.innerHTML="."+c+" .tag-item {width:"+b.width+"px}",document.getElementsByTagName("head")[0].appendChild(f),d(l),window.itcTagListBinded||(a("body").on("click",".taglist .btn-close",function(b){var c=a(b.currentTarget),d=c.parents(".tag-item"),e=c.parents(".taglist"),f=d.attr("data-id");i(f,e)}),window.itcTagListBinded=!0),l.data("inited",!0),l.data("idMap",{}),j(b.data,l)},k.setVal=function(a){l.data("options").data=a,l.data("idMap",{}),d(l)},k.getVal=function(a){return l.data("options").data},k.beginEdit=function(){l.removeClass("readonly")},k.endEdit=function(){l.addClass("readonly")},k.append=function(a){isArray(a)||(a=[a]),a=h(a,l);var b=l.data("options");b.data=b.data.concat(a),d(l),j(a,l)},k.remove=function(a){i(a,l)},"function"==typeof k[b]?"init"===b||l.data("inited")?k[b](c):null:void 0}})}(jQuery);var _templates={};_templates.pureTable='<table class="itcui_table" cellspacing="0"><tr style="height:24px">{{each fields as value}}{{if !value.hidden}}<th {{if value.width}}width="{{value.width}}"{{/if}}>{{if value.fixed}}<div width="{{value.width}}">{{/if}}{{value.title}}{{if value.fixed}}</div>{{/if}}</th>{{/if}}{{/each}}</tr>{{each rows as row}}<tr>   {{each row as col}}   <td>{{if col.width}}<div width="{{col.width}}">{{/if}}{{col.val}}{{if col.width}}</div>{{/if}}</td>   {{/each}}</tr>{{/each}}</table>',_templates.formField='{{each fields as field}}{{if field}}{{if field.lineStart}}<div class="row">{{/if}}{{if !field.nouse}}<div class="form-fixfield col-xs-{{field.wrapXsWidth}} col-md-{{field.wrapMdWidth}} type-{{field.type}}" fieldid="{{field.id}}" style="padding-left:{{field.labelFixWidth}}"><div style="width:{{field.labelFixWidth}}" class="ctrl-label">{{if field.rules && field.rules.required && field.type!=\'label\'}}<span class="form-required">*</span>{{/if}}{{field.title}}{{if field.helpMsg}}<span class="icon-form-help" title="{{field.helpMsg}}"></span>{{/if}}{{if opts.labelColon}}：{{/if}}</div><div>{{#field.el}}</div></div>{{/if}}{{if field.lineEnd}}</div>{{/if}}{{/if}}{{/each}}',_templates.formElement='<div class="element-wrap col-xs-{{field.inputXsWidth}} col-md-{{field.inputMdWidth}}" {{if field.type==\'switch\'}}style="padding-top:2px"{{/if}}>    {{if field.type==\'text\'}}       <div class="input-group-sm">           <input type="{{if field.dataType==\'password\'}}password{{else}}text{{/if}}" class="form-control" id="{{field._id}}" name="{{field._name}}"/>       </div>    {{else if field.type==\'textarea\'}}       <textarea class="form-control" style="height:{{if field.height}}{{field.height}}{{else}}80{{/if}}px" id="{{field._id}}" name="{{field._name}}"></textarea>    {{else if field.type==\'checkbox\' || field.type==\'radio\'}}       {{each field.data as row}}       <div class="pull-left">       <input class="autoform_cb" type="{{field.type}}" id="{{field._id}}_{{row[0]}}" name="{{field._name}}" value="{{row[1]}}"{{if row[2]}} checked{{/if}}/>       <label class="pure-label" style="margin-right:6px">{{row[1]}}</label>       </div>       {{/each}}    {{else if field.type==\'combobox\'}}       <select style="width:100%" id="{{field._id}}" _name="{{field._name}}"></select>    {{else if field.type==\'label\'}}       <span class="pure-label {{if field.breakAll}}pl-breakall{{else}}pl-ellipsis{{/if}}" id="{{field._id}}"></span>    {{else if field.type==\'date\' || field.type==\'datetime\'}}       <div class="itc_dtp_wrap" style="width:100%" input-name="{{field._name}}" input-id="{{field._id}}" dtptype="{{field.type}}"></div>    {{else if field.type==\'fileupload\'}}       <div class="itc_form_upload" id="{{field._id}}"></div>    {{else if field.type ==\'combotree\'}}       <select id="{{field._id}}" style="width:100%" treewidth="{{field.options.treeWidth}}" treeheight="{{field.options.treeHeight}}"></select>    {{else if field.type ==\'switch\'}}       <input type="checkbox" id="{{field._id}}" {{if field.value===field.valueMapping[0]}}checked{{/if}} data-size="mini" data-on-text="{{field.valueMapping[1]}}" data-off-text="{{field.valueMapping[3]}}"/>    {{else if field.type ==\'hidden\'}}       <input class="ignore"  id="{{field._id}}" name="{{field._name}}" type="hidden"/>    {{else if field.type ==\'richtext\'}}        <textarea style="height:{{if field.height}}{{field.height}}{{else}}80{{/if}}px" id="{{field._id}}" name="{{field._name}}"></textarea>    {{/if}}</div>{{if field.type!=\'fileupload\'}}<div class="readonly-wrap col-xs-12 col-md-12"><span id="readonly_{{field._id}}" class="pure-label {{if field.breakAll}}pl-breakall{{else}}pl-ellipsis{{/if}}" title="{{field.value}}">{{field.value}}</span></div>{{/if}}',_templates.comboDropDown='<div id="itc_combo_wrap" class="itcui_dropdown_menu bbox" style="padding-top:6px;padding-bottom:6px;max-height:250px;overflow-y:auto;width:{{cbWidth}}px;" >{{if opts.allowSearch}}<div style="overflow:hidden;padding:2px"><div class="input-group input-group-sm"><input type="text" id="itc_combo_search" placeholder="{{opts.sbPlaceHolder}}" style="width:100%"/></div></div>{{/if}}{{each dataMapping as item index}}{{if !opts.multiselect}}<div class="itcui_dropdown_item" data-value="{{item.value}}" data-index="{{index}}" {{if item.clearSelect}}data-clear=1{{/if}}><span class="itcui_dropdown_text">{{if item._title}}{{#item._title}}{{else}}{{item.title}}{{/if}}</span></div>{{else}}<div id="itcui_combo_item_{{index}}" class="itcui_dropdown_item multi" style="width:100%" data-value="{{item.value}}" data-index="{{index}}"><input id="itcui_combo_chkbox_{{index}}" class="itcui_dropdown_checkbox" type="checkbox" {{if item.checked}}checked{{/if}}><label for="itcui_combo_chkbox_{{index}}">{{if item._title}}{{item._title}}{{else}}{{item.title}}{{/if}}</label></div>{{/if}}{{/each}}</div>',_templates.tagList='{{each data as item}}<div data-id="{{item.id}}" class="tag-item {{item.klass}}">    <span>{{item.title}}</span>    {{if !item.readonly}}    <i class="btn-close"></i>    {{/if}}</div>{{/each}}';var ajaxCounter=0,lastAjaxTs=-1,chkAjaxTime=0,ajaxTimerId=-1,firstAjaxStart=-1;FW.showMask=function(){_parent().$("#itc_msk").remove();var a=_parent().$("#mainframe_content"),b="<div id='itc_msk'><span style='vertical-align:middle'><span class='loading-juhua'></span></span></div>";a.append(b),FW.adjustMask()},FW.removeMask=function(){$("body").trigger("loadingMaskRemoved"),_parent().$("#itc_msk").fadeOut("normal",function(){_parent().$("#itc_msk").remove()})},FW.adjustMask=function(){var a=_parent().$("#mainframe_content"),b=a.css("padding-left");if(b){var c=_parent().$("#itc_msk");if(c.length>0){var d=c.parent().width();c.css({left:b,width:d})}}},window._useLoadingMask?(FW.showMask(),ajaxTimerId=setInterval(function(){var a=(new Date).getTime();-1!=firstAjaxStart&&a-firstAjaxStart>1e4&&(clearInterval(ajaxTimerId),FW.removeMask(),FW.debug("[dbg]AJAX请求10秒达到最大等待时间（是不是卡了或者报错了？），掩模层移除")),0==ajaxCounter&&(3==chkAjaxTime?(clearInterval(ajaxTimerId),FW.removeMask(),FW.debug("[dbg]所有ajax请求结束于"+a+"，掩模层移除")):chkAjaxTime+=1)},150)):_parent().$("#itc_msk").remove(),$(document).ajaxStart(function(){var a=(new Date).getTime();a-lastAjaxTs>3e3&&-1!=lastAjaxTs||(-1==firstAjaxStart&&(firstAjaxStart=a),lastAjaxTs=a,ajaxCounter+=1,chkAjaxTime=0)}),$(document).ajaxStop(function(){(new Date).getTime();ajaxCounter>0&&(ajaxCounter-=1)});var ITCUtil=ITCUtil||{};ITCUtil._currMenu=null,ITCUtil.createMenu=function(a,b,c){c=c||{},c.direction=c.direction||"right",c.menuAlign=c.menuAlign||"left",c.offsetFunc=c.offsetFunc||function(a){return $(a).offset()};var d=$(a),e=ITCUtil._createUlHtml(b,c);if(d.hasClass("dropdown")||d.find(".dropdown-toggle").length>0)d.append(e),ITCUtil._bindCheckEvent(a);else{if(!c.id)return;d.data("targetmenu",c.id),d.data("offsetfunc",c.offsetFunc),$("body").append(e),ITCUtil._bindCheckEvent("#"+c.id),d.click(function(a){a.stopPropagation();var b="#"+$(this).data("targetmenu"),c=$(b);if("none"==c.css("display")){c.css("display","block");var d=$(this).data("offsetfunc")(this);c.css({left:d.left,top:d.top+$(this).height()}),ITCUtil._currMenu=b}else c.css("display","none")}),$("body").click(function(){$(ITCUtil._currMenu).hide()})}},ITCUtil.getMenuCheckVal=function(a){return $("#"+a).find(".dropdown-checked").length>0},ITCUtil.getMenuSelectVal=function(a,b){return $(a).find(".dropdown-selected[group='"+b+"']").parents("li").attr("id")},ITCUtil._bindCheckEvent=function(a){$(a).find(".dropdown-selected,.dropdown-unselected").parent("a").click(function(a){var b=$(this);b.parents("ul").find(".dropdown-selected").removeClass("dropdown-selected"),b.find(".dropdown-unselected").addClass("dropdown-selected")}),$(a).find(".dropdown-checked,.dropdown-unchecked").parent("a").click(function(a){$(this).find(".dropdown-unchecked").toggleClass("dropdown-checked")})},ITCUtil._createUlHtml=function(a,b){if(isArray(a)){for(var c=b.id?" id='"+b.id+"'":"",d="<ul class='dropdown-menu' role='menu' "+c+">",e=!1,f=!1,g=0;g<a.length;g++){var h=a[g];(h.select||h.check)&&(e=!0),h.iconCls&&(f=!0)}for(var g=0;g<a.length;g++){var h=a[g],i=h.id?' id="'+h.id+'"':"";if("-"!=h.title){var j="left"==b.direction?"pull-left":"";d+=h.submenu?'<li class="dropdown-submenu '+j+'"'+i:"<li "+i,d+=">";var k="";if(e)if(h.select){var l=h.selected?"dropdown-unselected dropdown-selected":"dropdown-unselected",m=h.group?' group="'+h.group+'"':"";k='<span class="'+l+'" '+m+"></span>"}else if(h.check){var l=h.checked?"dropdown-unchecked dropdown-checked":"dropdown-unchecked";k='<span class="'+l+'"></span>'}else k='<span class="dropdown-holder"></span>';var n=h.onclick?'onclick="'+h.onclick+'"':"";d+="<a "+n+">"+k+h.title+"</a>",h.submenu&&(d+=ITCUtil._createUlHtml(h.submenu,b)),d+="</li>"}else d+='<li class="divider"></li>'}return d+="</ul>"}},ITCUtil.createBtn=function(a,b){if(b){var c=ITCUtil._cBasebtnHtm(b);return a?void $(a).addClass("btn-group-sm").html(c):c}},ITCUtil._cBasebtnHtm=function(a){a.style=a.style||"btn-default";var b=a.width?"width:"+a.width+"px;":"";b+=a.height?"height:"+a.height+"px;":"";var c=a.toggle?' data-toggle="button"':"",d=a.menu&&!a.split?"dropdown-toggle":"",e=a.menu&&!a.split?'data-toggle="dropdown"':"",f=a.menu&&!a.split?'<span class="caret" style="margin-left:4px"></span>':"",g=a.onclick?' onclick="'+a.onclick+'" ':"";return'<button onmouseup="javascript:this.blur();"" '+g+' type="button" class="'+d+" btn "+a.style+'" style="'+b+'" '+c+e+">"+a.title+f+"</button>"},ITCUtil.createBtnToolBar=function(a,b){if(null!=b&&isArray(b)){for(var c='<div class="btn-group btn-group-sm">',d=0;d<b.length;d++)if(!privMapping||!b.privilege||privMapping[b.privilege]){var e=b[d];e["break"]&&d>0&&(c+="</div>",c+='<div class="btn-group btn-group-sm">'),e.menu?e.split?c+=ITCUtil.createSpltMnuBtn(null,e):(c+='<div class="btn-group btn-group-sm">',c+=ITCUtil.createMnuBtn(null,e),c+="</div>"):c+=ITCUtil._cBasebtnHtm(e)}c+="</div>";var f=$(a);f.addClass("btn-toolbar").html(c),f.children().each(function(){var a=$(this);1==a.children().length&&a.children().first().removeClass("btn-group")}),f.find(".dropdown-menu").each(function(){ITCUtil._bindCheckEvent($(this))})}},ITCUtil.createSpltMnuBtn=function(a,b){b.split=!0;var c=1==b.menu.length?{}:b.menu[1],d=ITCUtil._cBasebtnHtm(b);if(d+='<div class="btn-group btn-group-sm">',d+='<button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" style="height:28px;padding-left:6px;padding-right:6px"><span class="caret"></span></button>',d+=ITCUtil._createUlHtml(b.menu[0],c),d+="</div>",!a)return d;var e=$(a);e.css("position")&&e.css({position:"relative"}),e.addClass("btn-group-sm btn-group").html(d),ITCUtil._bindCheckEvent(e)},ITCUtil.createMnuBtn=function(a,b){var c=1==b.menu.length?{}:b.menu[1],d=ITCUtil._cBasebtnHtm(b)+ITCUtil._createUlHtml(b.menu[0],c);if(!a)return d;var e=$(a);e.css("position")&&e.css({position:"relative"}),e.addClass("btn-group-sm").html(d),ITCUtil._bindCheckEvent(e)},$(document).ready(function(){$("button").on("mouseup",function(){$(this).blur()})}),+function(a){"use strict";var b=function(c,d){this.$element=a(c),this.options=a.extend({},b.DEFAULTS,d)};b.DEFAULTS={loadingText:"提交中..."},b.prototype.setState=function(a){var b="disabled",c=this.$element,d=c.is("input")?"val":"html",e=c.data();a+="Text",e.resetText||c.data("resetText",c[d]()),c[d](e[a]||this.options[a]),setTimeout(function(){"loadingText"==a?c.addClass(b).attr(b,b):c.removeClass(b).removeAttr(b)},0)},b.prototype.toggle=function(){var a=this.$element.closest('[data-toggle="buttons"]'),b=!0;if(a.length){var c=this.$element.find("input");"radio"===c.prop("type")&&(c.prop("checked")&&this.$element.hasClass("active")?b=!1:a.find(".active").removeClass("active")),b&&c.prop("checked",!this.$element.hasClass("active")).trigger("change")}b&&this.$element.toggleClass("active")};var c=a.fn.button;a.fn.button=function(c){return this.each(function(){var d=a(this),e=d.data("bs.button"),f="object"==typeof c&&c;e||d.data("bs.button",e=new b(this,f)),"toggle"==c?e.toggle():c&&e.setState(c)})},a.fn.button.Constructor=b,a.fn.button.noConflict=function(){return a.fn.button=c,this},a(document).on("click.bs.button.data-api","[data-toggle^=button]",function(b){var c=a(b.target);c.hasClass("btn")||(c=c.closest(".btn")),c.button("toggle"),b.preventDefault()})}(jQuery),+function(a){"use strict";function b(){a(d).remove(),a(e).each(function(b){var d=c(a(this));d.hasClass("open")&&(d.trigger(b=a.Event("hide.bs.dropdown")),b.isDefaultPrevented()||d.removeClass("open").trigger("hidden.bs.dropdown"))})}function c(b){var c=b.attr("data-target");c||(c=b.attr("href"),c=c&&/#/.test(c)&&c.replace(/.*(?=#[^\s]*$)/,""));var d=c&&a(c);return d&&d.length?d:b.parent()}var d=".dropdown-backdrop",e="[data-toggle=dropdown]",f=function(b){a(b).on("click.bs.dropdown",this.toggle)};f.prototype.toggle=function(d){var e=a(this);if(!e.is(".disabled, :disabled")){var f=c(e),g=f.hasClass("open");if(b(),!g){if("ontouchstart"in document.documentElement&&!f.closest(".navbar-nav").length&&a('<div class="dropdown-backdrop"/>').insertAfter(a(this)).on("click",b),f.trigger(d=a.Event("show.bs.dropdown")),d.isDefaultPrevented())return;f.toggleClass("open").trigger("shown.bs.dropdown"),e.focus()}return!1}},f.prototype.keydown=function(b){if(/(38|40|27)/.test(b.keyCode)){var d=a(this);if(b.preventDefault(),b.stopPropagation(),!d.is(".disabled, :disabled")){var f=c(d),g=f.hasClass("open");if(!g||g&&27==b.keyCode)return 27==b.which&&f.find(e).focus(),d.click();var h=a("[role=menu] li:not(.divider):visible a",f);if(h.length){var i=h.index(h.filter(":focus"));38==b.keyCode&&i>0&&i--,40==b.keyCode&&i<h.length-1&&i++,~i||(i=0),h.eq(i).focus()}}}};var g=a.fn.dropdown;a.fn.dropdown=function(b){return this.each(function(){var c=a(this),d=c.data("bs.dropdown");d||c.data("bs.dropdown",d=new f(this)),"string"==typeof b&&d[b].call(c)})},a.fn.dropdown.Constructor=f,a.fn.dropdown.noConflict=function(){return a.fn.dropdown=g,this},a(document).on("click.bs.dropdown.data-api",b).on("click.bs.dropdown.data-api",".dropdown form",function(a){a.stopPropagation()}).on("click.bs.dropdown.data-api",e,f.prototype.toggle).on("keydown.bs.dropdown.data-api",e+", [role=menu]",f.prototype.keydown)}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.tooltip"),f="object"==typeof b&&b;(e||"destroy"!=b)&&(e||d.data("bs.tooltip",e=new c(this,f)),"string"==typeof b&&e[b]())})}var c=function(a,b){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",a,b)};c.VERSION="3.2.0",c.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},c.prototype.init=function(b,c,d){this.enabled=!0,this.type=b,this.$element=a(c),this.options=this.getOptions(d),this.$viewport=this.options.viewport&&a(this.options.viewport.selector||this.options.viewport);for(var e=this.options.trigger.split(" "),f=e.length;f--;){var g=e[f];if("click"==g)this.$element.on("click."+this.type,this.options.selector,a.proxy(this.toggle,this));else if("manual"!=g){var h="hover"==g?"mouseenter":"focusin",i="hover"==g?"mouseleave":"focusout";this.$element.on(h+"."+this.type,this.options.selector,a.proxy(this.enter,this)),this.$element.on(i+"."+this.type,this.options.selector,a.proxy(this.leave,this))}}this.options.selector?this._options=a.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},c.prototype.getDefaults=function(){return c.DEFAULTS},c.prototype.getOptions=function(b){return b=a.extend({},this.getDefaults(),this.$element.data(),b),b.delay&&"number"==typeof b.delay&&(b.delay={show:b.delay,hide:b.delay}),b},c.prototype.getDelegateOptions=function(){var b={},c=this.getDefaults();return this._options&&a.each(this._options,function(a,d){c[a]!=d&&(b[a]=d)}),b},c.prototype.enter=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget).data("bs."+this.type);return c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c)),clearTimeout(c.timeout),c.hoverState="in",c.options.delay&&c.options.delay.show?void(c.timeout=setTimeout(function(){"in"==c.hoverState&&c.show()},c.options.delay.show)):c.show()},c.prototype.leave=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget).data("bs."+this.type);return c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c)),clearTimeout(c.timeout),c.hoverState="out",c.options.delay&&c.options.delay.hide?void(c.timeout=setTimeout(function(){"out"==c.hoverState&&c.hide()},c.options.delay.hide)):c.hide()},c.prototype.show=function(){var b=a.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(b);var c=a.contains(document.documentElement,this.$element[0]);if(b.isDefaultPrevented()||!c)return;var d=this,e=this.tip(),f=this.getUID(this.type);this.setContent(),e.attr("id",f),this.$element.attr("aria-describedby",f),this.options.animation&&e.addClass("fade");var g="function"==typeof this.options.placement?this.options.placement.call(this,e[0],this.$element[0]):this.options.placement,h=/\s?auto?\s?/i,i=h.test(g);i&&(g=g.replace(h,"")||"top"),e.detach().css({top:0,left:0,display:"block"}).addClass(g).data("bs."+this.type,this),this.options.container?e.appendTo(this.options.container):e.insertAfter(this.$element);var j=this.getPosition(),k=e[0].offsetWidth,l=e[0].offsetHeight;if(i){var m=g,n=this.$element.parent(),o=this.getPosition(n);g="bottom"==g&&j.top+j.height+l-o.scroll>o.height?"top":"top"==g&&j.top-o.scroll-l<0?"bottom":"right"==g&&j.right+k>o.width?"left":"left"==g&&j.left-k<o.left?"right":g,e.removeClass(m).addClass(g)}var p=this.getCalculatedOffset(g,j,k,l);this.applyPlacement(p,g);var q=function(){d.$element.trigger("shown.bs."+d.type),d.hoverState=null};a.support.transition&&this.$tip.hasClass("fade")?e.one("bsTransitionEnd",q).emulateTransitionEnd(150):q()}},c.prototype.applyPlacement=function(b,c){var d=this.tip(),e=d[0].offsetWidth,f=d[0].offsetHeight,g=parseInt(d.css("margin-top"),10),h=parseInt(d.css("margin-left"),10);isNaN(g)&&(g=0),isNaN(h)&&(h=0),b.top=b.top+g,b.left=b.left+h,a.offset.setOffset(d[0],a.extend({using:function(a){d.css({top:Math.round(a.top),left:Math.round(a.left)})}},b),0),d.addClass("in");var i=d[0].offsetWidth,j=d[0].offsetHeight;"top"==c&&j!=f&&(b.top=b.top+f-j);var k=this.getViewportAdjustedDelta(c,b,i,j);k.left?b.left+=k.left:b.top+=k.top;var l=k.left?2*k.left-e+i:2*k.top-f+j,m=k.left?"left":"top",n=k.left?"offsetWidth":"offsetHeight";d.offset(b),this.replaceArrow(l,d[0][n],m)},c.prototype.replaceArrow=function(a,b,c){this.arrow().css(c,a?50*(1-a/b)+"%":"")},c.prototype.setContent=function(){var a=this.tip(),b=this.getTitle();a.find(".tooltip-inner")[this.options.html?"html":"text"](b),a.removeClass("fade in top bottom left right")},c.prototype.hide=function(){function b(){"in"!=c.hoverState&&d.detach(),c.$element.trigger("hidden.bs."+c.type)}var c=this,d=this.tip(),e=a.Event("hide.bs."+this.type);return this.$element.removeAttr("aria-describedby"),this.$element.trigger(e),e.isDefaultPrevented()?void 0:(d.removeClass("in"),a.support.transition&&this.$tip.hasClass("fade")?d.one("bsTransitionEnd",b).emulateTransitionEnd(150):b(),this.hoverState=null,this)},c.prototype.fixTitle=function(){var a=this.$element;(a.attr("title")||"string"!=typeof a.attr("data-original-title"))&&a.attr("data-original-title",a.attr("title")||"").attr("title","")},c.prototype.hasContent=function(){return this.getTitle()},c.prototype.getPosition=function(b){b=b||this.$element;var c=b[0],d="BODY"==c.tagName;return a.extend({},"function"==typeof c.getBoundingClientRect?c.getBoundingClientRect():null,{scroll:d?document.documentElement.scrollTop||document.body.scrollTop:b.scrollTop(),width:d?a(window).width():b.outerWidth(),height:d?a(window).height():b.outerHeight()},d?{top:0,left:0}:b.offset())},c.prototype.getCalculatedOffset=function(a,b,c,d){return"bottom"==a?{top:b.top+b.height,left:b.left+b.width/2-c/2}:"top"==a?{top:b.top-d,left:b.left+b.width/2-c/2}:"left"==a?{top:b.top+b.height/2-d/2,left:b.left-c}:{top:b.top+b.height/2-d/2,left:b.left+b.width}},c.prototype.getViewportAdjustedDelta=function(a,b,c,d){var e={top:0,left:0};if(!this.$viewport)return e;var f=this.options.viewport&&this.options.viewport.padding||0,g=this.getPosition(this.$viewport);if(/right|left/.test(a)){var h=b.top-f-g.scroll,i=b.top+f-g.scroll+d;h<g.top?e.top=g.top-h:i>g.top+g.height&&(e.top=g.top+g.height-i)}else{var j=b.left-f,k=b.left+f+c;j<g.left?e.left=g.left-j:k>g.width&&(e.left=g.left+g.width-k)}return e},c.prototype.getTitle=function(){var a,b=this.$element,c=this.options;return a=b.attr("data-original-title")||("function"==typeof c.title?c.title.call(b[0]):c.title)},c.prototype.getUID=function(a){do a+=~~(1e6*Math.random());while(document.getElementById(a));
return a},c.prototype.tip=function(){return this.$tip=this.$tip||a(this.options.template)},c.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},c.prototype.validate=function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},c.prototype.enable=function(){this.enabled=!0},c.prototype.disable=function(){this.enabled=!1},c.prototype.toggleEnabled=function(){this.enabled=!this.enabled},c.prototype.toggle=function(b){var c=this;b&&(c=a(b.currentTarget).data("bs."+this.type),c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c))),c.tip().hasClass("in")?c.leave(c):c.enter(c)},c.prototype.destroy=function(){clearTimeout(this.timeout),this.hide().$element.off("."+this.type).removeData("bs."+this.type)};var d=a.fn.tooltip;a.fn.tooltip=b,a.fn.tooltip.Constructor=c,a.fn.tooltip.noConflict=function(){return a.fn.tooltip=d,this}}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.popover"),f="object"==typeof b&&b;(e||"destroy"!=b)&&(e||d.data("bs.popover",e=new c(this,f)),"string"==typeof b&&e[b]())})}var c=function(a,b){this.init("popover",a,b)};if(!a.fn.tooltip)throw new Error("Popover requires tooltip.js");c.VERSION="3.2.0",c.DEFAULTS=a.extend({},a.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),c.prototype=a.extend({},a.fn.tooltip.Constructor.prototype),c.prototype.constructor=c,c.prototype.getDefaults=function(){return c.DEFAULTS},c.prototype.setContent=function(){var a=this.tip(),b=this.getTitle(),c=this.getContent();a.find(".popover-title")[this.options.html?"html":"text"](b),a.find(".popover-content").empty()[this.options.html?"string"==typeof c?"html":"append":"text"](c),a.removeClass("fade top bottom left right in"),a.find(".popover-title").html()||a.find(".popover-title").hide()},c.prototype.hasContent=function(){return this.getTitle()||this.getContent()},c.prototype.getContent=function(){var a=this.$element,b=this.options;return a.attr("data-content")||("function"==typeof b.content?b.content.call(a[0]):b.content)},c.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")},c.prototype.tip=function(){return this.$tip||(this.$tip=a(this.options.template)),this.$tip};var d=a.fn.popover;a.fn.popover=b,a.fn.popover.Constructor=c,a.fn.popover.noConflict=function(){return a.fn.popover=d,this}}(jQuery),+function(a){"use strict";var b=function(b){this.element=a(b)};b.prototype.show=function(){var b=this.element,c=b.closest("ul:not(.dropdown-menu)"),d=b.data("target");if(d||(d=b.attr("href"),d=d&&d.replace(/.*(?=#[^\s]*$)/,"")),!b.parent("li").hasClass("active")){var e=c.find(".active:last a")[0],f=a.Event("show.bs.tab",{relatedTarget:e});if(b.trigger(f),!f.isDefaultPrevented()){var g=a(d);this.activate(b.parent("li"),c),this.activate(g,g.parent(),function(){b.trigger({type:"shown.bs.tab",relatedTarget:e})})}}},b.prototype.activate=function(b,c,d){function e(){f.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),b.addClass("active"),g?(b[0].offsetWidth,b.addClass("in")):b.removeClass("fade"),b.parent(".dropdown-menu")&&b.closest("li.dropdown").addClass("active"),d&&d()}var f=c.find("> .active"),g=d&&a.support.transition&&f.hasClass("fade");g?f.one(a.support.transition.end,e).emulateTransitionEnd(150):e(),f.removeClass("in")};var c=a.fn.tab;a.fn.tab=function(c){return this.each(function(){var d=a(this),e=d.data("bs.tab");e||d.data("bs.tab",e=new b(this)),"string"==typeof c&&e[c]()})},a.fn.tab.Constructor=b,a.fn.tab.noConflict=function(){return a.fn.tab=c,this},a(document).on("click.bs.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(b){b.preventDefault(),a(this).tab("show")})}(jQuery),!function(a){function b(){return new Date(Date.UTC.apply(Date,arguments))}var c=function(b,c){var f=this;this.element=a(b),this.language=c.language||this.element.data("date-language")||"en",this.language=this.language in d?this.language:"en",this.isRTL=d[this.language].rtl||!1,this.formatType=c.formatType||this.element.data("format-type")||"standard",this.format=e.parseFormat(c.format||this.element.data("date-format")||d[this.language].format||e.getDefaultFormat(this.formatType,"input"),this.formatType),this.isInline=!1,this.isVisible=!1,this.isInput=this.element.is("input"),this.bootcssVer=this.isInput?this.element.is(".form-control")?3:2:this.bootcssVer=this.element.is(".input-group")?3:2,this.component=this.element.is(".date")?3==this.bootcssVer?this.element.find(".input-group-addon .glyphicon-th, .input-group-addon .glyphicon-time, .input-group-addon .glyphicon-calendar").parent():this.element.find(".add-on .icon-th, .add-on .icon-time, .add-on .icon-calendar").parent():!1,this.componentReset=this.element.is(".date")?3==this.bootcssVer?this.element.find(".input-group-addon .glyphicon-remove").parent():this.element.find(".add-on .icon-remove").parent():!1,this.hasInput=this.component&&this.element.find("input").length,this.component&&0===this.component.length&&(this.component=!1),this.linkField=c.linkField||this.element.data("link-field")||!1,this.linkFormat=e.parseFormat(c.linkFormat||this.element.data("link-format")||e.getDefaultFormat(this.formatType,"link"),this.formatType),this.minuteStep=c.minuteStep||this.element.data("minute-step")||5,this.pickerPosition=c.pickerPosition||this.element.data("picker-position")||"bottom-right",this.showMeridian=c.showMeridian||this.element.data("show-meridian")||!1,this.initialDate=c.initialDate||new Date,this.beforeShowDay=c.beforeShowDay||function(){},this._attachEvents(),this.formatViewType="datetime","formatViewType"in c?this.formatViewType=c.formatViewType:"formatViewType"in this.element.data()&&(this.formatViewType=this.element.data("formatViewType")),this.minView=0,"minView"in c?this.minView=c.minView:"minView"in this.element.data()&&(this.minView=this.element.data("min-view")),this.minView=e.convertViewMode(this.minView),this.maxView=e.modes.length-1,"maxView"in c?this.maxView=c.maxView:"maxView"in this.element.data()&&(this.maxView=this.element.data("max-view")),this.maxView=e.convertViewMode(this.maxView),this.wheelViewModeNavigation=!1,"wheelViewModeNavigation"in c?this.wheelViewModeNavigation=c.wheelViewModeNavigation:"wheelViewModeNavigation"in this.element.data()&&(this.wheelViewModeNavigation=this.element.data("view-mode-wheel-navigation")),this.wheelViewModeNavigationInverseDirection=!1,"wheelViewModeNavigationInverseDirection"in c?this.wheelViewModeNavigationInverseDirection=c.wheelViewModeNavigationInverseDirection:"wheelViewModeNavigationInverseDirection"in this.element.data()&&(this.wheelViewModeNavigationInverseDirection=this.element.data("view-mode-wheel-navigation-inverse-dir")),this.wheelViewModeNavigationDelay=100,"wheelViewModeNavigationDelay"in c?this.wheelViewModeNavigationDelay=c.wheelViewModeNavigationDelay:"wheelViewModeNavigationDelay"in this.element.data()&&(this.wheelViewModeNavigationDelay=this.element.data("view-mode-wheel-navigation-delay")),this.startViewMode=2,"startView"in c?this.startViewMode=c.startView:"startView"in this.element.data()&&(this.startViewMode=this.element.data("start-view")),this.startViewMode=e.convertViewMode(this.startViewMode),this.viewMode=this.startViewMode,this.viewSelect=this.minView,"viewSelect"in c?this.viewSelect=c.viewSelect:"viewSelect"in this.element.data()&&(this.viewSelect=this.element.data("view-select")),this.viewSelect=e.convertViewMode(this.viewSelect),this.forceParse=!0,"forceParse"in c?this.forceParse=c.forceParse:"dateForceParse"in this.element.data()&&(this.forceParse=this.element.data("date-force-parse"));var g=window._dialogEmmbed?_parent().$("body"):this.isInline?this.element:"body";this.picker=a(3==this.bootcssVer?e.templateV3:e.template).appendTo(g).on({click:a.proxy(this.click,this),mousedown:a.proxy(this.mousedown,this)}),this.wheelViewModeNavigation&&(a.fn.mousewheel?this.picker.on({mousewheel:a.proxy(this.mousewheel,this)}):console.log("Mouse Wheel event is not supported. Please include the jQuery Mouse Wheel plugin before enabling this option")),this.isInline?this.picker.addClass("datetimepicker-inline"):this.picker.addClass("datetimepicker-dropdown-"+this.pickerPosition+" dropdown-menu"),this.isRTL&&(this.picker.addClass("datetimepicker-rtl"),3==this.bootcssVer?this.picker.find(".prev span, .next span").toggleClass("glyphicon-arrow-left glyphicon-arrow-right"):this.picker.find(".prev i, .next i").toggleClass("icon-arrow-left icon-arrow-right")),a(document).on("mousedown",function(b){0===a(b.target).closest(".datetimepicker").length&&f.hide()}),window._dialogEmmbed&&_parent().$(".window-mask").on("mousedown",function(a){f.hide()}),this.autoclose=!1,"autoclose"in c?this.autoclose=c.autoclose:"dateAutoclose"in this.element.data()&&(this.autoclose=this.element.data("date-autoclose")),this.keyboardNavigation=!0,"keyboardNavigation"in c?this.keyboardNavigation=c.keyboardNavigation:"dateKeyboardNavigation"in this.element.data()&&(this.keyboardNavigation=this.element.data("date-keyboard-navigation")),this.todayBtn=c.todayBtn||this.element.data("date-today-btn")||!1,this.todayHighlight=c.todayHighlight||this.element.data("date-today-highlight")||!1,this.weekStart=(c.weekStart||this.element.data("date-weekstart")||d[this.language].weekStart||0)%7,this.weekEnd=(this.weekStart+6)%7,this.startDate=-(1/0),this.endDate=1/0,this.daysOfWeekDisabled=[],this.setStartDate(c.startDate||this.element.data("date-startdate")),this.setEndDate(c.endDate||this.element.data("date-enddate")),this.setDaysOfWeekDisabled(c.daysOfWeekDisabled||this.element.data("date-days-of-week-disabled")),this.fillDow(),this.fillMonths(),this.update(),this.showMode(),this.isInline&&this.show()};c.prototype={constructor:c,_events:[],_attachEvents:function(){this._detachEvents(),this.isInput?this._events=[[this.element,{focus:a.proxy(this.show,this),keyup:a.proxy(this.update,this),keydown:a.proxy(this.keydown,this)}]]:this.component&&this.hasInput?(this._events=[[this.element.find("input"),{focus:a.proxy(this.show,this),keyup:a.proxy(this.update,this),keydown:a.proxy(this.keydown,this)}],[this.component,{click:a.proxy(this.show,this)}]],this.componentReset&&this._events.push([this.componentReset,{click:a.proxy(this.reset,this)}])):this.element.is("div")?this.isInline=!0:this._events=[[this.element,{click:a.proxy(this.show,this)}]];for(var b,c,d=0;d<this._events.length;d++)b=this._events[d][0],c=this._events[d][1],b.on(c)},_detachEvents:function(){for(var a,b,c=0;c<this._events.length;c++)a=this._events[c][0],b=this._events[c][1],a.off(b);this._events=[]},show:function(b){this.picker.show(),this.height=this.component?this.component.outerHeight():this.element.outerHeight(),this.forceParse&&this.update(),this.place(),a(window).on("resize",a.proxy(this.place,this)),b&&(b.stopPropagation(),b.preventDefault()),this.isVisible=!0,this.element.trigger({type:"show",date:this.date})},hide:function(b){if(this.isVisible&&!this.isInline){this.picker.hide(),a(window).off("resize",this.place),this.viewMode=this.startViewMode,this.showMode(),this.isInput||a(document).off("mousedown",this.hide),this.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find("input").val())&&this.setValue(),this.isVisible=!1,this.element.trigger({type:"hide",date:this.date});var c=this.isInput&&this.element||this.hasInput&&this.element.find("input");c.hasClass("valid-field")&&c.valid()}},remove:function(){this._detachEvents(),this.picker.remove(),delete this.picker,delete this.element.data().datetimepicker},getDate:function(){var a=this.getUTCDate();return new Date(a.getTime()+6e4*a.getTimezoneOffset())},getUTCDate:function(){return this.date},setDate:function(a){this.setUTCDate(new Date(a.getTime()-6e4*a.getTimezoneOffset()))},setUTCDate:function(a){a>=this.startDate&&a<=this.endDate?(this.date=a,this.setValue(),this.viewDate=this.date,this.fill()):this.element.trigger({type:"outOfRange",date:a,startDate:this.startDate,endDate:this.endDate})},setFormat:function(a){this.format=e.parseFormat(a,this.formatType);var b;this.isInput?b=this.element:this.component&&(b=this.element.find("input")),b&&b.val()&&this.setValue()},setValue:function(){var b=this.getFormattedDate();this.isInput?this.element.val(b):(this.component&&this.element.find("input").val(b),this.element.data("date",b)),this.linkField&&a("#"+this.linkField).val(this.getFormattedDate(this.linkFormat))},getFormattedDate:function(a){return void 0==a&&(a=this.format),e.formatDate(this.date,a,this.language,this.formatType)},setStartDate:function(a){this.startDate=a||-(1/0),this.startDate!==-(1/0)&&(this.startDate=e.parseDate(this.startDate,this.format,this.language,this.formatType)),this.update(),this.updateNavArrows()},setEndDate:function(a){this.endDate=a||1/0,this.endDate!==1/0&&(this.endDate=e.parseDate(this.endDate,this.format,this.language,this.formatType)),this.update(),this.updateNavArrows()},setDaysOfWeekDisabled:function(b){this.daysOfWeekDisabled=b||[],a.isArray(this.daysOfWeekDisabled)||(this.daysOfWeekDisabled=this.daysOfWeekDisabled.split(/,\s*/)),this.daysOfWeekDisabled=a.map(this.daysOfWeekDisabled,function(a){return parseInt(a,10)}),this.update(),this.updateNavArrows()},place:function(){if(!this.isInline){var b=0;a("div").each(function(){var c=parseInt(a(this).css("zIndex"),10);c>b&&(b=c)});var c,d,e,f=window._dialogEmmbed?UiCommon.getMaskIndex()+10:b+10;if(this.component?(c=this.component.offset(),e=c.left,("bottom-left"==this.pickerPosition||"top-left"==this.pickerPosition)&&(e+=this.component.outerWidth()-this.picker.outerWidth())):(c=this.element.offset(),e=c.left),d="top-left"==this.pickerPosition||"top-right"==this.pickerPosition?c.top-this.picker.outerHeight():c.top+this.height,window._dialogEmmbed){var g=a("body"),h=UiCommon.getDialogOffset();d+=h.top+26-g.scrollTop(),e+=h.left-g.scrollLeft()}this.picker.css({top:d,left:e,zIndex:f})}},update:function(){var a,b=!1;arguments&&arguments.length&&("string"==typeof arguments[0]||arguments[0]instanceof Date)?(a=arguments[0],b=!0):(a=this.element.data("date")||(this.isInput?this.element.val():this.element.find("input").val())||this.initialDate,("string"==typeof a||a instanceof String)&&(a=a.replace(/^\s+|\s+$/g,""))),a||(a=new Date,b=!1),this.date=e.parseDate(a,this.format,this.language,this.formatType),b&&this.setValue(),this.date<this.startDate?this.viewDate=new Date(this.startDate):this.date>this.endDate?this.viewDate=new Date(this.endDate):this.viewDate=new Date(this.date),this.fill()},fillDow:function(){for(var a=this.weekStart,b="<tr>";a<this.weekStart+7;)b+='<th class="dow">'+d[this.language].daysMin[a++%7]+"</th>";b+="</tr>",this.picker.find(".datetimepicker-days thead").append(b)},fillMonths:function(){for(var a="",b=0;12>b;)a+='<span class="month">'+d[this.language].monthsShort[b++]+"月</span>";this.picker.find(".datetimepicker-months td").html(a)},fill:function(){if(null!=this.date&&null!=this.viewDate){var c=new Date(this.viewDate),f=c.getUTCFullYear(),g=c.getUTCMonth(),h=c.getUTCDate(),i=c.getUTCHours(),j=c.getUTCMinutes(),k=this.startDate!==-(1/0)?this.startDate.getUTCFullYear():-(1/0),l=this.startDate!==-(1/0)?this.startDate.getUTCMonth():-(1/0),m=this.endDate!==1/0?this.endDate.getUTCFullYear():1/0,n=this.endDate!==1/0?this.endDate.getUTCMonth():1/0,o=new b(this.date.getUTCFullYear(),this.date.getUTCMonth(),this.date.getUTCDate()).valueOf(),p=new Date;if(this.picker.find(".datetimepicker-days thead th:eq(1)").text(f+"年"+(g+1)+"月"),"time"==this.formatViewType){var q=i%12?i%12:12,r=(10>q?"0":"")+q,s=(10>j?"0":"")+j,t=d[this.language].meridiem[12>i?0:1];this.picker.find(".datetimepicker-hours thead th:eq(1)").text(r+":"+s+" "+t.toUpperCase()),this.picker.find(".datetimepicker-minutes thead th:eq(1)").text(r+":"+s+" "+t.toUpperCase())}else this.picker.find(".datetimepicker-hours thead th:eq(1)").text(f+"年"+(g+1)+"月"+h+"日"),this.picker.find(".datetimepicker-minutes thead th:eq(1)").text(f+"年"+(g+1)+"月"+h+"日");this.picker.find("tfoot th.today").text(d[this.language].today).toggle(this.todayBtn!==!1),this.updateNavArrows(),this.fillMonths();var u=b(f,g-1,28,0,0,0,0),v=e.getDaysInMonth(u.getUTCFullYear(),u.getUTCMonth());u.setUTCDate(v),u.setUTCDate(v-(u.getUTCDay()-this.weekStart+7)%7);var w=new Date(u);w.setUTCDate(w.getUTCDate()+42),w=w.valueOf();for(var x,y=[];u.valueOf()<w;){if(u.getUTCDay()==this.weekStart&&y.push("<tr>"),x="",u.getUTCFullYear()<f||u.getUTCFullYear()==f&&u.getUTCMonth()<g?x+=" old":(u.getUTCFullYear()>f||u.getUTCFullYear()==f&&u.getUTCMonth()>g)&&(x+=" new"),this.todayHighlight&&u.getUTCFullYear()==p.getFullYear()&&u.getUTCMonth()==p.getMonth()&&u.getUTCDate()==p.getDate()&&(x+=" today"),u.valueOf()==o&&(x+=" active"),(u.valueOf()+864e5<=this.startDate||u.valueOf()>this.endDate||-1!==a.inArray(u.getUTCDay(),this.daysOfWeekDisabled))&&(x+=" disabled"),this.beforeShowDay!==a.noop){var z=this.beforeShowDay(u);void 0===z?z={}:"boolean"==typeof z?z={enabled:z}:"string"==typeof z&&(z={classes:z}),z.enabled===!1&&(x+="disabled"),z.classes&&(x+=" "+z.classes),z.tooltip&&(tooltip=z.tooltip)}y.push('<td class="day'+x+'">'+u.getUTCDate()+"</td>"),u.getUTCDay()==this.weekEnd&&y.push("</tr>"),u.setUTCDate(u.getUTCDate()+1)}this.picker.find(".datetimepicker-days tbody").empty().append(y.join("")),y=[];for(var A="",B="",C="",D=0;24>D;D++){var E=b(f,g,h,D);x="",E.valueOf()+36e5<=this.startDate||E.valueOf()>this.endDate?x+=" disabled":i==D&&(x+=" active"),this.showMeridian&&2==d[this.language].meridiem.length?(B=12>D?d[this.language].meridiem[0]:d[this.language].meridiem[1],B!=C&&(""!=C&&y.push("</fieldset>"),y.push('<fieldset class="hour"><legend>'+B.toUpperCase()+"</legend>")),C=B,A=D%12?D%12:12,y.push('<span class="hour'+x+" hour_"+(12>D?"am":"pm")+'">'+A+"</span>"),23==D&&y.push("</fieldset>")):(A=D+":00",y.push('<span class="hour'+x+'">'+A+"</span>"))}this.picker.find(".datetimepicker-hours td").html(y.join("")),y=[],A="",B="",C="";for(var D=0;60>D;D+=this.minuteStep){var E=b(f,g,h,i,D,0);x="",E.valueOf()<this.startDate||E.valueOf()>this.endDate?x+=" disabled":Math.floor(j/this.minuteStep)==Math.floor(D/this.minuteStep)&&(x+=" active"),this.showMeridian&&2==d[this.language].meridiem.length?(B=12>i?d[this.language].meridiem[0]:d[this.language].meridiem[1],B!=C&&(""!=C&&y.push("</fieldset>"),y.push('<fieldset class="minute"><legend>'+B.toUpperCase()+"</legend>")),C=B,A=i%12?i%12:12,y.push('<span class="minute'+x+'">'+A+":"+(10>D?"0"+D:D)+"</span>"),59==D&&y.push("</fieldset>")):(A=D+":00",y.push('<span class="minute'+x+'">'+i+":"+(10>D?"0"+D:D)+"</span>"))}this.picker.find(".datetimepicker-minutes td").html(y.join(""));var F=this.date.getUTCFullYear(),G=this.picker.find(".datetimepicker-months").find("th:eq(1)").text(f).end().find("span").removeClass("active");F==f&&G.eq(this.date.getUTCMonth()).addClass("active"),(k>f||f>m)&&G.addClass("disabled"),f==k&&G.slice(0,l).addClass("disabled"),f==m&&G.slice(n+1).addClass("disabled"),y="",f=10*parseInt(f/10,10);var H=this.picker.find(".datetimepicker-years").find("th:eq(1)").text(f+"-"+(f+9)).end().find("td");f-=1;for(var D=-1;11>D;D++)y+='<span class="year'+(-1==D||10==D?" old":"")+(F==f?" active":"")+(k>f||f>m?" disabled":"")+'">'+f+"</span>",f+=1;H.html(y),this.place(),this.element.trigger({type:"dateFill",date:c})}},updateNavArrows:function(){var a=new Date(this.viewDate),b=a.getUTCFullYear(),c=a.getUTCMonth(),d=a.getUTCDate(),e=a.getUTCHours();switch(this.viewMode){case 0:this.startDate!==-(1/0)&&b<=this.startDate.getUTCFullYear()&&c<=this.startDate.getUTCMonth()&&d<=this.startDate.getUTCDate()&&e<=this.startDate.getUTCHours()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.endDate!==1/0&&b>=this.endDate.getUTCFullYear()&&c>=this.endDate.getUTCMonth()&&d>=this.endDate.getUTCDate()&&e>=this.endDate.getUTCHours()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 1:this.startDate!==-(1/0)&&b<=this.startDate.getUTCFullYear()&&c<=this.startDate.getUTCMonth()&&d<=this.startDate.getUTCDate()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.endDate!==1/0&&b>=this.endDate.getUTCFullYear()&&c>=this.endDate.getUTCMonth()&&d>=this.endDate.getUTCDate()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 2:this.startDate!==-(1/0)&&b<=this.startDate.getUTCFullYear()&&c<=this.startDate.getUTCMonth()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.endDate!==1/0&&b>=this.endDate.getUTCFullYear()&&c>=this.endDate.getUTCMonth()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 3:case 4:this.startDate!==-(1/0)&&b<=this.startDate.getUTCFullYear()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.endDate!==1/0&&b>=this.endDate.getUTCFullYear()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"})}},mousewheel:function(b){if(b.preventDefault(),b.stopPropagation(),!this.wheelPause){this.wheelPause=!0;var c=b.originalEvent,d=c.wheelDelta,e=d>0?1:0===d?0:-1;this.wheelViewModeNavigationInverseDirection&&(e=-e),this.showMode(e),setTimeout(a.proxy(function(){this.wheelPause=!1},this),this.wheelViewModeNavigationDelay)}},click:function(c){c.stopPropagation(),c.preventDefault();var d=a(c.target).closest("span, td, th, legend");if(1==d.length){if(d.is(".disabled"))return void this.element.trigger({type:"outOfRange",date:this.viewDate,startDate:this.startDate,endDate:this.endDate});switch(d[0].nodeName.toLowerCase()){case"th":switch(d[0].className){case"switch":this.showMode(1);break;case"prev":case"next":var f=e.modes[this.viewMode].navStep*("prev"==d[0].className?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveHour(this.viewDate,f);break;case 1:this.viewDate=this.moveDate(this.viewDate,f);break;case 2:this.viewDate=this.moveMonth(this.viewDate,f);break;case 3:case 4:this.viewDate=this.moveYear(this.viewDate,f)}this.fill();break;case"today":var g=new Date;g=b(g.getFullYear(),g.getMonth(),g.getDate(),g.getHours(),g.getMinutes(),g.getSeconds(),0),g<this.startDate?g=this.startDate:g>this.endDate&&(g=this.endDate),this.viewMode=this.startViewMode,this.showMode(0),this._setDate(g),this.fill(),this.autoclose&&this.hide()}break;case"span":if(!d.is(".disabled")){var h=this.viewDate.getUTCFullYear(),i=this.viewDate.getUTCMonth(),j=this.viewDate.getUTCDate(),k=this.viewDate.getUTCHours(),l=this.viewDate.getUTCMinutes(),m=this.viewDate.getUTCSeconds();if(d.is(".month")?(this.viewDate.setUTCDate(1),i=d.parent().find("span").index(d),j=this.viewDate.getUTCDate(),this.viewDate.setUTCMonth(i),this.element.trigger({type:"changeMonth",date:this.viewDate}),this.viewSelect>=3&&this._setDate(b(h,i,j,k,l,m,0))):d.is(".year")?(this.viewDate.setUTCDate(1),h=parseInt(d.text(),10)||0,this.viewDate.setUTCFullYear(h),this.element.trigger({type:"changeYear",date:this.viewDate}),this.viewSelect>=4&&this._setDate(b(h,i,j,k,l,m,0))):d.is(".hour")?(k=parseInt(d.text(),10)||0,(d.hasClass("hour_am")||d.hasClass("hour_pm"))&&(12==k&&d.hasClass("hour_am")?k=0:12!=k&&d.hasClass("hour_pm")&&(k+=12)),this.viewDate.setUTCHours(k),this.element.trigger({type:"changeHour",date:this.viewDate}),this.viewSelect>=1&&this._setDate(b(h,i,j,k,l,m,0))):d.is(".minute")&&(l=parseInt(d.text().substr(d.text().indexOf(":")+1),10)||0,this.viewDate.setUTCMinutes(l),this.element.trigger({type:"changeMinute",date:this.viewDate}),this.viewSelect>=0&&this._setDate(b(h,i,j,k,l,m,0))),0!=this.viewMode){var n=this.viewMode;this.showMode(-1),this.fill(),n==this.viewMode&&this.autoclose&&this.hide()}else this.fill(),this.autoclose&&this.hide()}break;case"td":if(d.is(".day")&&!d.is(".disabled")){var j=parseInt(d.text(),10)||1,h=this.viewDate.getUTCFullYear(),i=this.viewDate.getUTCMonth(),k=this.viewDate.getUTCHours(),l=this.viewDate.getUTCMinutes(),m=this.viewDate.getUTCSeconds();d.is(".old")?0===i?(i=11,h-=1):i-=1:d.is(".new")&&(11==i?(i=0,h+=1):i+=1),this.viewDate.setUTCFullYear(h),this.viewDate.setUTCMonth(i,j),this.element.trigger({type:"changeDay",date:this.viewDate}),this.viewSelect>=2&&this._setDate(b(h,i,j,k,l,m,0))}var n=this.viewMode;this.showMode(-1),this.fill(),n==this.viewMode&&this.autoclose&&this.hide()}}},_setDate:function(a,b){b&&"date"!=b||(this.date=a),b&&"view"!=b||(this.viewDate=a),this.fill(),this.setValue();var c;this.isInput?c=this.element:this.component&&(c=this.element.find("input")),c&&(c.change(),this.autoclose&&(!b||"date"==b)),this.element.trigger({type:"changeDate",date:this.date})},moveMinute:function(a,b){if(!b)return a;var c=new Date(a.valueOf());return c.setUTCMinutes(c.getUTCMinutes()+b*this.minuteStep),c},moveHour:function(a,b){if(!b)return a;var c=new Date(a.valueOf());return c.setUTCHours(c.getUTCHours()+b),c},moveDate:function(a,b){if(!b)return a;var c=new Date(a.valueOf());return c.setUTCDate(c.getUTCDate()+b),c},moveMonth:function(a,b){if(!b)return a;var c,d,e=new Date(a.valueOf()),f=e.getUTCDate(),g=e.getUTCMonth(),h=Math.abs(b);if(b=b>0?1:-1,1==h)d=-1==b?function(){return e.getUTCMonth()==g}:function(){return e.getUTCMonth()!=c},c=g+b,e.setUTCMonth(c),(0>c||c>11)&&(c=(c+12)%12);else{for(var i=0;h>i;i++)e=this.moveMonth(e,b);c=e.getUTCMonth(),e.setUTCDate(f),d=function(){return c!=e.getUTCMonth()}}for(;d();)e.setUTCDate(--f),e.setUTCMonth(c);return e},moveYear:function(a,b){return this.moveMonth(a,12*b)},dateWithinRange:function(a){return a>=this.startDate&&a<=this.endDate},keydown:function(a){if(this.picker.is(":not(:visible)"))return void(27==a.keyCode&&this.show());var b,c,d,e=!1;switch(a.keyCode){case 27:this.hide(),a.preventDefault();break;case 37:case 39:if(!this.keyboardNavigation)break;b=37==a.keyCode?-1:1,viewMode=this.viewMode,a.ctrlKey?viewMode+=2:a.shiftKey&&(viewMode+=1),4==viewMode?(c=this.moveYear(this.date,b),d=this.moveYear(this.viewDate,b)):3==viewMode?(c=this.moveMonth(this.date,b),d=this.moveMonth(this.viewDate,b)):2==viewMode?(c=this.moveDate(this.date,b),d=this.moveDate(this.viewDate,b)):1==viewMode?(c=this.moveHour(this.date,b),d=this.moveHour(this.viewDate,b)):0==viewMode&&(c=this.moveMinute(this.date,b),d=this.moveMinute(this.viewDate,b)),this.dateWithinRange(c)&&(this.date=c,this.viewDate=d,this.setValue(),this.update(),a.preventDefault(),e=!0);break;case 38:case 40:if(!this.keyboardNavigation)break;b=38==a.keyCode?-1:1,viewMode=this.viewMode,a.ctrlKey?viewMode+=2:a.shiftKey&&(viewMode+=1),4==viewMode?(c=this.moveYear(this.date,b),d=this.moveYear(this.viewDate,b)):3==viewMode?(c=this.moveMonth(this.date,b),d=this.moveMonth(this.viewDate,b)):2==viewMode?(c=this.moveDate(this.date,7*b),d=this.moveDate(this.viewDate,7*b)):1==viewMode?this.showMeridian?(c=this.moveHour(this.date,6*b),d=this.moveHour(this.viewDate,6*b)):(c=this.moveHour(this.date,4*b),d=this.moveHour(this.viewDate,4*b)):0==viewMode&&(c=this.moveMinute(this.date,4*b),d=this.moveMinute(this.viewDate,4*b)),this.dateWithinRange(c)&&(this.date=c,this.viewDate=d,this.setValue(),this.update(),a.preventDefault(),e=!0);break;case 13:if(0!=this.viewMode){var f=this.viewMode;this.showMode(-1),this.fill(),f==this.viewMode&&this.autoclose&&this.hide()}else this.fill(),this.autoclose&&this.hide();a.preventDefault();break;case 9:this.hide()}if(e){var g;this.isInput?g=this.element:this.component&&(g=this.element.find("input")),g&&g.change(),this.element.trigger({type:"changeDate",date:this.date})}},showMode:function(a){if(a){var b=Math.max(0,Math.min(e.modes.length-1,this.viewMode+a));b>=this.minView&&b<=this.maxView&&(this.element.trigger({type:"changeMode",date:this.viewDate,oldViewMode:this.viewMode,newViewMode:b}),this.viewMode=b)}this.picker.find(">div").hide().filter(".datetimepicker-"+e.modes[this.viewMode].clsName).css("display","block"),this.updateNavArrows()},reset:function(a){this._setDate(null,"date")}},a.fn.datetimepicker=function(b){var d=Array.apply(null,arguments);return d.shift(),this.each(function(){var e=a(this),f=e.data("datetimepicker"),g="object"==typeof b&&b;f||e.data("datetimepicker",f=new c(this,a.extend({},a.fn.datetimepicker.defaults,g))),"string"==typeof b&&"function"==typeof f[b]&&f[b].apply(f,d)})},a.fn.datetimepicker.defaults={},a.fn.datetimepicker.Constructor=c;var d=a.fn.datetimepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],meridiem:["am","pm"],suffix:["st","nd","rd","th"],today:"Today"},ch:{days:["星期日","星期一","星期二","星期三","星期四","星期五","星期六","星期日"],daysShort:["日","一","二","三","四","五","六","日"],daysMin:["日","一","二","三","四","五","六","日"],months:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],monthsShort:["一","二","三","四","五","六","七","八","九","十","十一","十二"],meridiem:["上午","下午"],suffix:["st","nd","rd","th"],today:"今天"}},e={modes:[{clsName:"minutes",navFnc:"Hours",navStep:1},{clsName:"hours",navFnc:"Date",navStep:1},{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(a){return a%4===0&&a%100!==0||a%400===0},getDaysInMonth:function(a,b){return[31,e.isLeapYear(a)?29:28,31,30,31,30,31,31,30,31,30,31][b]},getDefaultFormat:function(a,b){if("standard"==a)return"input"==b?"yyyy-mm-dd hh:ii":"yyyy-mm-dd hh:ii:ss";if("php"==a)return"input"==b?"Y-m-d H:i":"Y-m-d H:i:s";throw new Error("Invalid format type.")},validParts:function(a){if("standard"==a)return/hh?|HH?|p|P|ii?|ss?|dd?|DD?|mm?|MM?|yy(?:yy)?/g;if("php"==a)return/[dDjlNwzFmMnStyYaABgGhHis]/g;throw new Error("Invalid format type.")},nonpunctuation:/[^ -\/:-@\[-`{-~\t\n\rTZ]+/g,parseFormat:function(a,b){var c=a.replace(this.validParts(b),"\x00").split("\x00"),d=a.match(this.validParts(b));if(!c||!c.length||!d||0==d.length)throw new Error("Invalid date format.");return{separators:c,parts:d}},parseDate:function(e,f,g,h){if(e instanceof Date){var i=new Date(e.valueOf()-6e4*e.getTimezoneOffset());return i.setMilliseconds(0),i}if(/^\d{4}\-\d{1,2}\-\d{1,2}$/.test(e)&&(f=this.parseFormat("yyyy-mm-dd",h)),/^\d{4}\-\d{1,2}\-\d{1,2}[T ]\d{1,2}\:\d{1,2}$/.test(e)&&(f=this.parseFormat("yyyy-mm-dd hh:ii",h)),/^\d{4}\-\d{1,2}\-\d{1,2}[T ]\d{1,2}\:\d{1,2}\:\d{1,2}[Z]{0,1}$/.test(e)&&(f=this.parseFormat("yyyy-mm-dd hh:ii:ss",h)),/^[-+]\d+[dmwy]([\s,]+[-+]\d+[dmwy])*$/.test(e)){var j,k,l=/([-+]\d+)([dmwy])/,m=e.match(/([-+]\d+)([dmwy])/g);e=new Date;for(var n=0;n<m.length;n++)switch(j=l.exec(m[n]),k=parseInt(j[1]),j[2]){case"d":e.setUTCDate(e.getUTCDate()+k);break;case"m":e=c.prototype.moveMonth.call(c.prototype,e,k);break;case"w":e.setUTCDate(e.getUTCDate()+7*k);break;case"y":e=c.prototype.moveYear.call(c.prototype,e,k)}return b(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),0)}var o,p,j,m=e&&e.match(this.nonpunctuation)||[],e=new Date(0,0,0,0,0,0,0),q={},r=["hh","h","ii","i","ss","s","yyyy","yy","M","MM","m","mm","D","DD","d","dd","H","HH","p","P"],s={hh:function(a,b){return a.setUTCHours(b)},h:function(a,b){return a.setUTCHours(b)},HH:function(a,b){return a.setUTCHours(12==b?0:b)},H:function(a,b){return a.setUTCHours(12==b?0:b)},ii:function(a,b){return a.setUTCMinutes(b)},i:function(a,b){return a.setUTCMinutes(b)},ss:function(a,b){
return a.setUTCSeconds(b)},s:function(a,b){return a.setUTCSeconds(b)},yyyy:function(a,b){return a.setUTCFullYear(b)},yy:function(a,b){return a.setUTCFullYear(2e3+b)},m:function(a,b){for(b-=1;0>b;)b+=12;for(b%=12,a.setUTCMonth(b);a.getUTCMonth()!=b;)a.setUTCDate(a.getUTCDate()-1);return a},d:function(a,b){return a.setUTCDate(b)},p:function(a,b){return a.setUTCHours(1==b?a.getUTCHours()+12:a.getUTCHours())}};if(s.M=s.MM=s.mm=s.m,s.dd=s.d,s.P=s.p,e=b(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds()),m.length==f.parts.length){for(var n=0,t=f.parts.length;t>n;n++){if(o=parseInt(m[n],10),j=f.parts[n],isNaN(o))switch(j){case"MM":p=a(d[g].months).filter(function(){var a=this.slice(0,m[n].length),b=m[n].slice(0,a.length);return a==b}),o=a.inArray(p[0],d[g].months)+1;break;case"M":p=a(d[g].monthsShort).filter(function(){var a=this.slice(0,m[n].length),b=m[n].slice(0,a.length);return a==b}),o=a.inArray(p[0],d[g].monthsShort)+1;break;case"p":case"P":o=a.inArray(m[n].toLowerCase(),d[g].meridiem)}q[j]=o}for(var u,n=0;n<r.length;n++)u=r[n],u in q&&!isNaN(q[u])&&s[u](e,q[u])}return e},formatDate:function(b,c,f,g){if(null==b)return"";var h;if("standard"==g)h={yy:b.getUTCFullYear().toString().substring(2),yyyy:b.getUTCFullYear(),m:b.getUTCMonth()+1,M:d[f].monthsShort[b.getUTCMonth()],MM:d[f].months[b.getUTCMonth()],d:b.getUTCDate(),D:d[f].daysShort[b.getUTCDay()],DD:d[f].days[b.getUTCDay()],p:2==d[f].meridiem.length?d[f].meridiem[b.getUTCHours()<12?0:1]:"",h:b.getUTCHours(),i:b.getUTCMinutes(),s:b.getUTCSeconds()},2==d[f].meridiem.length?h.H=h.h%12==0?12:h.h%12:h.H=h.h,h.HH=(h.H<10?"0":"")+h.H,h.P=h.p.toUpperCase(),h.hh=(h.h<10?"0":"")+h.h,h.ii=(h.i<10?"0":"")+h.i,h.ss=(h.s<10?"0":"")+h.s,h.dd=(h.d<10?"0":"")+h.d,h.mm=(h.m<10?"0":"")+h.m;else{if("php"!=g)throw new Error("Invalid format type.");h={y:b.getUTCFullYear().toString().substring(2),Y:b.getUTCFullYear(),F:d[f].months[b.getUTCMonth()],M:d[f].monthsShort[b.getUTCMonth()],n:b.getUTCMonth()+1,t:e.getDaysInMonth(b.getUTCFullYear(),b.getUTCMonth()),j:b.getUTCDate(),l:d[f].days[b.getUTCDay()],D:d[f].daysShort[b.getUTCDay()],w:b.getUTCDay(),N:0==b.getUTCDay()?7:b.getUTCDay(),S:b.getUTCDate()%10<=d[f].suffix.length?d[f].suffix[b.getUTCDate()%10-1]:"",a:2==d[f].meridiem.length?d[f].meridiem[b.getUTCHours()<12?0:1]:"",g:b.getUTCHours()%12==0?12:b.getUTCHours()%12,G:b.getUTCHours(),i:b.getUTCMinutes(),s:b.getUTCSeconds()},h.m=(h.n<10?"0":"")+h.n,h.d=(h.j<10?"0":"")+h.j,h.A=h.a.toString().toUpperCase(),h.h=(h.g<10?"0":"")+h.g,h.H=(h.G<10?"0":"")+h.G,h.i=(h.i<10?"0":"")+h.i,h.s=(h.s<10?"0":"")+h.s}for(var b=[],i=a.extend([],c.separators),j=0,k=c.parts.length;k>j;j++)i.length&&b.push(i.shift()),b.push(h[c.parts[j]]);return i.length&&b.push(i.shift()),b.join("")},convertViewMode:function(a){switch(a){case 4:case"decade":a=4;break;case 3:case"year":a=3;break;case 2:case"month":a=2;break;case 1:case"day":a=1;break;case 0:case"hour":a=0}return a},headTemplate:'<thead><tr class="lx_th1"><th class="prev">&lt;&lt;</th><th colspan="5" class="switch"></th><th class="next">&gt;&gt;</th></tr></thead>',headTemplateV3:'<thead><tr class="lx_th1"><th class="prev">&lt;&lt; </th><th colspan="5" class="switch"></th><th class="next">&gt;&gt;</th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr></tfoot>'};e.template='<div class="datetimepicker"><div class="datetimepicker-minutes"><table class=" table-condensed">'+e.headTemplate+e.contTemplate+e.footTemplate+'</table></div><div class="datetimepicker-hours"><table class=" table-condensed">'+e.headTemplate+e.contTemplate+e.footTemplate+'</table></div><div class="datetimepicker-days"><table class=" table-condensed">'+e.headTemplate+"<tbody></tbody>"+e.footTemplate+'</table></div><div class="datetimepicker-months"><table class="table-condensed">'+e.headTemplate+e.contTemplate+e.footTemplate+'</table></div><div class="datetimepicker-years"><table class="table-condensed">'+e.headTemplate+e.contTemplate+e.footTemplate+"</table></div></div>",e.templateV3='<div class="datetimepicker"><div class="datetimepicker-minutes"><table class=" table-condensed">'+e.headTemplateV3+e.contTemplate+e.footTemplate+'</table></div><div class="datetimepicker-hours"><table class=" table-condensed">'+e.headTemplateV3+e.contTemplate+e.footTemplate+'</table></div><div class="datetimepicker-days"><table class=" table-condensed">'+e.headTemplateV3+"<tbody></tbody>"+e.footTemplate+'</table></div><div class="datetimepicker-months"><table class="table-condensed">'+e.headTemplateV3+e.contTemplate+e.footTemplate+'</table></div><div class="datetimepicker-years"><table class="table-condensed">'+e.headTemplateV3+e.contTemplate+e.footTemplate+"</table></div></div>",a.fn.datetimepicker.DPGlobal=e,a.fn.datetimepicker.noConflict=function(){return a.fn.datetimepicker=old,this},a(document).on("focus.datetimepicker.data-api click.datetimepicker.data-api",'[data-provide="datetimepicker"]',function(b){var c=a(this);c.data("datetimepicker")||(b.preventDefault(),c.datetimepicker("show"))}),a(function(){a('[data-provide="datetimepicker-inline"]').datetimepicker()})}(window.jQuery),function(){var a=[].slice;!function(b,c){"use strict";var d;return d=function(){function a(a,c){null==c&&(c={}),this.$element=b(a),this.options=b.extend({},b.fn.bootstrapSwitch.defaults,{state:this.$element.is(":checked"),size:this.$element.data("size"),animate:this.$element.data("animate"),disabled:this.$element.is(":disabled"),readonly:this.$element.is("[readonly]"),indeterminate:this.$element.data("indeterminate"),inverse:this.$element.data("inverse"),radioAllOff:this.$element.data("radio-all-off"),onColor:this.$element.data("on-color"),offColor:this.$element.data("off-color"),onText:this.$element.data("on-text"),offText:this.$element.data("off-text"),labelText:this.$element.data("label-text"),handleWidth:this.$element.data("handle-width"),labelWidth:this.$element.data("label-width"),baseClass:this.$element.data("base-class"),wrapperClass:this.$element.data("wrapper-class")},c),this.$wrapper=b("<div>",{"class":function(a){return function(){var b;return b=[""+a.options.baseClass].concat(a._getClasses(a.options.wrapperClass)),b.push(a.options.state?""+a.options.baseClass+"-on":""+a.options.baseClass+"-off"),null!=a.options.size&&b.push(""+a.options.baseClass+"-"+a.options.size),a.options.disabled&&b.push(""+a.options.baseClass+"-disabled"),a.options.readonly&&b.push(""+a.options.baseClass+"-readonly"),a.options.indeterminate&&b.push(""+a.options.baseClass+"-indeterminate"),a.options.inverse&&b.push(""+a.options.baseClass+"-inverse"),a.$element.attr("id")&&b.push(""+a.options.baseClass+"-id-"+a.$element.attr("id")),b.join(" ")}}(this)()}),this.$container=b("<div>",{"class":""+this.options.baseClass+"-container"}),this.$on=b("<span>",{html:this.options.onText,"class":""+this.options.baseClass+"-handle-on "+this.options.baseClass+"-"+this.options.onColor}),this.$off=b("<span>",{html:this.options.offText,"class":""+this.options.baseClass+"-handle-off "+this.options.baseClass+"-"+this.options.offColor}),this.$label=b("<span>",{html:this.options.labelText,"class":""+this.options.baseClass+"-label"}),this.$element.on("init.bootstrapSwitch",function(b){return function(){return b.options.onInit.apply(a,arguments)}}(this)),this.$element.on("switchChange.bootstrapSwitch",function(b){return function(){return b.options.onSwitchChange.apply(a,arguments)}}(this)),this.$container=this.$element.wrap(this.$container).parent(),this.$wrapper=this.$container.wrap(this.$wrapper).parent(),this.$element.before(this.options.inverse?this.$off:this.$on).before(this.$label).before(this.options.inverse?this.$on:this.$off),this.options.indeterminate&&this.$element.prop("indeterminate",!0),this._width(),this._containerPosition(this.options.state,function(a){return function(){return a.options.animate?a.$wrapper.addClass(""+a.options.baseClass+"-animate"):void 0}}(this)),this._elementHandlers(),this._handleHandlers(),this._labelHandlers(),this._formHandler(),this._externalLabelHandler(),this.$element.trigger("init.bootstrapSwitch")}return a.prototype._constructor=a,a.prototype.state=function(a,b){return"undefined"==typeof a?this.options.state:this.options.disabled||this.options.readonly?this.$element:this.options.state&&!this.options.radioAllOff&&this.$element.is(":radio")?this.$element:(this.options.indeterminate?(this.indeterminate(!1),a=!0):a=!!a,this.$element.prop("checked",a).trigger("change.bootstrapSwitch",b),this.$element)},a.prototype.toggleState=function(a){return this.options.disabled||this.options.readonly?this.$element:this.options.indeterminate?(this.indeterminate(!1),this.state(!0)):this.$element.prop("checked",!this.options.state).trigger("change.bootstrapSwitch",a)},a.prototype.size=function(a){return"undefined"==typeof a?this.options.size:(null!=this.options.size&&this.$wrapper.removeClass(""+this.options.baseClass+"-"+this.options.size),a&&this.$wrapper.addClass(""+this.options.baseClass+"-"+a),this._width(),this.options.size=a,this.$element)},a.prototype.animate=function(a){return"undefined"==typeof a?this.options.animate:(a=!!a,this.options.animate=a,this.$wrapper[a?"addClass":"removeClass"](""+this.options.baseClass+"-animate"),this.$element)},a.prototype.toggleAnimate=function(){return this.options.animate=!this.options.animate,this.$wrapper.toggleClass(""+this.options.baseClass+"-animate"),this.$element},a.prototype.disabled=function(a){return"undefined"==typeof a?this.options.disabled:(a=!!a,this.options.disabled=a,this.$element.prop("disabled",a),this.$wrapper[a?"addClass":"removeClass"](""+this.options.baseClass+"-disabled"),this.$element)},a.prototype.toggleDisabled=function(){return this.options.disabled=!this.options.disabled,this.$element.prop("disabled",this.options.disabled),this.$wrapper.toggleClass(""+this.options.baseClass+"-disabled"),this.$element},a.prototype.readonly=function(a){return"undefined"==typeof a?this.options.readonly:(a=!!a,this.options.readonly=a,this.$element.prop("readonly",a),this.$wrapper[a?"addClass":"removeClass"](""+this.options.baseClass+"-readonly"),this.$element)},a.prototype.toggleReadonly=function(){return this.options.readonly=!this.options.readonly,this.$element.prop("readonly",this.options.readonly),this.$wrapper.toggleClass(""+this.options.baseClass+"-readonly"),this.$element},a.prototype.indeterminate=function(a){return"undefined"==typeof a?this.options.indeterminate:(a=!!a,this.options.indeterminate=a,this.$element.prop("indeterminate",a),this.$wrapper[a?"addClass":"removeClass"](""+this.options.baseClass+"-indeterminate"),this._containerPosition(),this.$element)},a.prototype.toggleIndeterminate=function(){return this.options.indeterminate=!this.options.indeterminate,this.$element.prop("indeterminate",!this.options.indeterminate),this.$wrapper.toggleClass(""+this.options.baseClass+"-indeterminate"),this._containerPosition(),this.$element},a.prototype.inverse=function(a){var b,c;return"undefined"==typeof a?this.options.inverse:(a=!!a,this.$wrapper[a?"addClass":"removeClass"](""+this.options.baseClass+"-inverse"),c=this.$on.clone(!0),b=this.$off.clone(!0),this.$on.replaceWith(b),this.$off.replaceWith(c),this.$on=b,this.$off=c,this.options.inverse=a,this.$element)},a.prototype.toggleInverse=function(){var a,b;return this.$wrapper.toggleClass(""+this.options.baseClass+"-inverse"),b=this.$on.clone(!0),a=this.$off.clone(!0),this.$on.replaceWith(a),this.$off.replaceWith(b),this.$on=a,this.$off=b,this.options.inverse=!this.options.inverse,this.$element},a.prototype.onColor=function(a){var b;return b=this.options.onColor,"undefined"==typeof a?b:(null!=b&&this.$on.removeClass(""+this.options.baseClass+"-"+b),this.$on.addClass(""+this.options.baseClass+"-"+a),this.options.onColor=a,this.$element)},a.prototype.offColor=function(a){var b;return b=this.options.offColor,"undefined"==typeof a?b:(null!=b&&this.$off.removeClass(""+this.options.baseClass+"-"+b),this.$off.addClass(""+this.options.baseClass+"-"+a),this.options.offColor=a,this.$element)},a.prototype.onText=function(a){return"undefined"==typeof a?this.options.onText:(this.$on.html(a),this._width(),this._containerPosition(),this.options.onText=a,this.$element)},a.prototype.offText=function(a){return"undefined"==typeof a?this.options.offText:(this.$off.html(a),this._width(),this._containerPosition(),this.options.offText=a,this.$element)},a.prototype.labelText=function(a){return"undefined"==typeof a?this.options.labelText:(this.$label.html(a),this._width(),this.options.labelText=a,this.$element)},a.prototype.handleWidth=function(a){return"undefined"==typeof a?this.options.handleWidth:(this.options.handleWidth=a,this._width(),this._containerPosition(),this.$element)},a.prototype.labelWidth=function(a){return"undefined"==typeof a?this.options.labelWidth:(this.options.labelWidth=a,this._width(),this._containerPosition(),this.$element)},a.prototype.baseClass=function(a){return this.options.baseClass},a.prototype.wrapperClass=function(a){return"undefined"==typeof a?this.options.wrapperClass:(a||(a=b.fn.bootstrapSwitch.defaults.wrapperClass),this.$wrapper.removeClass(this._getClasses(this.options.wrapperClass).join(" ")),this.$wrapper.addClass(this._getClasses(a).join(" ")),this.options.wrapperClass=a,this.$element)},a.prototype.radioAllOff=function(a){return"undefined"==typeof a?this.options.radioAllOff:(this.options.radioAllOff=a,this.$element)},a.prototype.onInit=function(a){return"undefined"==typeof a?this.options.onInit:(a||(a=b.fn.bootstrapSwitch.defaults.onInit),this.options.onInit=a,this.$element)},a.prototype.onSwitchChange=function(a){return"undefined"==typeof a?this.options.onSwitchChange:(a||(a=b.fn.bootstrapSwitch.defaults.onSwitchChange),this.options.onSwitchChange=a,this.$element)},a.prototype.destroy=function(){var a;return a=this.$element.closest("form"),a.length&&a.off("reset.bootstrapSwitch").removeData("bootstrap-switch"),this.$container.children().not(this.$element).remove(),this.$element.unwrap().unwrap().off(".bootstrapSwitch").removeData("bootstrap-switch"),this.$element},a.prototype._width=function(){var a,b;return a=this.$on.add(this.$off),a.add(this.$label).css("width",""),b="auto"===this.options.handleWidth?Math.max(this.$on.width(),this.$off.width()):this.options.handleWidth,a.width(b),this.$label.width(function(a){return function(c,d){return"auto"!==a.options.labelWidth?a.options.labelWidth:b>d?b:d}}(this)),this._handleWidth=this.$on.outerWidth(),this._labelWidth=this.$label.outerWidth(),this.$container.width(2*this._handleWidth+this._labelWidth),this.$wrapper.width(this._handleWidth+this._labelWidth)},a.prototype._containerPosition=function(a,c){return null==a&&(a=this.options.state),this.$container.css("margin-left",function(b){return function(){var c;return c=[0,"-"+b._handleWidth+"px"],b.options.indeterminate?"-"+b._handleWidth/2+"px":a?b.options.inverse?c[1]:c[0]:b.options.inverse?c[0]:c[1]}}(this)),c?b.support.transition?this.$container.one("bsTransitionEnd",c).emulateTransitionEnd(500):c():void 0},a.prototype._elementHandlers=function(){return this.$element.on({"change.bootstrapSwitch":function(a){return function(c,d){var e;return c.preventDefault(),c.stopImmediatePropagation(),e=a.$element.is(":checked"),a._containerPosition(e),e!==a.options.state?(a.options.state=e,a.$wrapper.toggleClass(""+a.options.baseClass+"-off").toggleClass(""+a.options.baseClass+"-on"),d?void 0:(a.$element.is(":radio")&&b("[name='"+a.$element.attr("name")+"']").not(a.$element).prop("checked",!1).trigger("change.bootstrapSwitch",!0),a.$element.trigger("switchChange.bootstrapSwitch",[e]))):void 0}}(this),"focus.bootstrapSwitch":function(a){return function(b){return b.preventDefault(),a.$wrapper.addClass(""+a.options.baseClass+"-focused")}}(this),"blur.bootstrapSwitch":function(a){return function(b){return b.preventDefault(),a.$wrapper.removeClass(""+a.options.baseClass+"-focused")}}(this),"keydown.bootstrapSwitch":function(a){return function(b){if(b.which&&!a.options.disabled&&!a.options.readonly)switch(b.which){case 37:return b.preventDefault(),b.stopImmediatePropagation(),a.state(!1);case 39:return b.preventDefault(),b.stopImmediatePropagation(),a.state(!0)}}}(this)})},a.prototype._handleHandlers=function(){return this.$on.on("click.bootstrapSwitch",function(a){return function(b){return a.state(!1),a.$element.trigger("focus.bootstrapSwitch")}}(this)),this.$off.on("click.bootstrapSwitch",function(a){return function(b){return a.state(!0),a.$element.trigger("focus.bootstrapSwitch")}}(this))},a.prototype._labelHandlers=function(){return this.$label.on({"mousedown.bootstrapSwitch touchstart.bootstrapSwitch":function(a){return function(b){return a._dragStart||a.options.disabled||a.options.readonly?void 0:(b.preventDefault(),a._dragStart=(b.pageX||b.originalEvent.touches[0].pageX)-parseInt(a.$container.css("margin-left"),10),a.options.animate&&a.$wrapper.removeClass(""+a.options.baseClass+"-animate"),a.$element.trigger("focus.bootstrapSwitch"))}}(this),"mousemove.bootstrapSwitch touchmove.bootstrapSwitch":function(a){return function(b){var c;if(null!=a._dragStart&&(b.preventDefault(),c=(b.pageX||b.originalEvent.touches[0].pageX)-a._dragStart,!(c<-a._handleWidth||c>0)))return a._dragEnd=c,a.$container.css("margin-left",""+a._dragEnd+"px")}}(this),"mouseup.bootstrapSwitch touchend.bootstrapSwitch":function(a){return function(b){var c;if(a._dragStart)return b.preventDefault(),a.options.animate&&a.$wrapper.addClass(""+a.options.baseClass+"-animate"),a._dragEnd?(c=a._dragEnd>-(a._handleWidth/2),a._dragEnd=!1,a.state(a.options.inverse?!c:c)):a.state(!a.options.state),a._dragStart=!1}}(this),"mouseleave.bootstrapSwitch":function(a){return function(b){return a.$label.trigger("mouseup.bootstrapSwitch")}}(this)})},a.prototype._externalLabelHandler=function(){var a;return a=this.$element.closest("label"),a.on("click",function(b){return function(c){return c.preventDefault(),c.stopImmediatePropagation(),c.target===a[0]?b.toggleState():void 0}}(this))},a.prototype._formHandler=function(){var a;return a=this.$element.closest("form"),a.data("bootstrap-switch")?void 0:a.on("reset.bootstrapSwitch",function(){return c.setTimeout(function(){return a.find("input").filter(function(){return b(this).data("bootstrap-switch")}).each(function(){return b(this).bootstrapSwitch("state",this.checked)})},1)}).data("bootstrap-switch",!0)},a.prototype._getClasses=function(a){var c,d,e,f;if(!b.isArray(a))return[""+this.options.baseClass+"-"+a];for(d=[],e=0,f=a.length;f>e;e++)c=a[e],d.push(""+this.options.baseClass+"-"+c);return d},a}(),b.fn.bootstrapSwitch=function(){var c,e,f;return e=arguments[0],c=2<=arguments.length?a.call(arguments,1):[],f=this,this.each(function(){var a,g;return a=b(this),g=a.data("bootstrap-switch"),g||a.data("bootstrap-switch",g=new d(this,e)),"string"==typeof e?f=g[e].apply(g,c):void 0}),f},b.fn.bootstrapSwitch.Constructor=d,b.fn.bootstrapSwitch.defaults={state:!0,size:null,animate:!0,disabled:!1,readonly:!1,indeterminate:!1,inverse:!1,radioAllOff:!1,onColor:"primary",offColor:"default",onText:"ON",offText:"OFF",labelText:"&nbsp;",handleWidth:"auto",labelWidth:"auto",baseClass:"bootstrap-switch",wrapperClass:"wrapper",onInit:function(){},onSwitchChange:function(){}}}(window.jQuery,window)}.call(this),function(a){function b(a,b,e){var f=a[0],g=/er/.test(e)?q:/bl/.test(e)?o:m,h=e==r?{checked:f[m],disabled:f[o],indeterminate:"true"==a.attr(q)||"false"==a.attr(p)}:f[g];if(/^(ch|di|in)/.test(e)&&!h)c(a,g);else if(/^(un|en|de)/.test(e)&&h)d(a,g);else if(e==r)for(var g in h)h[g]?c(a,g,!0):d(a,g,!0);else b&&"toggle"!=e||(b||a[x]("ifClicked"),h?f[s]!==l&&d(a,g):c(a,g))}function c(b,c,e){var k=b[0],r=b.parent(),t=c==m,u=c==q,x=c==o,y=u?p:t?n:"enabled",A=f(b,y+g(k[s])),B=f(b,c+g(k[s]));if(k[c]!==!0){if(!e&&c==m&&k[s]==l&&k.name){var C=b.closest("form"),D='input[name="'+k.name+'"]';D=C.length?C.find(D):a(D),D.each(function(){this!==k&&a(this).data(i)&&d(a(this),c)})}u?(k[c]=!0,k[m]&&d(b,m,"force")):(e||(k[c]=!0),t&&k[q]&&d(b,q,!1)),h(b,t,c,e)}k[o]&&f(b,z,!0)&&r.find("."+j).css(z,"default"),r[v](B||f(b,c)||""),x?r.attr("aria-disabled","true"):r.attr("aria-checked",u?"mixed":"true"),r[w](A||f(b,y)||"")}function d(a,b,c){var d=a[0],e=a.parent(),i=b==m,k=b==q,l=b==o,r=k?p:i?n:"enabled",t=f(a,r+g(d[s])),u=f(a,b+g(d[s]));d[b]!==!1&&((k||!c||"force"==c)&&(d[b]=!1),h(a,i,r,c)),!d[o]&&f(a,z,!0)&&e.find("."+j).css(z,"pointer"),e[w](u||f(a,b)||""),l?e.attr("aria-disabled","false"):e.attr("aria-checked","false"),e[v](t||f(a,r)||"")}function e(b,c){b.data(i)&&(b.parent().html(b.attr("style",b.data(i).s||"")),c&&b[x](c),b.off(".i").unwrap(),a(y+'[for="'+b[0].id+'"]').add(b.closest(y)).off(".i"))}function f(a,b,c){return a.data(i)?a.data(i).o[b+(c?"":"Class")]:void 0}function g(a){return a.charAt(0).toUpperCase()+a.slice(1)}function h(a,b,c,d){d||(b&&a[x]("ifToggled"),a[x]("ifChanged")[x]("if"+g(c)))}var i="iCheck",j=i+"-helper",k="checkbox",l="radio",m="checked",n="un"+m,o="disabled",p="determinate",q="in"+p,r="update",s="type",t="click",u="touchbegin.i touchend.i",v="addClass",w="removeClass",x="trigger",y="label",z="cursor",A=/ipad|iphone|ipod|android|blackberry|windows phone|opera mini|silk/i.test(navigator.userAgent);a.fn[i]=function(f,g){var h='input[type="'+k+'"], input[type="'+l+'"]',n=a(),p=function(b){b.each(function(){var b=a(this);n=b.is(h)?n.add(b):n.add(b.find(h))})};if(/^(check|uncheck|toggle|indeterminate|determinate|disable|enable|update|destroy)$/i.test(f))return f=f.toLowerCase(),p(this),n.each(function(){var c=a(this);"destroy"==f?e(c,"ifDestroyed"):b(c,!0,f),a.isFunction(g)&&g()});if("object"!=typeof f&&f)return this;var z=a.extend({checkedClass:m,disabledClass:o,indeterminateClass:q,labelHover:!0,aria:!1},f),B=z.handle,C=z.hoverClass||"hover",D=z.focusClass||"focus",E=z.activeClass||"active",F=!!z.labelHover,G=z.labelHoverClass||"hover",H=0|(""+z.increaseArea).replace("%","");return(B==k||B==l)&&(h='input[type="'+B+'"]'),-50>H&&(H=-50),p(this),n.each(function(){var f=a(this);e(f);var g,h=this,n=h.id,p=-H+"%",q=100+2*H+"%",B={position:"absolute",top:p,left:p,display:"block",width:q,height:q,margin:0,padding:0,background:"#fff",border:0,opacity:0},I=A?{position:"absolute",visibility:"hidden"}:H?B:{position:"absolute",opacity:0},J=h[s]==k?z.checkboxClass||"i"+k:z.radioClass||"i"+l,K=a(y+'[for="'+n+'"]').add(f.closest(y)),L=!!z.aria,M=i+"-"+Math.random().toString(36).substr(2,6),N='<div class="'+J+'" '+(L?'role="'+h[s]+'" ':"");L&&K.each(function(){N+='aria-labelledby="',this.id?N+=this.id:(this.id=M,N+=M),N+='"'}),N=f.wrap(N+"/>")[x]("ifCreated").parent().append(z.insert),g=a('<ins class="'+j+'"/>').css(B).appendTo(N),f.data(i,{o:z,s:f.attr("style")}).css(I),!!z.inheritClass&&N[v](h.className||""),!!z.inheritID&&n&&N.attr("id",i+"-"+n),"static"==N.css("position")&&N.css("position","relative"),b(f,!0,r),K.length&&K.on(t+".i mouseover.i mouseout.i "+u,function(c){var d=c[s],e=a(this);if(!h[o]){if(d==t){if(a(c.target).is("a"))return;b(f,!1,!0)}else F&&(/ut|nd/.test(d)?(N[w](C),e[w](G)):(N[v](C),e[v](G)));if(!A)return!1;c.stopPropagation()}}),f.on(t+".i focus.i blur.i keyup.i keydown.i keypress.i",function(a){var b=a[s],e=a.keyCode;return b==t?!1:"keydown"==b&&32==e?(h[s]==l&&h[m]||(h[m]?d(f,m):c(f,m)),!1):void("keyup"==b&&h[s]==l?!h[m]&&c(f,m):/us|ur/.test(b)&&N["blur"==b?w:v](D))}),g.on(t+" mousedown mouseup mouseover mouseout "+u,function(a){var c=a[s],d=/wn|up/.test(c)?E:C;if(!h[o]){if(c==t?b(f,!1,!0):(/wn|er|in/.test(c)?N[v](d):N[w](d+" "+E),K.length&&F&&d==C&&K[/ut|nd/.test(c)?w:v](G)),!A)return!1;a.stopPropagation()}})})}}(window.jQuery||window.Zepto),function(a){"use strict";a.matchMedia=a.matchMedia||function(a,b){var c,d=a.documentElement,e=d.firstElementChild||d.firstChild,f=a.createElement("body"),g=a.createElement("div");return g.id="mq-test-1",g.style.cssText="position:absolute;top:-100em",f.style.background="none",f.appendChild(g),function(a){return g.innerHTML='&shy;<style media="'+a+'"> #mq-test-1 { width: 42px; }</style>',d.insertBefore(f,e),c=42===g.offsetWidth,d.removeChild(f),{matches:c,media:a}}}(a.document)}(this),function(a){"use strict";function b(){v(!0)}var c={};a.respond=c,c.update=function(){};var d=[],e=function(){var b=!1;try{b=new a.XMLHttpRequest}catch(c){b=new a.ActiveXObject("Microsoft.XMLHTTP")}return function(){return b}}(),f=function(a,b){var c=e();c&&(c.open("GET",a,!0),c.onreadystatechange=function(){4!==c.readyState||200!==c.status&&304!==c.status||b(c.responseText)},4!==c.readyState&&c.send(null))},g=function(a){return a.replace(c.regex.minmaxwh,"").match(c.regex.other)};if(c.ajax=f,c.queue=d,c.unsupportedmq=g,c.regex={media:/@media[^\{]+\{([^\{\}]*\{[^\}\{]*\})+/gi,keyframes:/@(?:\-(?:o|moz|webkit)\-)?keyframes[^\{]+\{(?:[^\{\}]*\{[^\}\{]*\})+[^\}]*\}/gi,comments:/\/\*[^*]*\*+([^\/][^*]*\*+)*\//gi,urls:/(url\()['"]?([^\/\)'"][^:\)'"]+)['"]?(\))/g,findStyles:/@media *([^\{]+)\{([\S\s]+?)$/,only:/(only\s+)?([a-zA-Z]+)\s?/,minw:/\(\s*min\-width\s*:\s*(\s*[0-9\.]+)(px|em)\s*\)/,maxw:/\(\s*max\-width\s*:\s*(\s*[0-9\.]+)(px|em)\s*\)/,minmaxwh:/\(\s*m(in|ax)\-(height|width)\s*:\s*(\s*[0-9\.]+)(px|em)\s*\)/gi,other:/\([^\)]*\)/g},c.mediaQueriesSupported=a.matchMedia&&null!==a.matchMedia("only all")&&a.matchMedia("only all").matches,!c.mediaQueriesSupported){var h,i,j,k=a.document,l=k.documentElement,m=[],n=[],o=[],p={},q=30,r=k.getElementsByTagName("head")[0]||l,s=k.getElementsByTagName("base")[0],t=r.getElementsByTagName("link"),u=function(){var a,b=k.createElement("div"),c=k.body,d=l.style.fontSize,e=c&&c.style.fontSize,f=!1;return b.style.cssText="position:absolute;font-size:1em;width:1em",c||(c=f=k.createElement("body"),c.style.background="none"),l.style.fontSize="100%",c.style.fontSize="100%",c.appendChild(b),f&&l.insertBefore(c,l.firstChild),a=b.offsetWidth,f?l.removeChild(c):c.removeChild(b),l.style.fontSize=d,e&&(c.style.fontSize=e),a=j=parseFloat(a)},v=function(b){var c="clientWidth",d=l[c],e="CSS1Compat"===k.compatMode&&d||k.body[c]||d,f={},g=t[t.length-1],p=(new Date).getTime();if(b&&h&&q>p-h)return a.clearTimeout(i),void(i=a.setTimeout(v,q));h=p;for(var s in m)if(m.hasOwnProperty(s)){var w=m[s],x=w.minw,y=w.maxw,z=null===x,A=null===y,B="em";x&&(x=parseFloat(x)*(x.indexOf(B)>-1?j||u():1)),y&&(y=parseFloat(y)*(y.indexOf(B)>-1?j||u():1)),w.hasquery&&(z&&A||!(z||e>=x)||!(A||y>=e))||(f[w.media]||(f[w.media]=[]),f[w.media].push(n[w.rules]))}for(var C in o)o.hasOwnProperty(C)&&o[C]&&o[C].parentNode===r&&r.removeChild(o[C]);o.length=0;for(var D in f)if(f.hasOwnProperty(D)){var E=k.createElement("style"),F=f[D].join("\n");E.type="text/css",E.media=D,r.insertBefore(E,g.nextSibling),E.styleSheet?E.styleSheet.cssText=F:E.appendChild(k.createTextNode(F)),o.push(E)}},w=function(a,b,d){var e=a.replace(c.regex.comments,"").replace(c.regex.keyframes,"").match(c.regex.media),f=e&&e.length||0;b=b.substring(0,b.lastIndexOf("/"));var h=function(a){return a.replace(c.regex.urls,"$1"+b+"$2$3")},i=!f&&d;b.length&&(b+="/"),i&&(f=1);for(var j=0;f>j;j++){var k,l,o,p;i?(k=d,n.push(h(a))):(k=e[j].match(c.regex.findStyles)&&RegExp.$1,n.push(RegExp.$2&&h(RegExp.$2))),o=k.split(","),p=o.length;for(var q=0;p>q;q++)l=o[q],g(l)||m.push({media:l.split("(")[0].match(c.regex.only)&&RegExp.$2||"all",rules:n.length-1,hasquery:l.indexOf("(")>-1,minw:l.match(c.regex.minw)&&parseFloat(RegExp.$1)+(RegExp.$2||""),maxw:l.match(c.regex.maxw)&&parseFloat(RegExp.$1)+(RegExp.$2||"")})}v()},x=function(){if(d.length){var b=d.shift();f(b.href,function(c){w(c,b.href,b.media),p[b.href]=!0,a.setTimeout(function(){x()},0)})}},y=function(){for(var b=0;b<t.length;b++){var c=t[b],e=c.href,f=c.media,g=c.rel&&"stylesheet"===c.rel.toLowerCase();e&&g&&!p[e]&&(c.styleSheet&&c.styleSheet.rawCssText?(w(c.styleSheet.rawCssText,e,f),p[e]=!0):(!/^([a-zA-Z:]*\/\/)/.test(e)&&!s||e.replace(RegExp.$1,"").split("/")[0]===a.location.host)&&("//"===e.substring(0,2)&&(e=a.location.protocol+e),d.push({href:e,media:f})))}x()};y(),c.update=y,c.getEmValue=u,a.addEventListener?a.addEventListener("resize",b,!1):a.attachEvent&&a.attachEvent("onresize",b)}}(this),!function(){function a(a){return a.replace(t,"").replace(u,",").replace(v,"").replace(w,"").replace(x,"").split(y)}function b(a){return"'"+a.replace(/('|\\)/g,"\\$1").replace(/\r/g,"\\r").replace(/\n/g,"\\n")+"'"}function c(c,d){function e(a){return m+=a.split(/\n/).length-1,k&&(a=a.replace(/\s+/g," ").replace(/<!--[\w\W]*?-->/g,"")),a&&(a=s[1]+b(a)+s[2]+"\n"),a}function f(b){var c=m;if(j?b=j(b,d):g&&(b=b.replace(/\n/g,function(){return m++,"$line="+m+";"})),0===b.indexOf("=")){var e=l&&!/^=[=#]/.test(b);if(b=b.replace(/^=[=#]?|[\s;]*$/g,""),e){var f=b.replace(/\s*\([^\)]+\)/,"");n[f]||/^(include|print)$/.test(f)||(b="$escape("+b+")")}else b="$string("+b+")";b=s[1]+b+s[2]}return g&&(b="$line="+c+";"+b),r(a(b),function(a){if(a&&!p[a]){var b;b="print"===a?u:"include"===a?v:n[a]?"$utils."+a:o[a]?"$helpers."+a:"$data."+a,w+=a+"="+b+",",p[a]=!0}}),b+"\n"}var g=d.debug,h=d.openTag,i=d.closeTag,j=d.parser,k=d.compress,l=d.escape,m=1,p={$data:1,$filename:1,$utils:1,$helpers:1,$out:1,$line:1},q="".trim,s=q?["$out='';","$out+=",";","$out"]:["$out=[];","$out.push(",");","$out.join('')"],t=q?"$out+=text;return $out;":"$out.push(text);",u="function(){var text=''.concat.apply('',arguments);"+t+"}",v="function(filename,data){data=data||$data;var text=$utils.$include(filename,data,$filename);"+t+"}",w="'use strict';var $utils=this,$helpers=$utils.$helpers,"+(g?"$line=0,":""),x=s[0],y="return new String("+s[3]+");";r(c.split(h),function(a){a=a.split(i);var b=a[0],c=a[1];1===a.length?x+=e(b):(x+=f(b),c&&(x+=e(c)))});var z=w+x+y;g&&(z="try{"+z+"}catch(e){throw {filename:$filename,name:'Render Error',message:e.message,line:$line,source:"+b(c)+".split(/\\n/)[$line-1].replace(/^\\s+/,'')};}");try{var A=new Function("$data","$filename",z);return A.prototype=n,A}catch(B){throw B.temp="function anonymous($data,$filename) {"+z+"}",B}}var d=function(a,b){return"string"==typeof b?q(b,{filename:a}):g(a,b)};d.version="3.0.0",d.config=function(a,b){e[a]=b};var e=d.defaults={openTag:"<%",closeTag:"%>",escape:!0,cache:!0,compress:!1,parser:null},f=d.cache={};d.render=function(a,b){return q(a,b)};var g=d.renderFile=function(a,b){var c=d.get(a)||p({filename:a,name:"Render Error",message:"Template not found"});return b?c(b):c};d.get=function(a){var b;if(f[a])b=f[a];else if("object"==typeof document){var c=document.getElementById(a);if(c){var d=(c.value||c.innerHTML).replace(/^\s*|\s*$/g,"");b=q(d,{filename:a})}}return b};var h=function(a,b){return"string"!=typeof a&&(b=typeof a,"number"===b?a+="":a="function"===b?h(a.call(a)):""),a},i={"<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","&":"&#38;"},j=function(a){return i[a]},k=function(a){return h(a).replace(/&(?![\w#]+;)|[<>"']/g,j)},l=Array.isArray||function(a){return"[object Array]"==={}.toString.call(a)},m=function(a,b){var c,d;if(l(a))for(c=0,d=a.length;d>c;c++)b.call(a,a[c],c,a);else for(c in a)b.call(a,a[c],c)},n=d.utils={$helpers:{},$include:g,$string:h,$escape:k,$each:m};d.helper=function(a,b){o[a]=b};var o=d.helpers=n.$helpers;d.onerror=function(a){var b="Template Error\n\n";for(var c in a)b+="<"+c+">\n"+a[c]+"\n\n";"object"==typeof console&&console.error(b)};var p=function(a){return d.onerror(a),function(){return"{Template Error}"}},q=d.compile=function(a,b){function d(c){try{return new i(c,h)+""}catch(d){return b.debug?p(d)():(b.debug=!0,q(a,b)(c))}}b=b||{};for(var g in e)void 0===b[g]&&(b[g]=e[g]);var h=b.filename;try{var i=c(a,b)}catch(j){return j.filename=h||"anonymous",j.name="Syntax Error",p(j)}return d.prototype=i.prototype,d.toString=function(){return i.toString()},h&&b.cache&&(f[h]=d),d},r=n.$each,s="break,case,catch,continue,debugger,default,delete,do,else,false,finally,for,function,if,in,instanceof,new,null,return,switch,this,throw,true,try,typeof,var,void,while,with,abstract,boolean,byte,char,class,const,double,enum,export,extends,final,float,goto,implements,import,int,interface,long,native,package,private,protected,public,short,static,super,synchronized,throws,transient,volatile,arguments,let,yield,undefined",t=/\/\*[\w\W]*?\*\/|\/\/[^\n]*\n|\/\/[^\n]*$|"(?:[^"\\]|\\[\w\W])*"|'(?:[^'\\]|\\[\w\W])*'|\s*\.\s*[$\w\.]+/g,u=/[^\w$]+/g,v=new RegExp(["\\b"+s.replace(/,/g,"\\b|\\b")+"\\b"].join("|"),"g"),w=/^\d[^,]*|,\d[^,]*/g,x=/^,+|,+$/g,y=/^$|,+/;
e.openTag="{{",e.closeTag="}}";var z=function(a,b){var c=b.split(":"),d=c.shift(),e=c.join(":")||"";return e&&(e=", "+e),"$helpers."+d+"("+a+e+")"};e.parser=function(a,b){a=a.replace(/^\s/,"");var c=a.split(" "),e=c.shift(),f=c.join(" ");switch(e){case"if":a="if("+f+"){";break;case"else":c="if"===c.shift()?" if("+c.join(" ")+")":"",a="}else"+c+"{";break;case"/if":a="}";break;case"each":var g=c[0]||"$data",h=c[1]||"as",i=c[2]||"$value",j=c[3]||"$index",k=i+","+j;"as"!==h&&(g="[]"),a="$each("+g+",function("+k+"){";break;case"/each":a="});";break;case"echo":a="print("+f+");";break;case"print":case"include":a=e+"("+c.join(",")+");";break;default:if(/^\s*\|\s*[\w\$]/.test(f)){var l=!0;0===a.indexOf("#")&&(a=a.substr(1),l=!1);for(var m=0,n=a.split("|"),o=n.length,p=n[m++];o>m;m++)p=z(p,n[m]);a=(l?"=":"=#")+p}else a=d.helpers[e]?"=#"+e+"("+c.join(",")+");":"="+a}return a},"function"==typeof define?define(function(){return d}):"undefined"!=typeof exports?module.exports=d:this.template=d}(),function(a){function b(){}function c(a,b){return function(){a.apply(b,arguments)}}function d(a){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof a)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],j(a,this)}function e(a,b){for(;3===a._state;)a=a._value;return 0===a._state?void a._deferreds.push(b):(a._handled=!0,void d._immediateFn(function(){var c=1===a._state?b.onFulfilled:b.onRejected;if(null===c)return void(1===a._state?f:g)(b.promise,a._value);var d;try{d=c(a._value)}catch(e){return void g(b.promise,e)}f(b.promise,d)}))}function f(a,b){try{if(b===a)throw new TypeError("A promise cannot be resolved with itself.");if(b&&("object"==typeof b||"function"==typeof b)){var e=b.then;if(b instanceof d)return a._state=3,a._value=b,void h(a);if("function"==typeof e)return void j(c(e,b),a)}a._state=1,a._value=b,h(a)}catch(f){g(a,f)}}function g(a,b){a._state=2,a._value=b,h(a)}function h(a){2===a._state&&0===a._deferreds.length&&d._immediateFn(function(){a._handled||d._unhandledRejectionFn(a._value)});for(var b=0,c=a._deferreds.length;c>b;b++)e(a,a._deferreds[b]);a._deferreds=null}function i(a,b,c){this.onFulfilled="function"==typeof a?a:null,this.onRejected="function"==typeof b?b:null,this.promise=c}function j(a,b){var c=!1;try{a(function(a){c||(c=!0,f(b,a))},function(a){c||(c=!0,g(b,a))})}catch(d){if(c)return;c=!0,g(b,d)}}var k=setTimeout;d.prototype["catch"]=function(a){return this.then(null,a)},d.prototype.then=function(a,c){var d=new this.constructor(b);return e(this,new i(a,c,d)),d},d.all=function(a){var b=Array.prototype.slice.call(a);return new d(function(a,c){function d(f,g){try{if(g&&("object"==typeof g||"function"==typeof g)){var h=g.then;if("function"==typeof h)return void h.call(g,function(a){d(f,a)},c)}b[f]=g,0===--e&&a(b)}catch(i){c(i)}}if(0===b.length)return a([]);for(var e=b.length,f=0;f<b.length;f++)d(f,b[f])})},d.resolve=function(a){return a&&"object"==typeof a&&a.constructor===d?a:new d(function(b){b(a)})},d.reject=function(a){return new d(function(b,c){c(a)})},d.race=function(a){return new d(function(b,c){for(var d=0,e=a.length;e>d;d++)a[d].then(b,c)})},d._immediateFn="function"==typeof setImmediate&&function(a){setImmediate(a)}||function(a){k(a,0)},d._unhandledRejectionFn=function(a){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",a)},d._setImmediateFn=function(a){d._immediateFn=a},d._setUnhandledRejectionFn=function(a){d._unhandledRejectionFn=a},"undefined"!=typeof module&&module.exports?module.exports=d:a.Promise||(a.Promise=d)}(this),function(a){function b(b){var c=a.data(b.data.target,"draggable"),d=c.options,e=c.proxy,f=b.data,g=f.startLeft+b.pageX-f.startX,h=f.startTop+b.pageY-f.startY;e&&(e.parent()[0]==document.body?(g=null!=d.deltaX&&void 0!=d.deltaX?b.pageX+d.deltaX:b.pageX-b.data.offsetWidth,h=null!=d.deltaY&&void 0!=d.deltaY?b.pageY+d.deltaY:b.pageY-b.data.offsetHeight):(null!=d.deltaX&&void 0!=d.deltaX&&(g+=b.data.offsetWidth+d.deltaX),null!=d.deltaY&&void 0!=d.deltaY&&(h+=b.data.offsetHeight+d.deltaY))),b.data.parent!=document.body&&(g+=a(b.data.parent).scrollLeft(),h+=a(b.data.parent).scrollTop()),"h"==d.axis?f.left=g:"v"==d.axis?f.top=h:(f.left=g,f.top=h)}function c(b){var c=a.data(b.data.target,"draggable"),d=c.options,e=c.proxy;e||(e=a(b.data.target)),e.css({left:b.data.left,top:b.data.top}),a("body").css("cursor",d.cursor)}function d(d){a.fn.draggable.isDragging=!0;var e=a.data(d.data.target,"draggable"),f=e.options,g=a(".droppable").filter(function(){return d.data.target!=this}).filter(function(){var b=a.data(this,"droppable").options.accept;return b?a(b).filter(function(){return this==d.data.target}).length>0:!0});e.droppables=g;var h=e.proxy;return h||(f.proxy?(h="clone"==f.proxy?a(d.data.target).clone().insertAfter(d.data.target):f.proxy.call(d.data.target,d.data.target),e.proxy=h):h=a(d.data.target)),h.css("position","absolute"),b(d),c(d),f.onStartDrag.call(d.data.target,d),!1}function e(d){var e=a.data(d.data.target,"draggable");b(d),0!=e.options.onDrag.call(d.data.target,d)&&c(d);var f=d.data.target;return e.droppables.each(function(){var b=a(this);if(!b.droppable("options").disabled){var c=b.offset();d.pageX>c.left&&d.pageX<c.left+b.outerWidth()&&d.pageY>c.top&&d.pageY<c.top+b.outerHeight()?(this.entered||(a(this).trigger("_dragenter",[f]),this.entered=!0),a(this).trigger("_dragover",[f])):this.entered&&(a(this).trigger("_dragleave",[f]),this.entered=!1)}}),!1}function f(b){function c(){g&&g.remove(),f.proxy=null}function d(){var d=!1;return f.droppables.each(function(){var e=a(this);if(!e.droppable("options").disabled){var f=e.offset();return b.pageX>f.left&&b.pageX<f.left+e.outerWidth()&&b.pageY>f.top&&b.pageY<f.top+e.outerHeight()?(h.revert&&a(b.data.target).css({position:b.data.startPosition,left:b.data.startLeft,top:b.data.startTop}),a(this).trigger("_drop",[b.data.target]),c(),d=!0,this.entered=!1,!1):void 0}}),d||h.revert||c(),d}a.fn.draggable.isDragging=!1,e(b);var f=a.data(b.data.target,"draggable"),g=f.proxy,h=f.options;if(h.revert)if(1==d())a(b.data.target).css({position:b.data.startPosition,left:b.data.startLeft,top:b.data.startTop});else if(g){var i,j;g.parent()[0]==document.body?(i=b.data.startX-b.data.offsetWidth,j=b.data.startY-b.data.offsetHeight):(i=b.data.startLeft,j=b.data.startTop),g.animate({left:i,top:j},function(){c()})}else a(b.data.target).animate({left:b.data.startLeft,top:b.data.startTop},function(){a(b.data.target).css("position",b.data.startPosition)});else a(b.data.target).css({position:"absolute",left:b.data.left,top:b.data.top}),d();return h.onStopDrag.call(b.data.target,b),a(document).unbind(".draggable"),setTimeout(function(){a("body").css("cursor","")},100),!1}a.fn.draggable=function(b,c){return"string"==typeof b?a.fn.draggable.methods[b](this,c):this.each(function(){function c(b){var c=a.data(b.data.target,"draggable"),d=c.handle,e=a(d).offset(),f=a(d).outerWidth(),g=a(d).outerHeight(),h=b.pageY-e.top,i=e.left+f-b.pageX,j=e.top+g-b.pageY,k=b.pageX-e.left;return Math.min(h,i,j,k)>c.options.edge}var g,h=a.data(this,"draggable");h?(h.handle.unbind(".draggable"),g=a.extend(h.options,b)):g=a.extend({},a.fn.draggable.defaults,a.fn.draggable.parseOptions(this),b||{});var i=g.handle?"string"==typeof g.handle?a(g.handle,this):g.handle:a(this);return a.data(this,"draggable",{options:g,handle:i}),g.disabled?void a(this).css("cursor",""):void i.unbind(".draggable").bind("mousemove.draggable",{target:this},function(b){if(!a.fn.draggable.isDragging){var d=a.data(b.data.target,"draggable").options;c(b)?a(this).css("cursor",d.cursor):a(this).css("cursor","")}}).bind("mouseleave.draggable",{target:this},function(b){a(this).css("cursor","")}).bind("mousedown.draggable",{target:this},function(b){if(0!=c(b)){a(this).css("cursor","");var g=a(b.data.target).position(),h=a(b.data.target).offset(),i={startPosition:a(b.data.target).css("position"),startLeft:g.left,startTop:g.top,left:g.left,top:g.top,startX:b.pageX,startY:b.pageY,offsetWidth:b.pageX-h.left,offsetHeight:b.pageY-h.top,target:b.data.target,parent:a(b.data.target).parent()[0]};a.extend(b.data,i);var j=a.data(b.data.target,"draggable").options;0!=j.onBeforeDrag.call(b.data.target,b)&&(a(document).bind("mousedown.draggable",b.data,d),a(document).bind("mousemove.draggable",b.data,e),a(document).bind("mouseup.draggable",b.data,f))}})})},a.fn.draggable.methods={options:function(b){return a.data(b[0],"draggable").options},proxy:function(b){return a.data(b[0],"draggable").proxy},enable:function(b){return b.each(function(){a(this).draggable({disabled:!1})})},disable:function(b){return b.each(function(){a(this).draggable({disabled:!0})})}},a.fn.draggable.parseOptions=function(b){var c=a(b);return a.extend({},a.parser.parseOptions(b,["cursor","handle","axis",{revert:"boolean",deltaX:"number",deltaY:"number",edge:"number"}]),{disabled:c.attr("disabled")?!0:void 0})},a.fn.draggable.defaults={proxy:null,revert:!1,cursor:"move",deltaX:null,deltaY:null,handle:null,disabled:!1,edge:0,axis:null,onBeforeDrag:function(a){},onStartDrag:function(a){},onDrag:function(a){},onStopDrag:function(a){}},a.fn.draggable.isDragging=!1}(jQuery),function(a){function b(b){a(b).addClass("droppable"),a(b).bind("_dragenter",function(c,d){a.data(b,"droppable").options.onDragEnter.apply(b,[c,d])}),a(b).bind("_dragleave",function(c,d){a.data(b,"droppable").options.onDragLeave.apply(b,[c,d])}),a(b).bind("_dragover",function(c,d){a.data(b,"droppable").options.onDragOver.apply(b,[c,d])}),a(b).bind("_drop",function(c,d){a.data(b,"droppable").options.onDrop.apply(b,[c,d])})}a.fn.droppable=function(c,d){return"string"==typeof c?a.fn.droppable.methods[c](this,d):(c=c||{},this.each(function(){var d=a.data(this,"droppable");d?a.extend(d.options,c):(b(this),a.data(this,"droppable",{options:a.extend({},a.fn.droppable.defaults,a.fn.droppable.parseOptions(this),c)}))}))},a.fn.droppable.methods={options:function(b){return a.data(b[0],"droppable").options},enable:function(b){return b.each(function(){a(this).droppable({disabled:!1})})},disable:function(b){return b.each(function(){a(this).droppable({disabled:!0})})}},a.fn.droppable.parseOptions=function(b){var c=a(b);return a.extend({},a.parser.parseOptions(b,["accept"]),{disabled:c.attr("disabled")?!0:void 0})},a.fn.droppable.defaults={accept:null,disabled:!1,onDragEnter:function(a,b){},onDragOver:function(a,b){},onDragLeave:function(a,b){},onDrop:function(a,b){}}}(jQuery),function(a){a.fn.resizable=function(b,c){function d(b){var c=b.data,d=a.data(c.target,"resizable").options;if(-1!=c.dir.indexOf("e")){var e=c.startWidth+b.pageX-c.startX;e=Math.min(Math.max(e,d.minWidth),d.maxWidth),c.width=e}if(-1!=c.dir.indexOf("s")){var f=c.startHeight+b.pageY-c.startY;f=Math.min(Math.max(f,d.minHeight),d.maxHeight),c.height=f}if(-1!=c.dir.indexOf("w")){var e=c.startWidth-b.pageX+c.startX;e=Math.min(Math.max(e,d.minWidth),d.maxWidth),c.width=e,c.left=c.startLeft+c.startWidth-c.width}if(-1!=c.dir.indexOf("n")){var f=c.startHeight-b.pageY+c.startY;f=Math.min(Math.max(f,d.minHeight),d.maxHeight),c.height=f,c.top=c.startTop+c.startHeight-c.height}}function e(b){var c=b.data,d=a(c.target);d.css({left:c.left,top:c.top}),d.outerWidth()!=c.width&&d._outerWidth(c.width),d.outerHeight()!=c.height&&d._outerHeight(c.height)}function f(b){return a.fn.resizable.isResizing=!0,a.data(b.data.target,"resizable").options.onStartResize.call(b.data.target,b),!1}function g(b){return d(b),0!=a.data(b.data.target,"resizable").options.onResize.call(b.data.target,b)&&e(b),!1}function h(b){return a.fn.resizable.isResizing=!1,d(b,!0),e(b),a.data(b.data.target,"resizable").options.onStopResize.call(b.data.target,b),a(document).unbind(".resizable"),a("body").css("cursor",""),!1}return"string"==typeof b?a.fn.resizable.methods[b](this,c):this.each(function(){function c(b){var c=a(b.data.target),e="",f=c.offset(),g=c.outerWidth(),h=c.outerHeight(),i=d.edge;b.pageY>f.top&&b.pageY<f.top+i?e+="n":b.pageY<f.top+h&&b.pageY>f.top+h-i&&(e+="s"),b.pageX>f.left&&b.pageX<f.left+i?e+="w":b.pageX<f.left+g&&b.pageX>f.left+g-i&&(e+="e");for(var j=d.handles.split(","),k=0;k<j.length;k++){var l=j[k].replace(/(^\s*)|(\s*$)/g,"");if("all"==l||l==e)return e}return""}var d=null,e=a.data(this,"resizable");e?(a(this).unbind(".resizable"),d=a.extend(e.options,b||{})):(d=a.extend({},a.fn.resizable.defaults,a.fn.resizable.parseOptions(this),b||{}),a.data(this,"resizable",{options:d})),1!=d.disabled&&a(this).bind("mousemove.resizable",{target:this},function(b){if(!a.fn.resizable.isResizing){var d=c(b);""==d?a(b.data.target).css("cursor",""):a(b.data.target).css("cursor",d+"-resize")}}).bind("mouseleave.resizable",{target:this},function(b){a(b.data.target).css("cursor","")}).bind("mousedown.resizable",{target:this},function(b){function d(c){var d=parseInt(a(b.data.target).css(c));return isNaN(d)?0:d}var e=c(b);if(""!=e){var i={target:b.data.target,dir:e,startLeft:d("left"),startTop:d("top"),left:d("left"),top:d("top"),startX:b.pageX,startY:b.pageY,startWidth:a(b.data.target).outerWidth(),startHeight:a(b.data.target).outerHeight(),width:a(b.data.target).outerWidth(),height:a(b.data.target).outerHeight(),deltaWidth:a(b.data.target).outerWidth()-a(b.data.target).width(),deltaHeight:a(b.data.target).outerHeight()-a(b.data.target).height()};a(document).bind("mousedown.resizable",i,f),a(document).bind("mousemove.resizable",i,g),a(document).bind("mouseup.resizable",i,h),a("body").css("cursor",e+"-resize")}})})},a.fn.resizable.methods={options:function(b){return a.data(b[0],"resizable").options},enable:function(b){return b.each(function(){a(this).resizable({disabled:!1})})},disable:function(b){return b.each(function(){a(this).resizable({disabled:!0})})}},a.fn.resizable.parseOptions=function(b){var c=a(b);return a.extend({},a.parser.parseOptions(b,["handles",{minWidth:"number",minHeight:"number",maxWidth:"number",maxHeight:"number",edge:"number"}]),{disabled:c.attr("disabled")?!0:void 0})},a.fn.resizable.defaults={disabled:!1,handles:"n, e, s, w, ne, se, sw, nw, all",minWidth:10,minHeight:10,maxWidth:1e4,maxHeight:1e4,edge:5,onStartResize:function(a){},onResize:function(a){},onStopResize:function(a){}},a.fn.resizable.isResizing=!1}(jQuery),function($){function _1(a){a._remove()}function _3(a,b){var c=$.data(a,"panel").options,d=$.data(a,"panel").panel,e=d.children("div.panel-header"),f=d.children("div.panel-body");b&&$.extend(c,{width:b.width,height:b.height,left:b.left,top:b.top}),c.fit?$.extend(c,d._fit()):d._fit(!1),d.css({left:c.left,top:c.top}),isNaN(c.width)?d.width("auto"):d._outerWidth(c.width),e.add(f)._outerWidth(d.width()),isNaN(c.height)?f.height("auto"):(d._outerHeight(c.height),f._outerHeight(d.height()-e._outerHeight())),d.css("height",""),c.onResize.apply(a,[c.width,c.height]),$(a).find(">div,>form>div").triggerHandler("_resize")}function _a(a,b){var c=$.data(a,"panel").options,d=$.data(a,"panel").panel;b&&(null!=b.left&&(c.left=b.left),null!=b.top&&(c.top=b.top)),d.css({left:c.left,top:c.top}),c.onMove.apply(a,[c.left,c.top])}function _f(a){$(a).addClass("panel-body");var b=$('<div class="panel"></div>').insertBefore(a);return b[0].appendChild(a),b.bind("_resize",function(){var b=$.data(a,"panel").options;return 1==b.fit&&_3(a),!1}),b}function _13(_14){var _15=$.data(_14,"panel").options,_16=$.data(_14,"panel").panel;if(_15.tools&&"string"==typeof _15.tools&&_16.find(">div.panel-header>div.panel-tool .panel-tool-a").appendTo(_15.tools),_1(_16.children("div.panel-header")),_15.title&&!_15.noheader){var _17=$('<div class="panel-header"><div class="panel-title">'+_15.title+"</div></div>").prependTo(_16);_15.iconCls&&(_17.find(".panel-title").addClass("panel-with-icon"),$('<div class="panel-icon"></div>').addClass(_15.iconCls).appendTo(_17));var _18=$('<div class="panel-tool"></div>').appendTo(_17);if(_18.bind("click",function(a){a.stopPropagation()}),_15.tools)if($.isArray(_15.tools))for(var i=0;i<_15.tools.length;i++){var t=$('<a href="javascript:void(0)"></a>').addClass(_15.tools[i].iconCls).appendTo(_18);_15.tools[i].handler&&t.bind("click",eval(_15.tools[i].handler))}else $(_15.tools).children().each(function(){$(this).addClass($(this).attr("iconCls")).addClass("panel-tool-a").appendTo(_18)});_15.collapsible&&$('<a class="panel-tool-collapse" href="javascript:void(0)"></a>').appendTo(_18).bind("click",function(){return 1==_15.collapsed?_3c(_14,!0):_2c(_14,!0),!1}),_15.minimizable&&$('<a class="panel-tool-min" href="javascript:void(0)"></a>').appendTo(_18).bind("click",function(){return _47(_14),!1}),_15.maximizable&&$('<a class="panel-tool-max" href="javascript:void(0)"></a>').appendTo(_18).bind("click",function(){return 1==_15.maximized?_4b(_14):_2b(_14),!1}),_15.closable&&$('<a class="panel-tool-close" href="javascript:void(0)"></a>').appendTo(_18).bind("click",function(){return _19(_14),!1}),_16.children("div.panel-body").removeClass("panel-body-noheader")}else _16.children("div.panel-body").addClass("panel-body-noheader")}function _1a(a){function b(b){$(a).html(b),$.parser&&$.parser.parse($(a))}var c=$.data(a,"panel"),d=c.options;if(d.href){if(!c.isLoaded||!d.cache){if(0==d.onBeforeLoad.call(a))return;c.isLoaded=!1,_1e(a),d.loadingMessage&&$(a).html($('<div class="panel-loading"></div>').html(d.loadingMessage)),$.ajax({url:d.href,cache:!1,dataType:"html",success:function(e){b(d.extractor.call(a,e)),d.onLoad.apply(a,arguments),c.isLoaded=!0}})}}else d.content&&(c.isLoaded||(_1e(a),b(d.content),c.isLoaded=!0))}function _1e(a){var b=$(a);b.find(".combo-f").each(function(){$(this).combo("destroy")}),b.find(".m-btn").each(function(){$(this).menubutton("destroy")}),b.find(".s-btn").each(function(){$(this).splitbutton("destroy")}),b.find(".tooltip-f").each(function(){$(this).tooltip("destroy")})}function _23(a){$(a).find("div.panel:visible,div.accordion:visible,div.tabs-container:visible,div.layout:visible").each(function(){$(this).triggerHandler("_resize",[!0])})}function _25(a,b){var c=$.data(a,"panel").options,d=$.data(a,"panel").panel;if(1==b||0!=c.onBeforeOpen.call(a)){d.show(),c.closed=!1,c.minimized=!1;var e=d.children("div.panel-header").find("a.panel-tool-restore");e.length&&(c.maximized=!0),c.onOpen.call(a),1==c.maximized&&(c.maximized=!1,_2b(a)),1==c.collapsed&&(c.collapsed=!1,_2c(a)),c.collapsed||(_1a(a),_23(a))}}function _19(a,b){var c=$.data(a,"panel").options,d=$.data(a,"panel").panel;(1==b||0!=c.onBeforeClose.call(a))&&(d._fit(!1),d.hide(),c.closed=!0,c.onClose.call(a))}function _31(a,b){var c=$.data(a,"panel").options,d=$.data(a,"panel").panel;(1==b||0!=c.onBeforeDestroy.call(a))&&(_1e(a),_1(d),c.onDestroy.call(a))}function _2c(a,b){var c=$.data(a,"panel").options,d=$.data(a,"panel").panel,e=d.children("div.panel-body"),f=d.children("div.panel-header").find("a.panel-tool-collapse");1!=c.collapsed&&(e.stop(!0,!0),0!=c.onBeforeCollapse.call(a)&&(f.addClass("panel-tool-expand"),1==b?e.slideUp("normal",function(){c.collapsed=!0,c.onCollapse.call(a)}):(e.hide(),c.collapsed=!0,c.onCollapse.call(a))))}function _3c(a,b){var c=$.data(a,"panel").options,d=$.data(a,"panel").panel,e=d.children("div.panel-body"),f=d.children("div.panel-header").find("a.panel-tool-collapse");0!=c.collapsed&&(e.stop(!0,!0),0!=c.onBeforeExpand.call(a)&&(f.removeClass("panel-tool-expand"),1==b?e.slideDown("normal",function(){c.collapsed=!1,c.onExpand.call(a),_1a(a),_23(a)}):(e.show(),c.collapsed=!1,c.onExpand.call(a),_1a(a),_23(a))))}function _2b(a){var b=$.data(a,"panel").options,c=$.data(a,"panel").panel,d=c.children("div.panel-header").find("a.panel-tool-max");1!=b.maximized&&(d.addClass("panel-tool-restore"),$.data(a,"panel").original||($.data(a,"panel").original={width:b.width,height:b.height,left:b.left,top:b.top,fit:b.fit}),b.left=0,b.top=0,b.fit=!0,_3(a),b.minimized=!1,b.maximized=!0,b.onMaximize.call(a))}function _47(a){var b=$.data(a,"panel").options,c=$.data(a,"panel").panel;c._fit(!1),c.hide(),b.minimized=!0,b.maximized=!1,b.onMinimize.call(a)}function _4b(a){var b=$.data(a,"panel").options,c=$.data(a,"panel").panel,d=c.children("div.panel-header").find("a.panel-tool-max");0!=b.maximized&&(c.show(),d.removeClass("panel-tool-restore"),$.extend(b,$.data(a,"panel").original),_3(a),b.minimized=!1,b.maximized=!1,$.data(a,"panel").original=null,b.onRestore.call(a))}function _50(a){var b=$.data(a,"panel").options,c=$.data(a,"panel").panel,d=$(a).panel("header"),e=$(a).panel("body");c.css(b.style),c.addClass(b.cls),b.border?(d.removeClass("panel-header-noborder"),e.removeClass("panel-body-noborder")):(d.addClass("panel-header-noborder"),e.addClass("panel-body-noborder")),d.addClass(b.headerCls),e.addClass(b.bodyCls),b.id?$(a).attr("id",b.id):$(a).attr("id","")}function _56(a,b){$.data(a,"panel").options.title=b,$(a).panel("header").find("div.panel-title").html(b)}$.fn._remove=function(){return this.each(function(){$(this).remove();try{this.outerHTML=""}catch(a){}})};var TO=!1,_59=!0;$(window).unbind(".panel").bind("resize.panel",function(){_59&&(TO!==!1&&clearTimeout(TO),TO=setTimeout(function(){_59=!1;var a=$("body.layout");a.length?a.layout("resize"):$("body").children("div.panel,div.accordion,div.tabs-container,div.layout").triggerHandler("_resize"),_59=!0,TO=!1},200))}),$.fn.panel=function(a,b){return"string"==typeof a?$.fn.panel.methods[a](this,b):(a=a||{},this.each(function(){var b,c=$.data(this,"panel");c?(b=$.extend(c.options,a),c.isLoaded=!1):(b=$.extend({},$.fn.panel.defaults,$.fn.panel.parseOptions(this),a),$(this).attr("title",""),c=$.data(this,"panel",{options:b,panel:_f(this),isLoaded:!1})),_13(this),_50(this),1==b.doSize&&(c.panel.css("display","block"),_3(this)),1==b.closed||1==b.minimized?c.panel.hide():_25(this)}))},$.fn.panel.methods={options:function(a){return $.data(a[0],"panel").options},panel:function(a){return $.data(a[0],"panel").panel},header:function(a){return $.data(a[0],"panel").panel.find(">div.panel-header")},body:function(a){return $.data(a[0],"panel").panel.find(">div.panel-body")},setTitle:function(a,b){return a.each(function(){_56(this,b)})},open:function(a,b){return a.each(function(){_25(this,b)})},close:function(a,b){return a.each(function(){_19(this,b)})},destroy:function(a,b){return a.each(function(){_31(this,b)})},refresh:function(a,b){return a.each(function(){$.data(this,"panel").isLoaded=!1,b&&($.data(this,"panel").options.href=b),_1a(this)})},resize:function(a,b){return a.each(function(){_3(this,b)})},move:function(a,b){return a.each(function(){_a(this,b)})},maximize:function(a){return a.each(function(){_2b(this)})},minimize:function(a){return a.each(function(){_47(this)})},restore:function(a){return a.each(function(){_4b(this)})},collapse:function(a,b){return a.each(function(){_2c(this,b)})},expand:function(a,b){return a.each(function(){_3c(this,b)})}},$.fn.panel.parseOptions=function(a){var b=$(a);return $.extend({},$.parser.parseOptions(a,["id","width","height","left","top","title","iconCls","cls","headerCls","bodyCls","tools","href",{cache:"boolean",fit:"boolean",border:"boolean",noheader:"boolean"},{collapsible:"boolean",minimizable:"boolean",maximizable:"boolean"},{closable:"boolean",collapsed:"boolean",minimized:"boolean",maximized:"boolean",closed:"boolean"}]),{loadingMessage:void 0!=b.attr("loadingMessage")?b.attr("loadingMessage"):void 0})},$.fn.panel.defaults={id:null,title:null,iconCls:null,width:"auto",height:"auto",left:null,top:null,cls:null,headerCls:null,bodyCls:null,style:{},href:null,cache:!0,fit:!1,border:!0,doSize:!0,noheader:!1,content:null,collapsible:!1,minimizable:!1,maximizable:!1,closable:!1,collapsed:!1,minimized:!1,maximized:!1,closed:!1,tools:null,href:null,loadingMessage:"Loading...",extractor:function(a){var b=/<body[^>]*>((.|[\n\r])*)<\/body>/im,c=b.exec(a);return c?c[1]:a},onBeforeLoad:function(){},onLoad:function(){},onBeforeOpen:function(){},onOpen:function(){},onBeforeClose:function(){},onClose:function(){},onBeforeDestroy:function(){},onDestroy:function(){},onResize:function(a,b){},onMove:function(a,b){},onMaximize:function(){},onRestore:function(){},onMinimize:function(){},onBeforeCollapse:function(){},onBeforeExpand:function(){},onCollapse:function(){},onExpand:function(){}}}(jQuery),function(a){function b(b){function c(a){var b=a.panel("options");return Math.min(Math.max(b.height,b.minHeight),b.maxHeight)}function d(a){var b=a.panel("options");return Math.min(Math.max(b.width,b.minWidth),b.maxWidth)}function e(a,b){if(a.length){var d=a.panel("options"),e=c(a);a.panel("resize",{width:k.width(),height:e,left:0,top:"n"==b?0:k.height()-e}),l.height-=e,"n"==b&&(l.top+=e,!d.split&&d.border&&l.top--),!d.split&&d.border&&l.height++}}function f(a,b){if(a.length){var c=a.panel("options"),e=d(a);a.panel("resize",{width:e,height:l.height,left:"e"==b?k.width()-e:0,top:l.top}),l.width-=e,"w"==b&&(l.left+=e,!c.split&&c.border&&l.left--),!c.split&&c.border&&l.width++}}var g=a.data(b,"layout"),i=g.options,j=g.panels,k=a(b);"BODY"==b.tagName?k._fit():i.fit?k.css(k._fit()):k._fit(!1);var l={top:0,left:0,width:k.width(),height:k.height()};e(h(j.expandNorth)?j.expandNorth:j.north,"n"),e(h(j.expandSouth)?j.expandSouth:j.south,"s"),f(h(j.expandEast)?j.expandEast:j.east,"e"),f(h(j.expandWest)?j.expandWest:j.west,"w"),j.center.panel("resize",l)}function c(c){function e(b){b.children("div").each(function(){var b=a.fn.layout.parsePanelOptions(this);"north,south,east,west,center".indexOf(b.region)>=0&&d(c,b,this)})}var f=a(c);f.addClass("layout"),e(f.children("form").length?f.children("form"):f),f.append('<div class="layout-split-proxy-h"></div><div class="layout-split-proxy-v"></div>'),f.bind("_resize",function(d,e){var f=a.data(c,"layout").options;return(1==f.fit||e)&&b(c),!1})}function d(c,d,e){d.region=d.region||"center";var g=a.data(c,"layout").panels,h=a(c),i=d.region;if(!g[i].length){var k=a(e);k.length||(k=a("<div></div>").appendTo(h));var l=a.extend({},a.fn.layout.paneldefaults,{width:k.length?parseInt(k[0].style.width)||k.outerWidth():"auto",height:k.length?parseInt(k[0].style.height)||k.outerHeight():"auto",doSize:!1,collapsible:!0,cls:"layout-panel layout-panel-"+i,bodyCls:"layout-body",onOpen:function(){var b=a(this).panel("header").children("div.panel-tool");b.children("a.panel-tool-collapse").hide();var d={north:"up",south:"down",east:"right",west:"left"};if(d[i]){var e="layout-button-"+d[i],g=b.children("a."+e);g.length||(g=a('<a href="javascript:void(0)"></a>').addClass(e).appendTo(b),g.bind("click",{dir:i},function(a){return f(c,a.data.dir),!1})),a(this).panel("options").collapsible?g.show():g.hide()}}},d);if(k.panel(l),g[i]=k,k.panel("options").split){var m=k.panel("panel");m.addClass("layout-split-"+i);var n="";"north"==i&&(n="s"),"south"==i&&(n="n"),"east"==i&&(n="w"),"west"==i&&(n="e"),m.resizable(a.extend({},{handles:n,onStartResize:function(b){if(j=!0,"north"==i||"south"==i)var d=a(">div.layout-split-proxy-v",c);else var d=a(">div.layout-split-proxy-h",c);var e={display:"block"};"north"==i?(e.top=parseInt(m.css("top"))+m.outerHeight()-d.height(),e.left=parseInt(m.css("left")),e.width=m.outerWidth(),e.height=d.height()):"south"==i?(e.top=parseInt(m.css("top")),e.left=parseInt(m.css("left")),e.width=m.outerWidth(),e.height=d.height()):"east"==i?(e.top=parseInt(m.css("top"))||0,e.left=parseInt(m.css("left"))||0,e.width=d.width(),e.height=m.outerHeight()):"west"==i&&(e.top=parseInt(m.css("top"))||0,e.left=m.outerWidth()-d.width(),e.width=d.width(),e.height=m.outerHeight()),d.css(e),a('<div class="layout-mask"></div>').css({left:0,top:0,width:h.width(),height:h.height()}).appendTo(h)},onResize:function(b){if("north"==i||"south"==i){var d=a(">div.layout-split-proxy-v",c);d.css("top",b.pageY-a(c).offset().top-d.height()/2)}else{var d=a(">div.layout-split-proxy-h",c);d.css("left",b.pageX-a(c).offset().left-d.width()/2)}return!1},onStopResize:function(a){h.children("div.layout-split-proxy-v,div.layout-split-proxy-h").hide(),k.panel("resize",a.data),b(c),j=!1,h.find(">div.layout-mask").remove()}},d))}}}function e(b,c){var d=a.data(b,"layout").panels;if(d[c].length){d[c].panel("destroy"),d[c]=a();var e="expand"+c.substring(0,1).toUpperCase()+c.substring(1);d[e]&&(d[e].panel("destroy"),d[e]=void 0)}}function f(b,c,d){function e(d){var e;"east"==d?e="layout-button-left":"west"==d?e="layout-button-right":"north"==d?e="layout-button-down":"south"==d&&(e="layout-button-up");var f=a("<div></div>").appendTo(b);return f.panel(a.extend({},a.fn.layout.paneldefaults,{cls:"layout-expand layout-expand-"+d,title:"&nbsp;",closed:!0,doSize:!1,tools:[{iconCls:e,handler:function(){return g(b,c),!1}}]})),f.panel("panel").hover(function(){a(this).addClass("layout-expand-over")},function(){a(this).removeClass("layout-expand-over")}),f}function i(){var d=a(b),e=k.center.panel("options");if("east"==c){var f=e.width+m.width-28;return(m.split||!m.border)&&f++,{resizeC:{width:f},expand:{left:d.width()-m.width},expandP:{top:e.top,left:d.width()-28,width:28,height:e.height},collapse:{left:d.width(),top:e.top,height:e.height}}}if("west"==c){var f=e.width+m.width-28;return(m.split||!m.border)&&f++,{resizeC:{width:f,left:27},expand:{left:0},expandP:{left:0,top:e.top,width:28,height:e.height},collapse:{left:-m.width,top:e.top,height:e.height}}}if("north"==c){var g=e.height;return h(k.expandNorth)||(g+=m.height-28+(m.split||!m.border?1:0)),k.east.add(k.west).add(k.expandEast).add(k.expandWest).panel("resize",{top:27,height:g}),{resizeC:{top:27,height:g},expand:{top:0},expandP:{top:0,left:0,width:d.width(),height:28},collapse:{top:-m.height,width:d.width()}}}if("south"==c){var g=e.height;return h(k.expandSouth)||(g+=m.height-28+(m.split||!m.border?1:0)),k.east.add(k.west).add(k.expandEast).add(k.expandWest).panel("resize",{height:g}),{resizeC:{height:g},expand:{top:d.height()-m.height},expandP:{top:d.height()-28,left:0,width:d.width(),height:28},collapse:{top:d.height(),width:d.width()}}}}void 0==d&&(d="normal");var k=a.data(b,"layout").panels,l=k[c],m=l.panel("options");if(0!=m.onBeforeCollapse.call(l)){var n="expand"+c.substring(0,1).toUpperCase()+c.substring(1);k[n]||(k[n]=e(c),k[n].panel("panel").bind("click",function(){var d=i();return l.panel("expand",!1).panel("open").panel("resize",d.collapse),l.panel("panel").animate(d.expand,function(){a(this).unbind(".layout").bind("mouseleave.layout",{region:c},function(a){1!=j&&f(b,a.data.region)})}),!1}));var o=i();h(k[n])||k.center.panel("resize",o.resizeC),l.panel("panel").animate(o.collapse,d,function(){l.panel("collapse",!1).panel("close"),k[n].panel("open").panel("resize",o.expandP),a(this).unbind(".layout")})}}function g(c,d){function e(){var b=a(c),e=f.center.panel("options");return"east"==d&&f.expandEast?{collapse:{left:b.width(),top:e.top,height:e.height},expand:{left:b.width()-f.east.panel("options").width}}:"west"==d&&f.expandWest?{collapse:{left:-f.west.panel("options").width,top:e.top,height:e.height},expand:{left:0}}:"north"==d&&f.expandNorth?{collapse:{top:-f.north.panel("options").height,width:b.width()},expand:{top:0}}:"south"==d&&f.expandSouth?{collapse:{top:b.height(),width:b.width()},expand:{top:b.height()-f.south.panel("options").height}}:void 0}var f=a.data(c,"layout").panels,g=f[d],h=g.panel("options");if(0!=h.onBeforeExpand.call(g)){var i=e(),j="expand"+d.substring(0,1).toUpperCase()+d.substring(1);f[j]&&(f[j].panel("close"),g.panel("panel").stop(!0,!0),g.panel("expand",!1).panel("open").panel("resize",i.collapse),g.panel("panel").animate(i.expand,function(){b(c)}))}}function h(a){return a&&a.length?a.panel("panel").is(":visible"):!1}function i(b){var c=a.data(b,"layout").panels;c.east.length&&c.east.panel("options").collapsed&&f(b,"east",0),c.west.length&&c.west.panel("options").collapsed&&f(b,"west",0),c.north.length&&c.north.panel("options").collapsed&&f(b,"north",0),c.south.length&&c.south.panel("options").collapsed&&f(b,"south",0)}var j=!1;a.fn.layout=function(d,e){return"string"==typeof d?a.fn.layout.methods[d](this,e):(d=d||{},this.each(function(){var e=a.data(this,"layout");if(e)a.extend(e.options,d);else{
var f=a.extend({},a.fn.layout.defaults,a.fn.layout.parseOptions(this),d);a.data(this,"layout",{options:f,panels:{center:a(),north:a(),south:a(),east:a(),west:a()}}),c(this)}b(this),i(this)}))},a.fn.layout.methods={resize:function(a){return a.each(function(){b(this)})},panel:function(b,c){return a.data(b[0],"layout").panels[c]},collapse:function(a,b){return a.each(function(){f(this,b)})},expand:function(a,b){return a.each(function(){g(this,b)})},add:function(c,e){return c.each(function(){d(this,e),b(this),a(this).layout("panel",e.region).panel("options").collapsed&&f(this,e.region,0)})},remove:function(a,c){return a.each(function(){e(this,c),b(this)})}},a.fn.layout.parseOptions=function(b){return a.extend({},a.parser.parseOptions(b,[{fit:"boolean"}]))},a.fn.layout.defaults={fit:!1},a.fn.layout.parsePanelOptions=function(b){a(b);return a.extend({},a.fn.panel.parseOptions(b),a.parser.parseOptions(b,["region",{split:"boolean",minWidth:"number",minHeight:"number",maxWidth:"number",maxHeight:"number"}]))},a.fn.layout.paneldefaults=a.extend({},a.fn.panel.defaults,{region:null,split:!1,minWidth:10,minHeight:10,maxWidth:1e4,maxHeight:1e4})}(jQuery),function(a){function b(b,c){var d=a.data(b,"window").options;c&&a.extend(d,c),a(b).panel("resize",d)}function c(b,c){var d=a.data(b,"window");c&&(null!=c.left&&(d.options.left=c.left),null!=c.top&&(d.options.top=c.top)),a(b).panel("move",d.options),d.shadow&&d.shadow.css({left:d.options.left,top:d.options.top})}function d(b,d){var e=a.data(b,"window"),f=e.options,g=f.width;if(isNaN(g)&&(g=e.window._outerWidth()),f.inline){var h=e.window.parent();f.left=(h.width()-g)/2+h.scrollLeft()}else f.left=(a(window)._outerWidth()-g)/2+a(document).scrollLeft();d&&c(b)}function e(b,d){var e=a.data(b,"window"),f=e.options,g=f.height;if(isNaN(g)&&(g=e.window._outerHeight()),f.inline){var h=e.window.parent();f.top=(h.height()-g)/2+h.scrollTop()}else f.top=(a(window)._outerHeight()-g)/2+a(document).scrollTop();d&&c(b)}function f(b){var f=a.data(b,"window"),g=a(b).panel(a.extend({},f.options,{border:!1,doSize:!0,closed:!0,cls:"window",headerCls:"window-header",bodyCls:"window-body "+(f.options.noheader?"window-body-noheader":""),onBeforeDestroy:function(){return 0==f.options.onBeforeDestroy.call(b)?!1:(f.shadow&&f.shadow.remove(),void(f.mask&&f.mask.remove()))},onClose:function(){f.shadow&&f.shadow.hide(),f.mask&&f.mask.hide(),f.options.onClose.call(b)},onOpen:function(){f.mask&&f.mask.css({display:"block",zIndex:a.fn.window.defaults.zIndex++}),f.shadow&&f.shadow.css({display:"block",zIndex:a.fn.window.defaults.zIndex++,left:f.options.left,top:f.options.top,width:f.window._outerWidth(),height:f.window._outerHeight()}),f.window.css("z-index",a.fn.window.defaults.zIndex++),f.options.onOpen.call(b)},onResize:function(c,d){var e=a(this).panel("options");a.extend(f.options,{width:e.width,height:e.height,left:e.left,top:e.top}),f.shadow&&f.shadow.css({left:f.options.left,top:f.options.top,width:f.window._outerWidth(),height:f.window._outerHeight()}),f.options.onResize.call(b,c,d)},onMinimize:function(){f.shadow&&f.shadow.hide(),f.mask&&f.mask.hide(),f.options.onMinimize.call(b)},onBeforeCollapse:function(){return 0==f.options.onBeforeCollapse.call(b)?!1:void(f.shadow&&f.shadow.hide())},onExpand:function(){f.shadow&&f.shadow.show(),f.options.onExpand.call(b)}}));f.window=g.panel("panel"),f.mask&&f.mask.remove(),1==f.options.modal&&(f.mask=a('<div class="window-mask"></div>').insertAfter(f.window),f.mask.css({width:f.options.inline?f.mask.parent().width():h().width,height:f.options.inline?f.mask.parent().height():h().height,display:"none"})),f.shadow&&f.shadow.remove(),1==f.options.shadow&&(f.shadow=a('<div class="window-shadow"></div>').insertAfter(f.window),f.shadow.css({display:"none"})),null==f.options.left&&d(b),null==f.options.top&&e(b),c(b),0==f.options.closed&&g.window("open")}function g(c){var d=a.data(c,"window");d.window.draggable({handle:">div.panel-header>div.panel-title",disabled:0==d.options.draggable,onStartDrag:function(b){d.mask&&d.mask.css("z-index",a.fn.window.defaults.zIndex++),d.shadow&&d.shadow.css("z-index",a.fn.window.defaults.zIndex++),d.window.css("z-index",a.fn.window.defaults.zIndex++),d.proxy||(d.proxy=a('<div class="window-proxy"></div>').insertAfter(d.window)),d.proxy.css({display:"none",zIndex:a.fn.window.defaults.zIndex++,left:b.data.left,top:b.data.top}),d.proxy._outerWidth(d.window._outerWidth()),d.proxy._outerHeight(d.window._outerHeight()),setTimeout(function(){d.proxy&&d.proxy.show()},500)},onDrag:function(a){return d.proxy.css({display:"block",left:a.data.left,top:a.data.top}),!1},onStopDrag:function(b){d.options.left=b.data.left,d.options.top=b.data.top,a(c).window("move"),d.proxy.remove(),d.proxy=null}}),d.window.resizable({disabled:0==d.options.resizable,onStartResize:function(b){d.pmask=a('<div class="window-proxy-mask"></div>').insertAfter(d.window),d.pmask.css({zIndex:a.fn.window.defaults.zIndex++,left:b.data.left,top:b.data.top,width:d.window._outerWidth(),height:d.window._outerHeight()}),d.proxy||(d.proxy=a('<div class="window-proxy"></div>').insertAfter(d.window)),d.proxy.css({zIndex:a.fn.window.defaults.zIndex++,left:b.data.left,top:b.data.top}),d.proxy._outerWidth(b.data.width),d.proxy._outerHeight(b.data.height)},onResize:function(a){return d.proxy.css({left:a.data.left,top:a.data.top}),d.proxy._outerWidth(a.data.width),d.proxy._outerHeight(a.data.height),!1},onStopResize:function(e){a.extend(d.options,{left:e.data.left,top:e.data.top,width:e.data.width,height:e.data.height}),b(c),d.pmask.remove(),d.pmask=null,d.proxy.remove(),d.proxy=null}})}function h(){return"BackCompat"==document.compatMode?{width:Math.max(document.body.scrollWidth,document.body.clientWidth),height:Math.max(document.body.scrollHeight,document.body.clientHeight)}:{width:Math.max(document.documentElement.scrollWidth,document.documentElement.clientWidth),height:Math.max(document.documentElement.scrollHeight,document.documentElement.clientHeight)}}a(window).resize(function(){a("body>div.window-mask").css({width:a(window)._outerWidth(),height:a(window)._outerHeight()}),setTimeout(function(){a("body>div.window-mask").css({width:h().width,height:h().height})},50)}),a.fn.window=function(b,c){if("string"==typeof b){var d=a.fn.window.methods[b];return d?d(this,c):this.panel(b,c)}return b=b||{},this.each(function(){var c=a.data(this,"window");c?a.extend(c.options,b):(c=a.data(this,"window",{options:a.extend({},a.fn.window.defaults,a.fn.window.parseOptions(this),b)}),c.options.inline||document.body.appendChild(this)),f(this),g(this)})},a.fn.window.methods={options:function(b){var c=b.panel("options"),d=a.data(b[0],"window").options;return a.extend(d,{closed:c.closed,collapsed:c.collapsed,minimized:c.minimized,maximized:c.maximized})},window:function(b){return a.data(b[0],"window").window},resize:function(a,c){return a.each(function(){b(this,c)})},move:function(a,b){return a.each(function(){c(this,b)})},hcenter:function(a){return a.each(function(){d(this,!0)})},vcenter:function(a){return a.each(function(){e(this,!0)})},center:function(a){return a.each(function(){d(this),e(this),c(this)})}},a.fn.window.parseOptions=function(b){return a.extend({},a.fn.panel.parseOptions(b),a.parser.parseOptions(b,[{draggable:"boolean",resizable:"boolean",shadow:"boolean",modal:"boolean",inline:"boolean"}]))},a.fn.window.defaults=a.extend({},a.fn.panel.defaults,{zIndex:9e3,draggable:!0,resizable:!0,shadow:!0,modal:!1,inline:!1,title:"New Window",collapsible:!0,minimizable:!0,maximizable:!0,closable:!0,closed:!1})}(jQuery),function($){function _1(a){for(var b=document.createElement("div");a.firstChild;)b.appendChild(a.firstChild);a.appendChild(b);var c=$(b);return c.attr("style",$(a).attr("style")),$(a).removeAttr("style").css("overflow","hidden"),c.panel({border:!1,doSize:!1,bodyCls:"dialog-content"}),c}function _4(_5){var _6=$.data(_5,"dialog").options,_7=$.data(_5,"dialog").contentPanel;if(_6.toolbar)if($.isArray(_6.toolbar)){$(_5).find("div.dialog-toolbar").remove();for(var _8=$('<div class="dialog-toolbar"><table cellspacing="0" cellpadding="0"><tr></tr></table></div>').prependTo(_5),tr=_8.find("tr"),i=0;i<_6.toolbar.length;i++){var _9=_6.toolbar[i];if("-"==_9)$('<td><div class="dialog-tool-separator"></div></td>').appendTo(tr);else{var td=$("<td></td>").appendTo(tr),_a=$('<a href="javascript:void(0)"></a>').appendTo(td);_a[0].onclick=eval(_9.handler||function(){})}}}else $(_6.toolbar).addClass("dialog-toolbar").prependTo(_5),$(_6.toolbar).show();else $(_5).find("div.dialog-toolbar").remove();if(_6.buttons)if($.isArray(_6.buttons)){$(_5).find("div.dialog-button").remove();for(var _b=$('<div class="dialog-button"></div>').appendTo(_5),i=0;i<_6.buttons.length;i++){var p=_6.buttons[i],_c=$('<a href="javascript:void(0)"></a>').appendTo(_b);p.handler&&(_c[0].onclick=p.handler)}}else $(_6.buttons).addClass("dialog-button").appendTo(_5),$(_6.buttons).show();else $(_5).find("div.dialog-button").remove();var _d=_6.href,_e=_6.content;_6.href=null,_6.content=null,_7.panel({closed:_6.closed,cache:_6.cache,href:_d,content:_e,onLoad:function(){"auto"==_6.height&&$(_5).window("resize"),_6.onLoad.apply(_5,arguments)}}),$(_5).window($.extend({},_6,{onOpen:function(){_7.panel("options").closed&&_7.panel("open"),_6.onOpen&&_6.onOpen.call(_5)},onResize:function(a,b){var c=$(_5);_7.panel("panel").show(),_7.panel("resize",{width:c.width(),height:"auto"==b?"auto":c.height()-c.children("div.dialog-toolbar")._outerHeight()-c.children("div.dialog-button")._outerHeight()}),_6.onResize&&_6.onResize.call(_5,a,b)}})),_6.href=_d,_6.content=_e}function _12(a,b){var c=$.data(a,"dialog").contentPanel;c.panel("refresh",b)}$.fn.dialog=function(a,b){if("string"==typeof a){var c=$.fn.dialog.methods[a];return c?c(this,b):this.window(a,b)}return a=a||{},this.each(function(){var b=$.data(this,"dialog");b?$.extend(b.options,a):$.data(this,"dialog",{options:$.extend({},$.fn.dialog.defaults,$.fn.dialog.parseOptions(this),a),contentPanel:_1(this)}),_4(this)})},$.fn.dialog.methods={options:function(a){var b=$.data(a[0],"dialog").options,c=a.panel("options");$.extend(b,{closed:c.closed,collapsed:c.collapsed,minimized:c.minimized,maximized:c.maximized});$.data(a[0],"dialog").contentPanel;return b},dialog:function(a){return a.window("window")},refresh:function(a,b){return a.each(function(){_12(this,b)})}},$.fn.dialog.parseOptions=function(a){return $.extend({},$.fn.window.parseOptions(a),$.parser.parseOptions(a,["toolbar","buttons"]))},$.fn.dialog.defaults=$.extend({},$.fn.window.defaults,{title:"New Dialog",collapsible:!1,minimizable:!1,maximizable:!1,resizable:!1,toolbar:null,buttons:null})}(jQuery),function($){function _2(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]==b)return c;return-1}function _4(a,b,c){if("string"==typeof b){for(var d=0,e=a.length;e>d;d++)if(a[d][b]==c)return void a.splice(d,1)}else{var f=_2(a,b);-1!=f&&a.splice(f,1)}}function _7(a,b,c){for(var d=0,e=a.length;e>d;d++)if(a[d][b]==c[b])return;a.push(c)}function _9(a){var b=a||$("head"),c=$.data(b[0],"ss");return c||(c=$.data(b[0],"ss",{cache:{},dirty:[]})),{add:function(a){for(var d=['<style type="text/css">'],e=0;e<a.length;e++)c.cache[a[e][0]]={width:a[e][1]};var f=0;for(var g in c.cache){var h=c.cache[g];h.index=f++,d.push(g+"{width:"+h.width+"}")}d.push("</style>"),$(d.join("\n")).appendTo(b),setTimeout(function(){b.children("style:not(:last)").remove()},0)},getRule:function(a){var c=b.children("style:last")[0],d=c.styleSheet?c.styleSheet:c.sheet||document.styleSheets[document.styleSheets.length-1],e=d.cssRules||d.rules;return e[a]},set:function(a,b){var d=c.cache[a];if(d){d.width=b;var e=this.getRule(d.index);e&&(e.style.width=b)}},remove:function(a){var b=[];for(var d in c.cache)-1==d.indexOf(a)&&b.push([d,c.cache[d].width]);c.cache={},this.add(b)},dirty:function(a){a&&c.dirty.push(a)},clean:function(){for(var a=0;a<c.dirty.length;a++)this.remove(c.dirty[a]);c.dirty=[]}}}function _19(a,b){var c=$.data(a,"datagrid").options,d=$.data(a,"datagrid").panel;if(b&&(b.width&&(c.width=b.width),b.height&&(c.height=b.height)),1==c.fit){var e=d.panel("panel").parent();c.width=e.width(),c.height=e.height()}d.panel("resize",{width:c.width,height:c.height})}function _1e(a){var b=$.data(a,"datagrid").options,c=$.data(a,"datagrid").dc,d=$.data(a,"datagrid").panel,e=d.width(),f=d.height(),g=c.view,h=c.view1,i=c.view2,j=h.children("div.datagrid-header"),k=i.children("div.datagrid-header"),l=j.find("table"),m=k.find("table");g.width(e);var n=j.children("div.datagrid-header-inner").show();h.width(n.find("table").width()),b.showHeader||n.hide(),i.width(e-h._outerWidth()),h.children("div.datagrid-header,div.datagrid-body,div.datagrid-footer").width(h.width()),i.children("div.datagrid-header,div.datagrid-body,div.datagrid-footer").width(i.width());var o;if(j.css("height",""),k.css("height",""),l.css("height",""),m.css("height",""),o=Math.max(l.height(),m.height()),l.height(o),m.height(o),j.add(k)._outerHeight(o),"auto"!=b.height){var p=f-i.children("div.datagrid-header")._outerHeight()-i.children("div.datagrid-footer")._outerHeight()-d.children("div.datagrid-toolbar")._outerHeight();d.children("div.datagrid-pager").each(function(){}),c.body1.add(c.body2).children("table.datagrid-btable-frozen").css({position:"absolute",top:c.header2._outerHeight()});var q=c.body2.children("table.datagrid-btable-frozen")._outerHeight();h.add(i).children("div.datagrid-body").css({marginTop:q,height:p-q})}g.height(i.height())}function _2e(a,b,c){function d(a,b){for(var c=0;c<b.length;c++){var d=$(a[c]),e=$(b[c]);d.css("height",""),e.css("height","");var f=Math.max(d.height(),e.height());d.css("height",f),e.css("height",f)}}function e(a){var b=0,c=0;return $(a).children().each(function(){var a=$(this);a.is(":visible")&&(c+=a._outerHeight(),b<a._outerWidth()&&(b=a._outerWidth()))}),{width:b,height:c}}var f=($.data(a,"datagrid").data.rows,$.data(a,"datagrid").options),g=$.data(a,"datagrid").dc;if(!g.body1.is(":empty")&&(!f.nowrap||f.autoRowHeight||c))if(void 0!=b){var h=f.finder.getTr(a,b,"body",1),i=f.finder.getTr(a,b,"body",2);d(h,i)}else{var h=f.finder.getTr(a,0,"allbody",1),i=f.finder.getTr(a,0,"allbody",2);if(d(h,i),f.showFooter){var h=f.finder.getTr(a,0,"allfooter",1),i=f.finder.getTr(a,0,"allfooter",2);d(h,i)}}if(_1e(a),"auto"==f.height){var j=g.body1.parent(),k=g.body2,l=e(k),m=l.height;l.width>k.width()&&(m+=18),j.height(m),k.height(m),g.view.height(g.view2.height())}g.body2.triggerHandler("scroll")}function _3f(a,b){function c(c){var d=c?1:2,g=e.finder.getTr(a,b,"body",d);(c?f.body1:f.body2).children("table.datagrid-btable-frozen").append(g)}var d=$.data(a,"datagrid"),e=d.options,f=d.dc;f.body2.children("table.datagrid-btable-frozen").length||f.body1.add(f.body2).prepend('<table class="datagrid-btable datagrid-btable-frozen" cellspacing="0" cellpadding="0"></table>'),c(!0),c(!1),_1e(a)}function _47(_48,_49){function _4a(){var _4b=[],_4c=[];return $(_48).children("thead").each(function(){var opt=$.parser.parseOptions(this,[{frozen:"boolean"}]);$(this).find("tr").each(function(){var _4d=[];$(this).find("th").each(function(){var th=$(this),col=$.extend({},$.parser.parseOptions(this,["field","align","halign","order",{sortable:"boolean",checkbox:"boolean",resizable:"boolean",fixed:"boolean"},{rowspan:"number",colspan:"number",width:"number"}]),{title:th.html()||void 0,hidden:th.attr("hidden")?!0:void 0,formatter:th.attr("formatter")?eval(th.attr("formatter")):void 0,styler:th.attr("styler")?eval(th.attr("styler")):void 0,sorter:th.attr("sorter")?eval(th.attr("sorter")):void 0});if(th.attr("editor")){var s=$.trim(th.attr("editor"));"{"==s.substr(0,1)?col.editor=eval("("+s+")"):col.editor=s}_4d.push(col)}),opt.frozen?_4b.push(_4d):_4c.push(_4d)})}),[_4b,_4c]}var _4e=$('<div class="datagrid-wrap"><div class="datagrid-view"><div class="datagrid-view1"><div class="datagrid-header"><div class="datagrid-header-inner"></div></div><div class="datagrid-body"><div class="datagrid-body-inner"></div></div><div class="datagrid-footer"><div class="datagrid-footer-inner"></div></div></div><div class="datagrid-view2"><div class="datagrid-header"><div class="datagrid-header-inner"></div></div><div class="datagrid-body"></div><div class="datagrid-footer"><div class="datagrid-footer-inner"></div></div></div></div></div>').insertAfter(_48);_4e.panel({doSize:!1}),_4e.panel("panel").addClass("datagrid").bind("_resize",function(a,b){var c=$.data(_48,"datagrid").options;return(1==c.fit||b)&&(_19(_48),setTimeout(function(){$.data(_48,"datagrid")&&_51(_48)},0)),!1}),$(_48).hide().appendTo(_4e.children("div.datagrid-view"));var cc=_4a(),_52=_4e.children("div.datagrid-view"),_53=_52.children("div.datagrid-view1"),_54=_52.children("div.datagrid-view2"),_55=_4e.closest("div.datagrid-view");_55.length||(_55=_52);var ss=_9(_55);return{panel:_4e,frozenColumns:cc[0],columns:cc[1],dc:{view:_52,view1:_53,view2:_54,header1:_53.children("div.datagrid-header").children("div.datagrid-header-inner"),header2:_54.children("div.datagrid-header").children("div.datagrid-header-inner"),body1:_53.children("div.datagrid-body").children("div.datagrid-body-inner"),body2:_54.children("div.datagrid-body"),footer1:_53.children("div.datagrid-footer").children("div.datagrid-footer-inner"),footer2:_54.children("div.datagrid-footer").children("div.datagrid-footer-inner")},ss:ss}}function _56(a){function b(a,b,c){if(b){$(a).show(),$(a).empty();var f=[],g=[];e.sortName&&(f=e.sortName.split(","),g=e.sortOrder.split(","));for(var h=$('<table class="datagrid-htable" border="0" cellspacing="0" cellpadding="0"><tbody></tbody></table>').appendTo(a),i=0;i<b.length;i++)for(var j=$('<tr class="datagrid-header-row"></tr>').appendTo($("tbody",h)),k=b[i],l=0;l<k.length;l++){var m=k[l];/\(元\)/.test(m.title)&&"undefined"==typeof m.precision&&(m.precision=2);var n="";m.rowspan&&(n+='rowspan="'+m.rowspan+'" '),m.colspan&&(n+='colspan="'+m.colspan+'" ');var o=$("<td "+n+"></td>").appendTo(j);if(m.checkbox)o.attr("field",m.field),$('<div class="datagrid-header-check"></div>').html('<input type="checkbox"/>').appendTo(o);else if(m.field){o.attr("field",m.field),o.append('<div class="datagrid-cell"><span></span><span class="datagrid-sort-icon"></span></div>'),$("span",o).html(m.title),$("span.datagrid-sort-icon",o).html("&nbsp;");var p=o.find("div.datagrid-cell"),q=_2(f,m.field);q>=0&&p.addClass("datagrid-sort-"+g[q]),0==m.resizable&&p.attr("resizable","false"),m.width?(p._outerWidth(m.width),m.boxWidth=parseInt(p[0].style.width)):m.auto=!0,p.css("text-align",m.halign||m.align||""),m.cellClass=d.cellClassPrefix+"-"+m.field.replace(/[\.|\s]/g,"-"),p.addClass(m.cellClass).css("width","")}else $('<div class="datagrid-cell-group"></div>').html(m.title).appendTo(o);m.hidden&&o.hide()}if(c&&e.rownumbers){var o=$('<td rowspan="'+e.frozenColumns.length+'"><div class="datagrid-header-rownumber"></div></td>');0==$("tr",h).length?o.wrap('<tr class="datagrid-header-row"></tr>').parent().appendTo($("tbody",h)):o.prependTo($("tr:first",h))}}}function c(){for(var b=[],c=_6e(a,!0).concat(_6e(a)),e=0;e<c.length;e++){var f=_6f(a,c[e]);f&&!f.checkbox&&b.push(["."+f.cellClass,f.boxWidth?f.boxWidth+"px":"auto"])}d.ss.add(b),d.ss.dirty(d.cellSelectorPrefix),d.cellSelectorPrefix="."+d.cellClassPrefix}var d=$.data(a,"datagrid"),e=d.options,f=d.dc,g=d.panel;if(g.panel($.extend({},e,{id:null,doSize:!1,onResize:function(b,c){setTimeout(function(){$.data(a,"datagrid")&&(_1e(a),_8d(a),e.onResize.call(g,b,c))},0)},onExpand:function(){_2e(a),e.onExpand.call(g)}})),d.rowIdPrefix="datagrid-row-r"+ ++_1,d.cellClassPrefix="datagrid-cell-c"+_1,b(f.header1,e.frozenColumns,!0),b(f.header2,e.columns,!1),c(),f.header1.add(f.header2).css("display",e.showHeader?"block":"none"),f.footer1.add(f.footer2).css("display",e.showFooter?"block":"none"),e.toolbar||$("div.datagrid-toolbar",g).remove(),$("div.datagrid-pager",g).remove(),e.pagination){var h=$('<div class="datagrid-pager"></div>');if("bottom"==e.pagePosition)h.appendTo(g);else if("top"==e.pagePosition)h.addClass("datagrid-pager-top").prependTo(g);else{var i=$('<div class="datagrid-pager datagrid-pager-top"></div>').prependTo(g);h.appendTo(g),h=h.add(i)}h.pagination({total:e.pageNumber*e.pageSize,pageNumber:e.pageNumber,pageSize:e.pageSize,pageList:e.pageList,onSelectPage:function(b,c){e.pageNumber=b,e.pageSize=c,h.pagination("refresh",{pageNumber:b,pageSize:c}),_16b(a)}}),e.pageSize=h.pagination("options").pageSize}}function _70(a){function b(a){return a.attr("datagrid-row-index")?parseInt(a.attr("datagrid-row-index")):a.attr("node-id")}function c(a){return a.length&&a.parent().length}var d=$.data(a,"datagrid"),e=d.panel,f=d.options,g=d.dc,h=g.header1.add(g.header2);h.find("input[type=checkbox]").unbind(".datagrid").bind("click.datagrid",function(b){return f.singleSelect&&f.selectOnCheck?!1:($(this).is(":checked")?_106(a):_10c(a),void b.stopPropagation())});var i=h.find("div.datagrid-cell");i.closest("td").unbind(".datagrid").bind("mouseenter.datagrid",function(){d.resizing||$(this).addClass("datagrid-header-over")}).bind("mouseleave.datagrid",function(){$(this).removeClass("datagrid-header-over")}).bind("contextmenu.datagrid",function(b){var c=$(this).attr("field");f.onHeaderContextMenu.call(a,b,c)}),i.unbind(".datagrid").bind("click.datagrid",function(b){var c=$(this).offset().left+5,e=$(this).offset().left+$(this)._outerWidth()-5;if(b.pageX<e&&b.pageX>c){var g=$(this).parent().attr("field"),h=_6f(a,g);if(!h.sortable||d.resizing)return;var j=[],k=[];f.sortName&&(j=f.sortName.split(","),k=f.sortOrder.split(","));var l=_2(j,g),m=h.order||"asc";if(l>=0){$(this).removeClass("datagrid-sort-asc datagrid-sort-desc");var n="asc"==k[l]?"desc":"asc";f.multiSort&&n==m?(j.splice(l,1),k.splice(l,1)):(k[l]=n,$(this).addClass("datagrid-sort-"+n))}else f.multiSort?(j.push(g),k.push(m)):(j=[g],k=[m],i.removeClass("datagrid-sort-asc datagrid-sort-desc")),$(this).addClass("datagrid-sort-"+m);if(f.sortName=j.join(","),f.sortOrder=k.join(","),f.remoteSort)_16b(a);else{var o=$.data(a,"datagrid").data;_c6(a,o)}f.onSortColumn.call(a,f.sortName,f.sortOrder)}}).bind("dblclick.datagrid",function(b){var c=$(this).offset().left+5,d=$(this).offset().left+$(this)._outerWidth()-5,e="right"==f.resizeHandle?b.pageX>d:"left"==f.resizeHandle?b.pageX<c:b.pageX<c||b.pageX>d;if(e){var g=$(this).parent().attr("field"),h=_6f(a,g);if(0==h.resizable)return;$(a).datagrid("autoSizeColumn",g),h.auto=!1}});var j="right"==f.resizeHandle?"e":"left"==f.resizeHandle?"w":"e,w";i.each(function(){$(this).resizable({handles:j,disabled:$(this).attr("resizable")?"false"==$(this).attr("resizable"):!1,minWidth:25,onStartResize:function(a){d.resizing=!0,h.css("cursor",$("body").css("cursor")),d.proxy||(d.proxy=$('<div class="datagrid-resize-proxy"></div>').appendTo(g.view)),d.proxy.css({left:a.pageX-$(e).offset().left-1,display:"none"}),setTimeout(function(){d.proxy&&d.proxy.show()},500)},onResize:function(a){return d.proxy.css({left:a.pageX-$(e).offset().left-1,display:"block"}),!1},onStopResize:function(b){h.css("cursor",""),$(this).css("height",""),$(this)._outerWidth($(this)._outerWidth());var c=$(this).parent().attr("field"),e=_6f(a,c);e.width=$(this)._outerWidth(),e.boxWidth=parseInt(this.style.width),e.auto=void 0,$(this).css("width",""),_51(a,c),d.proxy.remove(),d.proxy=null,$(this).parents("div:first.datagrid-header").parent().hasClass("datagrid-view1")&&_1e(a),_8d(a),f.onResizeColumn.call(a,c,e.width),setTimeout(function(){d.resizing=!1},0)}})}),g.body1.add(g.body2).unbind().bind("mouseover",function(e){if(!d.resizing){var f=$(e.target).closest("tr.datagrid-row");if(c(f)){var g=b(f);_eb(a,g),e.stopPropagation()}}}).bind("mouseout",function(d){var e=$(d.target).closest("tr.datagrid-row");if(c(e)){var g=b(e);f.finder.getTr(a,g).removeClass("datagrid-row-over"),d.stopPropagation()}}).bind("click",function(d){var e=$(d.target),g=e.closest("tr.datagrid-row");if(c(g)){var h=b(g);if(e.parent().hasClass("datagrid-cell-check"))f.singleSelect&&f.selectOnCheck?(f.checkOnSelect||_10c(a,!0),_f8(a,h)):e.is(":checked")?_f8(a,h):_100(a,h);else{var i=f.finder.getRow(a,h),j=e.closest("td[field]",g);if(j.length){var k=j.attr("field");f.onClickCell.call(a,h,k,i[k])}1==f.singleSelect?_f0(a,h):g.hasClass("datagrid-row-selected")?_f9(a,h):_f0(a,h),f.onClickRow.call(a,h,i)}d.stopPropagation()}}).bind("dblclick",function(d){var e=$(d.target),g=e.closest("tr.datagrid-row");if(c(g)){var h=b(g),i=f.finder.getRow(a,h),j=e.closest("td[field]",g);if(j.length){var k=j.attr("field");f.onDblClickCell.call(a,h,k,i[k])}FW.pushEvent("双击表格行","id="+$(a).attr("id"),i),f.onDblClickRow.call(a,h,i),d.stopPropagation()}}).bind("contextmenu",function(d){var e=$(d.target).closest("tr.datagrid-row");if(c(e)){var g=b(e),h=f.finder.getRow(a,g);f.onRowContextMenu.call(a,d,g,h),d.stopPropagation()}}),g.body2.bind("scroll",function(){var a=g.view1.children("div.datagrid-body");a.scrollTop($(this).scrollTop());var b=g.body1.children(":first"),c=g.body2.children(":first");if(b.length&&c.length){var d=b.offset().top,e=c.offset().top;d!=e&&a.scrollTop(a.scrollTop()+d-e)}g.view2.children("div.datagrid-header,div.datagrid-footer")._scrollLeft($(this)._scrollLeft()),g.body2.children("table.datagrid-btable-frozen").css("left",-$(this)._scrollLeft())})}function _8d(a){function b(a,b){a.width+=b,a.boxWidth+=b}function c(a){return a.hidden||a.checkbox||a.auto||a.fixed?void 0:!0}var d=$.data(a,"datagrid"),e=d.options,f=d.dc;if(f.body2.css("overflow-x",e.fitColumns?"hidden":""),e.fitColumns){d.leftWidth||(d.leftWidth=0);for(var g,h=f.view2.children("div.datagrid-header"),i=0,j=_6e(a,!1),k=0;k<j.length;k++){var l=_6f(a,j[k]);c(l)&&(i+=l.width,g=l)}if(i){g&&b(g,-d.leftWidth);var m=h.children("div.datagrid-header-inner").show(),n=h.width()-h.find("table").width()-e.scrollbarSize+d.leftWidth,o=n/i;e.showHeader||m.hide();for(var k=0;k<j.length;k++){var l=_6f(a,j[k]);if(c(l)){var p=parseInt(l.width*o);b(l,p),n-=p}}d.leftWidth=n,g&&b(g,d.leftWidth),_51(a)}}}function _9c(a,b){function c(b){function c(c){function f(a){return a.is(":visible")?a._outerWidth():g.html(a.html())._outerWidth()}var h=0;return"header"==c?h=f(d):e.finder.getTr(a,0,c).find('td[field="'+b+'"] div.datagrid-cell').each(function(){var a=f($(this));a>h&&(h=a)}),h}var d=f.view.find('div.datagrid-header td[field="'+b+'"] div.datagrid-cell');d.css("width","");var h=$(a).datagrid("getColumnOption",b);h.width=void 0,h.boxWidth=void 0,h.auto=!0,$(a).datagrid("fixColumnSize",b);var i=Math.max(c("header"),c("allbody"),c("allfooter"));d._outerWidth(i),h.width=i,h.boxWidth=parseInt(d[0].style.width),d.css("width",""),$(a).datagrid("fixColumnSize",b),e.onResizeColumn.call(a,b,h.width)}var d=$.data(a,"datagrid"),e=d.options,f=d.dc,g=$('<div class="datagrid-cell" style="position:absolute;left:-9999px"></div>').appendTo("body");if(b)c(b),e.fitColumns&&(_1e(a),_8d(a));else{for(var h=!1,i=_6e(a,!0).concat(_6e(a,!1)),j=0;j<i.length;j++){var b=i[j],k=_6f(a,b);k.auto&&(c(b),h=!0)}h&&e.fitColumns&&(_1e(a),_8d(a))}g.remove()}function _51(a,b){function c(b){var c=_6f(a,b);c.checkbox||d.ss.set("."+c.cellClass,c.boxWidth?c.boxWidth+"px":"auto")}var d=$.data(a,"datagrid"),e=(d.options,d.dc),f=e.view.find("table.datagrid-btable,table.datagrid-ftable");if(f.css("table-layout","fixed"),b)c(b);else for(var g=_6e(a,!0).concat(_6e(a,!1)),h=0;h<g.length;h++)c(g[h]);f.css("table-layout","auto"),_b0(a),setTimeout(function(){_2e(a),_b5(a)},0)}function _b0(a){var b=$.data(a,"datagrid").dc;b.body1.add(b.body2).find("td.datagrid-td-merged").each(function(){for(var b=$(this),c=b.attr("colspan")||1,d=_6f(a,b.attr("field")).width,e=1;c>e;e++)b=b.next(),d+=_6f(a,b.attr("field")).width+1;$(this).children("div.datagrid-cell")._outerWidth(d)})}function _b5(a){var b=$.data(a,"datagrid").dc;b.view.find("div.datagrid-editable").each(function(){var b=$(this),c=b.parent().attr("field"),d=$(a).datagrid("getColumnOption",c);b._outerWidth(d.width);var e=$.data(this,"datagrid.editor");e.actions.resize&&e.actions.resize(e.target,b.width())})}function _6f(a,b){function c(a){if(a)for(var c=0;c<a.length;c++)for(var d=a[c],e=0;e<d.length;e++){var f=d[e];if(f.field==b)return f}return null}var d=$.data(a,"datagrid").options,e=c(d.columns);return e||(e=c(d.frozenColumns)),e}function _6e(a,b){function c(a){for(var b=0,c=0;;){if(void 0==g[c]){if(b==a)return c;b++}c++}}function d(a){for(var b=[],d=0,e=0;e<f[a].length;e++){var h=f[a][e];h.field&&b.push([d,h.field]),d+=parseInt(h.colspan||"1")}for(var e=0;e<b.length;e++)b[e][0]=c(b[e][0]);for(var e=0;e<b.length;e++){var i=b[e];g[i[0]]=i[1]}}var e=$.data(a,"datagrid").options,f=1==b?e.frozenColumns||[[]]:e.columns;if(0==f.length)return[];for(var g=[],h=0;h<f.length;h++)d(h);return g}function _c6(a,b){function c(){function c(a,b){for(var c=0;c<a.length;c++)if(a[c][e.idField]==b[e.idField])return a[c]=b,!0;return!1}if(e.idField)for(var f=0;f<b.rows.length;f++){var g=b.rows[f];if(c(d.selectedRows,g)&&e.finder.getTr(a,f).addClass("datagrid-row-selected"),c(d.checkedRows,g)){var h=e.finder.getTr(a,f).find("div.datagrid-cell-check input[type=checkbox]");h._propAttr("checked",!0),_itc_togglecheck(h,!0)}}}var d=$.data(a,"datagrid"),e=d.options,f=d.dc;if(b=e.loadFilter.call(a,b),b.total=parseInt(b.total),d.data=b,b.footer&&(d.footer=b.footer),!e.remoteSort&&e.sortName){var g=e.sortName.split(","),h=e.sortOrder.split(",");b.rows.sort(function(b,c){for(var d=0,e=0;e<g.length;e++){var f=g[e],i=h[e],j=_6f(a,f),k=j.sorter||function(a,b){return a==b?0:a>b?1:-1};if(d=k(b[f],c[f])*("asc"==i?1:-1),0!=d)return d}return d})}e.view.onBeforeRender&&e.view.onBeforeRender.call(e.view,a,b.rows),e.view.render.call(e.view,a,f.body2,!1),e.view.render.call(e.view,a,f.body1,!0),e.showFooter&&(e.view.renderFooter.call(e.view,a,f.footer2,!1),e.view.renderFooter.call(e.view,a,f.footer1,!0)),e.view.onAfterRender&&e.view.onAfterRender.call(e.view,a),d.ss.clean(),e.onLoadSuccess.call(a,b);var i=$(a).datagrid("getPager");if(i.length){var j=i.pagination("options");j.total!=b.total&&(i.pagination("refresh",{total:b.total}),e.pageNumber!=j.pageNumber&&(e.pageNumber=j.pageNumber,_16b(a)))}_2e(a),f.body2.triggerHandler("scroll"),c(),$(a).datagrid("autoSizeColumn"),e.onRenderFinish.call(a,b)}function _d2(a,b){var c=$.data(a,"datagrid"),d=c.options,e=c.data.rows;if("object"==typeof b)return _2(e,b);for(var f=0;f<e.length;f++)if(e[f][d.idField]==b)return f;return-1}function _d7(a){var b=$.data(a,"datagrid"),c=b.options,d=b.data;if(c.idField)return b.selectedRows;var e=[];return c.finder.getTr(a,"","selected",2).each(function(){var a=parseInt($(this).attr("datagrid-row-index"));e.push(d.rows[a])}),e}function _de(a){var b=$.data(a,"datagrid"),c=b.options;if(c.idField)return b.checkedRows;var d=[];return c.finder.getTr(a,"","checked",2).each(function(){d.push(c.finder.getRow(a,$(this)))}),d}function _e3(a,b){var c=$.data(a,"datagrid"),d=c.dc,e=c.options,f=e.finder.getTr(a,b);if(f.length){if(f.closest("table").hasClass("datagrid-btable-frozen"))return;var g=d.view2.children("div.datagrid-header")._outerHeight(),h=d.body2,i=h.outerHeight(!0)-h.outerHeight(),j=f.position().top-g-i;0>j?h.scrollTop(h.scrollTop()+j):j+f._outerHeight()>h.height()-18&&h.scrollTop(h.scrollTop()+j+f._outerHeight()-h.height()+18)}}function _eb(a,b){var c=$.data(a,"datagrid"),d=c.options;d.finder.getTr(a,c.highlightIndex).removeClass("datagrid-row-over"),d.finder.getTr(a,b).addClass("datagrid-row-over"),c.highlightIndex=b}function _f0(a,b,c){var d=$.data(a,"datagrid"),e=(d.dc,d.options),f=d.selectedRows;e.singleSelect&&(_f7(a),f.splice(0,f.length)),!c&&e.checkOnSelect&&_f8(a,b,!0);var g=e.finder.getRow(a,b);e.idField&&_7(f,e.idField,g),e.finder.getTr(a,b).addClass("datagrid-row-selected"),e.onSelect.call(a,b,g),_e3(a,b)}function _f9(a,b,c){var d=$.data(a,"datagrid"),e=(d.dc,d.options),f=$.data(a,"datagrid").selectedRows;!c&&e.checkOnSelect&&_100(a,b,!0),e.finder.getTr(a,b).removeClass("datagrid-row-selected");var g=e.finder.getRow(a,b);e.idField&&_4(f,e.idField,g[e.idField]),e.onUnselect.call(a,b,g)}
function _101(a,b){var c=$.data(a,"datagrid"),d=c.options,e=c.data.rows,f=$.data(a,"datagrid").selectedRows;if(!b&&d.checkOnSelect&&_106(a,!0),d.finder.getTr(a,"","allbody").addClass("datagrid-row-selected"),d.idField)for(var g=0;g<e.length;g++)_7(f,d.idField,e[g]);d.onSelectAll.call(a,e)}function _f7(a,b){var c=$.data(a,"datagrid"),d=c.options,e=c.data.rows,f=$.data(a,"datagrid").selectedRows;if(!b&&d.checkOnSelect&&_10c(a,!0),d.finder.getTr(a,"","selected").removeClass("datagrid-row-selected"),d.idField)for(var g=0;g<e.length;g++)_4(f,d.idField,e[g][d.idField]);d.onUnselectAll.call(a,e)}function _f8(a,b,c){var d=$.data(a,"datagrid"),e=d.options;!c&&e.selectOnCheck&&_f0(a,b,!0);var f=e.finder.getTr(a,b).addClass("datagrid-row-checked"),g=f.find("div.datagrid-cell-check input[type=checkbox]");if(g._propAttr("checked",!0),_itc_togglecheck(g,!0),f=e.finder.getTr(a,"","checked",2),f.length==d.data.rows.length){var h=d.dc,i=h.header1.add(h.header2),j=i.find("input[type=checkbox]");j._propAttr("checked",!0),_itc_togglecheck(j,!0)}var k=e.finder.getRow(a,b);e.idField&&_7(d.checkedRows,e.idField,k),e.onCheck.call(a,b,k)}function _100(a,b,c){var d=$.data(a,"datagrid"),e=d.options;!c&&e.selectOnCheck&&_f9(a,b,!0);var f=e.finder.getTr(a,b).removeClass("datagrid-row-checked"),g=f.find("div.datagrid-cell-check input[type=checkbox]");g._propAttr("checked",!1),_itc_togglecheck(g,!1);var h=d.dc,i=h.header1.add(h.header2),j=i.find("input[type=checkbox]");j._propAttr("checked",!1),_itc_togglecheck(j,!1);var k=e.finder.getRow(a,b);e.idField&&_4(d.checkedRows,e.idField,k[e.idField]),e.onUncheck.call(a,b,k)}function _106(a,b){var c=$.data(a,"datagrid"),d=c.options,e=c.data.rows;!b&&d.selectOnCheck&&_101(a,!0);var f=c.dc,g=f.header1.add(f.header2).find("input[type=checkbox]"),h=d.finder.getTr(a,"","allbody").addClass("datagrid-row-checked").find("div.datagrid-cell-check input[type=checkbox]");if(g.add(h)._propAttr("checked",!0),_itc_togglecheck(h,!0),d.idField)for(var i=0;i<e.length;i++)_7(c.checkedRows,d.idField,e[i]);d.onCheckAll.call(a,e)}function _10c(a,b){var c=$.data(a,"datagrid"),d=c.options,e=c.data.rows;!b&&d.selectOnCheck&&_f7(a,!0);var f=c.dc,g=f.header1.add(f.header2).find("input[type=checkbox]"),h=d.finder.getTr(a,"","checked").removeClass("datagrid-row-checked").find("div.datagrid-cell-check input[type=checkbox]");if(g.add(h)._propAttr("checked",!1),_itc_togglecheck(h,!1),d.idField)for(var i=0;i<e.length;i++)_4(c.checkedRows,d.idField,e[i][d.idField]);d.onUncheckAll.call(a,e)}function _11e(a,b){var c=$.data(a,"datagrid").options,d=c.finder.getTr(a,b),e=c.finder.getRow(a,b);d.hasClass("datagrid-row-editing")||0!=c.onBeforeEdit.call(a,b,e)&&(d.addClass("datagrid-row-editing"),_121(a,b),_b5(a),d.find("div.datagrid-editable").each(function(){var a=$(this).parent().attr("field"),b=$.data(this,"datagrid.editor");b.actions.setValue(b.target,e[a])}),_123(a,b))}function _124(a,b,c){var d=$.data(a,"datagrid").options,e=$.data(a,"datagrid").updatedRows,f=$.data(a,"datagrid").insertedRows,g=d.finder.getTr(a,b),h=d.finder.getRow(a,b);if(g.hasClass("datagrid-row-editing")){if(!c){if(!_123(a,b))return;var i=!1,j={};g.find("div.datagrid-editable").each(function(){var a=$(this).parent().attr("field"),b=$.data(this,"datagrid.editor"),c=b.actions.getValue(b.target);h[a]!=c&&(h[a]=c,i=!0,j[a]=c)}),i&&-1==_2(f,h)&&-1==_2(e,h)&&e.push(h)}g.removeClass("datagrid-row-editing"),_12e(a,b),$(a).datagrid("refreshRow",b),c?d.onCancelEdit.call(a,b,h):d.onAfterEdit.call(a,b,h,j)}}function _12f(a,b){var c=$.data(a,"datagrid").options,d=c.finder.getTr(a,b),e=[];return d.children("td").each(function(){var a=$(this).find("div.datagrid-editable");if(a.length){var b=$.data(a[0],"datagrid.editor");e.push(b)}}),e}function _133(a,b){for(var c=_12f(a,void 0!=b.index?b.index:b.id),d=0;d<c.length;d++)if(c[d].field==b.field)return c[d];return null}function _121(a,b){var c=$.data(a,"datagrid").options,d=c.finder.getTr(a,b),e=d.attr("datagrid-row-index");d.children("td").each(function(){var b=$(this).find("div.datagrid-cell"),d=$(this).attr("field"),f=_6f(a,d);if(f&&f.editor){var g,h;"string"==typeof f.editor?g=f.editor:(g=f.editor.type,h=f.editor.options);var i=c.editors[g];if(i){var j=b.html(),k=b._outerWidth();b.addClass("datagrid-editable"),b._outerWidth(k),b.html('<table border="0" cellspacing="0" cellpadding="1"><tr><td></td></tr></table>'),b.children("table").bind("click dblclick contextmenu",function(a){a.stopPropagation()}),$.data(b[0],"datagrid.editor",{actions:i,target:i.init(b.find("td"),h,d,e),field:d,type:g,oldHtml:j})}}}),_2e(a,b,!0)}function _12e(a,b){var c=$.data(a,"datagrid").options,d=c.finder.getTr(a,b);d.children("td").each(function(){var a=$(this).find("div.datagrid-editable");if(a.length){var b=$.data(a[0],"datagrid.editor");b.actions.destroy&&b.actions.destroy(b.target),a.html(b.oldHtml),$.removeData(a[0],"datagrid.editor"),a.removeClass("datagrid-editable"),a.css("width","")}})}function _123(a,b){var c=$.data(a,"datagrid").options.finder.getTr(a,b);if(!c.hasClass("datagrid-row-editing"))return!0;var d=c.find(".validatebox-text");d.validatebox("validate"),d.trigger("mouseleave");var e=c.find(".validatebox-invalid");return 0==e.length}function _144(a,b){var c=$.data(a,"datagrid").insertedRows,d=$.data(a,"datagrid").deletedRows,e=$.data(a,"datagrid").updatedRows;if(!b){var f=[];return f=f.concat(c),f=f.concat(d),f=f.concat(e)}return"inserted"==b?c:"deleted"==b?d:"updated"==b?e:[]}function _14a(a,b){var c=$.data(a,"datagrid"),d=c.options,e=c.data,f=c.insertedRows,g=c.deletedRows;$(a).datagrid("cancelEdit",b);var h=e.rows[b];_2(f,h)>=0?_4(f,h):g.push(h),_4(c.selectedRows,d.idField,e.rows[b][d.idField]),_4(c.checkedRows,d.idField,e.rows[b][d.idField]),d.view.deleteRow.call(d.view,a,b),"auto"==d.height&&_2e(a),$(a).datagrid("getPager").pagination("refresh",{total:e.total})}function _150(a,b){var c=$.data(a,"datagrid").data,d=$.data(a,"datagrid").options.view,e=$.data(a,"datagrid").insertedRows;d.insertRow.call(d,a,b.index,b.row),e.push(b.row),$(a).datagrid("getPager").pagination("refresh",{total:c.total})}function _154(a,b){var c=$.data(a,"datagrid").data,d=$.data(a,"datagrid").options.view,e=$.data(a,"datagrid").insertedRows;d.insertRow.call(d,a,null,b),e.push(b),$(a).datagrid("getPager").pagination("refresh",{total:c.total})}function _157(a){for(var b=$.data(a,"datagrid"),c=b.data,d=c.rows,e=[],f=0;f<d.length;f++)e.push($.extend({},d[f]));b.originalRows=e,b.updatedRows=[],b.insertedRows=[],b.deletedRows=[]}function _15b(a){for(var b=$.data(a,"datagrid").data,c=!0,d=0,e=b.rows.length;e>d;d++)_123(a,d)?_124(a,d,!1):c=!1;c&&_157(a)}function _15d(a){function b(a){for(var b=[],c=0;c<a.length;c++)b.push(a[c][e.idField]);return b}function c(b,c){for(var d=0;d<b.length;d++){var e=_d2(a,b[d]);e>=0&&("s"==c?_f0:_f8)(a,e,!0)}}for(var d=$.data(a,"datagrid"),e=d.options,f=d.originalRows,g=d.insertedRows,h=d.deletedRows,i=d.selectedRows,j=d.checkedRows,k=d.data,l=0;l<k.rows.length;l++)_124(a,l,!0);var m=b(i),n=b(j);i.splice(0,i.length),j.splice(0,j.length),k.total+=h.length-g.length,k.rows=f,_c6(a,k),c(m,"s"),c(n,"c"),_157(a)}function _16b(a,b){function c(){var b=d.loader.call(a,e,function(b){setTimeout(function(){$(a).datagrid("loaded")},0),_c6(a,b),setTimeout(function(){_157(a)},0)},function(){setTimeout(function(){$(a).datagrid("loaded")},0),d.onLoadError.apply(a,arguments)});0==b&&$(a).datagrid("loaded")}var d=$.data(a,"datagrid").options;b&&(d.queryParams=b);var e=$.extend({},d.queryParams);d.pagination&&$.extend(e,{page:d.pageNumber,rows:d.pageSize}),d.sortName&&$.extend(e,{sort:d.sortName,order:d.sortOrder}),0!=d.onBeforeLoad.call(a,e)&&($(a).datagrid("loading"),setTimeout(function(){c()},0))}function _171(a,b){var c=$.data(a,"datagrid").options;if(b.rowspan=b.rowspan||1,b.colspan=b.colspan||1,1!=b.rowspan||1!=b.colspan){var d=c.finder.getTr(a,void 0!=b.index?b.index:b.id);if(d.length){var e=c.finder.getRow(a,d),f=e[b.field],g=d.find('td[field="'+b.field+'"]');g.attr("rowspan",b.rowspan).attr("colspan",b.colspan),g.addClass("datagrid-td-merged");for(var h=1;h<b.colspan;h++)g=g.next(),g.hide(),e[g.attr("field")]=f;for(var h=1;h<b.rowspan&&(d=d.next(),d.length);h++){var e=c.finder.getRow(a,d),g=d.find('td[field="'+b.field+'"]').hide();e[g.attr("field")]=f;for(var i=1;i<b.colspan;i++)g=g.next(),g.hide(),e[g.attr("field")]=f}_b0(a)}}}var _1=0;$.fn.datagrid=function(a,b){return"string"==typeof a?$.fn.datagrid.methods[a](this,b):(a=a||{},this.each(function(){var b,c=$.data(this,"datagrid");if(c)b=$.extend(c.options,a),c.options=b;else{b=$.extend({},$.extend({},$.fn.datagrid.defaults,{queryParams:{}}),$.fn.datagrid.parseOptions(this),a),$(this).css("width","").css("height","");var d=_47(this,b.rownumbers);b.columns||(b.columns=d.columns),b.frozenColumns||(b.frozenColumns=d.frozenColumns),b.columns=$.extend(!0,[],b.columns),b.frozenColumns=$.extend(!0,[],b.frozenColumns),b.view=$.extend({},b.view),$.data(this,"datagrid",{options:b,panel:d.panel,dc:d.dc,ss:d.ss,selectedRows:[],checkedRows:[],data:{total:0,rows:[]},originalRows:[],updatedRows:[],insertedRows:[],deletedRows:[]})}if(_56(this),b.data)_c6(this,b.data),_157(this);else{var e=$.fn.datagrid.parseData(this);e.total>0&&(_c6(this,e),_157(this))}_19(this),_16b(this),_70(this)}))};var _179={text:{init:function(a,b){var c=$('<input type="text" class="datagrid-editable-input">').appendTo(a);return c},getValue:function(a){return $(a).val()},setValue:function(a,b){$(a).val(b)},resize:function(a,b){$(a)._outerWidth(b)._outerHeight(22)}},textarea:{init:function(a,b){var c=$('<textarea class="datagrid-editable-input"></textarea>').appendTo(a);return c},getValue:function(a){return $(a).val()},setValue:function(a,b){$(a).val(b)},resize:function(a,b){$(a)._outerWidth(b)}},checkbox:{init:function(a,b){var c=$('<input type="checkbox">').appendTo(a);return c.val(b.on),c.attr("offval",b.off),c},getValue:function(a){return $(a).is(":checked")?$(a).val():$(a).attr("offval")},setValue:function(a,b){var c=!1;$(a).val()==b&&(c=!0),$(a)._propAttr("checked",c)}},numberbox:{init:function(a,b){var c=$('<input type="text" class="datagrid-editable-input">').appendTo(a);return c.numberbox(b),c},destroy:function(a){$(a).numberbox("destroy")},getValue:function(a){return $(a).blur(),$(a).numberbox("getValue")},setValue:function(a,b){$(a).numberbox("setValue",b)},resize:function(a,b){$(a)._outerWidth(b)._outerHeight(22)}},validatebox:{init:function(a,b){var c=$('<input type="text" class="datagrid-editable-input">').appendTo(a);return c.validatebox(b),c},destroy:function(a){$(a).validatebox("destroy")},getValue:function(a){return $(a).val()},setValue:function(a,b){$(a).val(b)},resize:function(a,b){$(a)._outerWidth(b)._outerHeight(22)}},datebox:{init:function(a,b){var c=$('<input type="text">').appendTo(a);return c.datebox(b),c},destroy:function(a){$(a).datebox("destroy")},getValue:function(a){return $(a).datebox("getValue")},setValue:function(a,b){$(a).datebox("setValue",b)},resize:function(a,b){$(a).datebox("resize",b)}},combobox:{init:function(a,b){var c=$('<input type="text">').appendTo(a);return c.combobox(b||{}),c},destroy:function(a){$(a).combobox("destroy")},getValue:function(a){var b=$(a).combobox("options");return b.multiple?$(a).combobox("getValues").join(b.separator):$(a).combobox("getValue")},setValue:function(a,b){var c=$(a).combobox("options");c.multiple?b?$(a).combobox("setValues",b.split(c.separator)):$(a).combobox("clear"):$(a).combobox("setValue",b)},resize:function(a,b){$(a).combobox("resize",b)}},combotree:{init:function(a,b){var c=$('<input type="text">').appendTo(a);return c.combotree(b),c},destroy:function(a){$(a).combotree("destroy")},getValue:function(a){return $(a).combotree("getValue")},setValue:function(a,b){$(a).combotree("setValue",b)},resize:function(a,b){$(a).combotree("resize",b)}}};$.fn.datagrid.methods={options:function(a){var b=$.data(a[0],"datagrid").options,c=$.data(a[0],"datagrid").panel.panel("options"),d=$.extend(b,{width:c.width,height:c.height,closed:c.closed,collapsed:c.collapsed,minimized:c.minimized,maximized:c.maximized});return d},getPanel:function(a){return $.data(a[0],"datagrid").panel},getPager:function(a){return $.data(a[0],"datagrid").panel.children("div.datagrid-pager")},getColumnFields:function(a,b){return _6e(a[0],b)},getColumnOption:function(a,b){return _6f(a[0],b)},resize:function(a,b){var c=a.each(function(){_19(this,b)});return c},load:function(a,b){return a.each(function(){var a=$(this).datagrid("options");a.pageNumber=1;var c=$(this).datagrid("getPager");c.pagination("refresh",{pageNumber:1}),_16b(this,b)})},reload:function(a,b){return a.each(function(){_16b(this,b)})},reloadFooter:function(a,b){return a.each(function(){var a=$.data(this,"datagrid").options,c=$.data(this,"datagrid").dc;b&&($.data(this,"datagrid").footer=b),a.showFooter&&(a.view.renderFooter.call(a.view,this,c.footer2,!1),a.view.renderFooter.call(a.view,this,c.footer1,!0),a.view.onAfterRender&&a.view.onAfterRender.call(a.view,this),$(this).datagrid("fixRowHeight"))})},loading:function(a){return!0},loaded:function(a){return!0},fitColumns:function(a){return a.each(function(){_8d(this)})},fixColumnSize:function(a,b){return a.each(function(){_51(this,b)})},fixRowHeight:function(a,b){return a.each(function(){_2e(this,b)})},freezeRow:function(a,b){return a.each(function(){_3f(this,b)})},autoSizeColumn:function(a,b){return a.each(function(){_9c(this,b)})},loadData:function(a,b){return a.each(function(){_c6(this,b),_157(this)})},getData:function(a){return $.data(a[0],"datagrid").data},getRows:function(a){return $.data(a[0],"datagrid").data.rows},getFooterRows:function(a){return $.data(a[0],"datagrid").footer},getRowIndex:function(a,b){return _d2(a[0],b)},getChecked:function(a){return _de(a[0])},getSelected:function(a){var b=_d7(a[0]);return b.length>0?b[0]:null},getSelections:function(a){return _d7(a[0])},clearSelections:function(a){return a.each(function(){var a=$.data(this,"datagrid").selectedRows;a.splice(0,a.length),_f7(this)})},clearChecked:function(a){return a.each(function(){var a=$.data(this,"datagrid").checkedRows;a.splice(0,a.length),_10c(this)})},scrollTo:function(a,b){return a.each(function(){_e3(this,b)})},highlightRow:function(a,b){return a.each(function(){_eb(this,b),_e3(this,b)})},selectAll:function(a){return a.each(function(){_101(this)})},unselectAll:function(a){return a.each(function(){_f7(this)})},selectRow:function(a,b){return a.each(function(){_f0(this,b)})},selectRecord:function(a,b){return a.each(function(){var a=$.data(this,"datagrid").options;if(a.idField){var c=_d2(this,b);c>=0&&$(this).datagrid("selectRow",c)}})},unselectRow:function(a,b){return a.each(function(){_f9(this,b)})},checkRow:function(a,b){return a.each(function(){_f8(this,b)})},uncheckRow:function(a,b){return a.each(function(){_100(this,b)})},checkAll:function(a){return a.each(function(){_106(this)})},uncheckAll:function(a){return a.each(function(){_10c(this)})},beginEdit:function(a,b){return a.each(function(){_11e(this,b)})},endEdit:function(a,b){return a.each(function(){_124(this,b,!1)})},cancelEdit:function(a,b){return a.each(function(){_124(this,b,!0)})},getEditors:function(a,b){return _12f(a[0],b)},getEditor:function(a,b){return _133(a[0],b)},refreshRow:function(a,b){return a.each(function(){var a=$.data(this,"datagrid").options;a.view.refreshRow.call(a.view,this,b)})},validateRow:function(a,b){return _123(a[0],b)},updateRow:function(a,b){return a.each(function(){var a=$.data(this,"datagrid").options;a.view.updateRow.call(a.view,this,b.index,b.row)})},appendRow:function(a,b){return a.each(function(){_154(this,b)})},insertRow:function(a,b){return a.each(function(){_150(this,b)})},deleteRow:function(a,b){return a.each(function(){_14a(this,b)})},getChanges:function(a,b){return _144(a[0],b)},acceptChanges:function(a){return a.each(function(){_15b(this)})},rejectChanges:function(a){return a.each(function(){_15d(this)})},mergeCells:function(a,b){return a.each(function(){_171(this,b)})},showColumn:function(a,b){return a.each(function(){var a=$(this).datagrid("getPanel");a.find('td[field="'+b+'"]').show(),$(this).datagrid("getColumnOption",b).hidden=!1,$(this).datagrid("fitColumns")})},hideColumn:function(a,b){return a.each(function(){var a=$(this).datagrid("getPanel");a.find('td[field="'+b+'"]').hide(),$(this).datagrid("getColumnOption",b).hidden=!0,$(this).datagrid("fitColumns")})}},$.fn.datagrid.parseOptions=function(_1e6){var t=$(_1e6);return $.extend({},$.fn.panel.parseOptions(_1e6),$.parser.parseOptions(_1e6,["url","toolbar","idField","sortName","sortOrder","pagePosition","resizeHandle",{fitColumns:"boolean",autoRowHeight:"boolean",striped:"boolean",nowrap:"boolean"},{rownumbers:"boolean",singleSelect:"boolean",checkOnSelect:"boolean",selectOnCheck:"boolean"},{pagination:"boolean",pageSize:"number",pageNumber:"number"},{multiSort:"boolean",remoteSort:"boolean",showHeader:"boolean",showFooter:"boolean"},{scrollbarSize:"number"}]),{pageList:t.attr("pageList")?eval(t.attr("pageList")):void 0,loadMsg:void 0!=t.attr("loadMsg")?t.attr("loadMsg"):void 0,rowStyler:t.attr("rowStyler")?eval(t.attr("rowStyler")):void 0})},$.fn.datagrid.parseData=function(a){var b=$(a),c={total:0,rows:[]},d=b.datagrid("getColumnFields",!0).concat(b.datagrid("getColumnFields",!1));return b.find("tbody tr").each(function(){c.total++;var a={};$.extend(a,$.parser.parseOptions(this,["iconCls","state"]));for(var b=0;b<d.length;b++)a[d[b]]=$(this).find("td:eq("+b+")").html();c.rows.push(a)}),c};var _1e9={render:function(a,b,c){var d=$.data(a,"datagrid"),e=d.options,f=d.data.rows,g=$(a).datagrid("getColumnFields",c);if(!c||e.rownumbers||e.frozenColumns&&e.frozenColumns.length){for(var h=['<table class="datagrid-btable" cellspacing="0" cellpadding="0" border="0"><tbody>'],i=0;i<f.length;i++){var j=e.rowStyler?e.rowStyler.call(a,i,f[i]):"",k="",l="";"string"==typeof j?l=j:j&&(k=j["class"]||"",l=j.style||"");var m='class="datagrid-row '+(i%2&&e.striped?"datagrid-row-alt ":" ")+k+'"',n=l?'style="'+l+'"':"",o=d.rowIdPrefix+"-"+(c?1:2)+"-"+i;h.push('<tr id="'+o+'" datagrid-row-index="'+i+'" '+m+" "+n+">"),h.push(this.renderRow.call(this,a,g,c,i,f[i])),h.push("</tr>")}h.push("</tbody></table>"),$(b).html(h.join(""))}},renderFooter:function(a,b,c){for(var d=($.data(a,"datagrid").options,$.data(a,"datagrid").footer||[]),e=$(a).datagrid("getColumnFields",c),f=['<table class="datagrid-ftable" cellspacing="0" cellpadding="0" border="0"><tbody>'],g=0;g<d.length;g++)f.push('<tr class="datagrid-row" datagrid-row-index="'+g+'">'),f.push(this.renderRow.call(this,a,e,c,g,d[g])),f.push("</tr>");f.push("</tbody></table>"),$(b).html(f.join(""))},renderRow:function(a,b,c,d,e){var f=$.data(a,"datagrid").options,g=[];if(c&&f.rownumbers){var h=d+1;f.pagination&&(h+=(f.pageNumber-1)*f.pageSize),g.push('<td class="datagrid-td-rownumber"><div class="datagrid-cell-rownumber">'+h+"</div></td>")}for(var i=0;i<b.length;i++){var j=b[i],k=$(a).datagrid("getColumnOption",j);if(k){var l=e[j],m=k.styler?k.styler(l,e,d)||"":"",n="",o="";"string"==typeof m?o=m:g&&(n=m["class"]||"",o=m.style||"");var p=n?'class="'+n+'"':"",q=k.hidden?'style="display:none;'+o+'"':o?'style="'+o+'"':"";if(g.push('<td field="'+j+'" '+p+" "+q+">"),k.checkbox)var q="";else{var q=o;k.align&&(q+=";text-align:"+k.align+";"),f.nowrap?f.autoRowHeight&&(q+=";height:auto;"):q+=";white-space:normal;height:auto;"}g.push('<div style="'+q+'" '),g.push(k.checkbox?'class="datagrid-cell-check"':'class="datagrid-cell '+k.cellClass+'"'),g.push(">"),k.checkbox?g.push('<input type="checkbox" name="'+j+'" value="'+(void 0!=l?l:"")+'">'):(null!==k.precision&&"undefined"!=typeof k.precision&&(l=_toFixed(l,2)),"string"==typeof l&&(l=FW.specialchars(l)),k.formatter?g.push(k.formatter(l,e,d)):(l=FW.convertBRBRToBlankSpace(l),g.push(l))),g.push("</div>"),g.push("</td>")}}return g.join("")},refreshRow:function(a,b){this.updateRow.call(this,a,b,{})},updateRow:function(a,b,c){function d(c){var d=$(a).datagrid("getColumnFields",c),g=e.finder.getTr(a,b,"body",c?1:2),j=g.find("div.datagrid-cell-check input[type=checkbox]").is(":checked");g.html(this.renderRow.call(this,a,d,c,b,f[b])),g.attr("style",i).attr("class",g.hasClass("datagrid-row-selected")?h+" datagrid-row-selected":h),j&&g.find("div.datagrid-cell-check input[type=checkbox]")._propAttr("checked",!0)}var e=$.data(a,"datagrid").options,f=$(a).datagrid("getRows");$.extend(f[b],c);var g=e.rowStyler?e.rowStyler.call(a,b,f[b]):"",h="",i="";"string"==typeof g?i=g:g&&(h=g["class"]||"",i=g.style||"");var h="datagrid-row "+(b%2&&e.striped?"datagrid-row-alt ":" ")+h;d.call(this,!0),d.call(this,!1),$(a).datagrid("fixRowHeight",b)},insertRow:function(a,b,c){function d(c){for(var d=c?1:2,e=i.rows.length-1;e>=b;e--){var h=g.finder.getTr(a,e,"body",d);if(h.attr("datagrid-row-index",e+1),h.attr("id",f.rowIdPrefix+"-"+d+"-"+(e+1)),c&&g.rownumbers){var j=e+2;g.pagination&&(j+=(g.pageNumber-1)*g.pageSize),h.find("div.datagrid-cell-rownumber").html(j)}g.striped&&h.removeClass("datagrid-row-alt").addClass((e+1)%2?"datagrid-row-alt":"")}}function e(c){var d=c?1:2,e=($(a).datagrid("getColumnFields",c),f.rowIdPrefix+"-"+d+"-"+b),j='<tr id="'+e+'" class="datagrid-row" datagrid-row-index="'+b+'"></tr>';if(b>=i.rows.length)if(i.rows.length)g.finder.getTr(a,"","last",d).after(j);else{var k=c?h.body1:h.body2;k.html('<table cellspacing="0" cellpadding="0" border="0"><tbody>'+j+"</tbody></table>")}else g.finder.getTr(a,b+1,"body",d).before(j)}var f=$.data(a,"datagrid"),g=f.options,h=f.dc,i=f.data;(void 0==b||null==b)&&(b=i.rows.length),b>i.rows.length&&(b=i.rows.length),d.call(this,!0),d.call(this,!1),e.call(this,!0),e.call(this,!1),i.total+=1,i.rows.splice(b,0,c),this.refreshRow.call(this,a,b)},deleteRow:function(a,b){function c(c){for(var g=c?1:2,h=b+1;h<f.rows.length;h++){var i=e.finder.getTr(a,h,"body",g);if(i.attr("datagrid-row-index",h-1),i.attr("id",d.rowIdPrefix+"-"+g+"-"+(h-1)),c&&e.rownumbers){var j=h;e.pagination&&(j+=(e.pageNumber-1)*e.pageSize),i.find("div.datagrid-cell-rownumber").html(j)}e.striped&&i.removeClass("datagrid-row-alt").addClass((h-1)%2?"datagrid-row-alt":"")}}var d=$.data(a,"datagrid"),e=d.options,f=d.data;e.finder.getTr(a,b).remove(),c.call(this,!0),c.call(this,!1),f.total-=1,f.rows.splice(b,1)},onBeforeRender:function(a,b){},onAfterRender:function(a){var b=$.data(a,"datagrid").options;if(b.showFooter){var c=$(a).datagrid("getPanel").find("div.datagrid-footer");c.find("div.datagrid-cell-rownumber,div.datagrid-cell-check").css("visibility","hidden")}}};$.fn.datagrid.defaults=$.extend({},$.fn.panel.defaults,{frozenColumns:void 0,columns:void 0,fitColumns:!1,resizeHandle:"right",autoRowHeight:!0,toolbar:null,striped:!1,method:"post",nowrap:!0,idField:null,url:null,data:null,loadMsg:"正在加载中，请稍候 ...",rownumbers:!1,singleSelect:!1,selectOnCheck:!0,checkOnSelect:!0,pagination:!1,pagePosition:"bottom",pageNumber:1,pageSize:10,pageList:[10,20,30,40,50],queryParams:{},sortName:null,sortOrder:"asc",multiSort:!1,remoteSort:!0,showHeader:!0,showFooter:!1,scrollbarSize:0,rowStyler:function(a,b){},loader:function(a,b,c){var d=$(this).datagrid("options");return d.url?void $.ajax({type:d.method,url:d.url,data:a,dataType:"json",success:function(a){b(a)},error:function(){c.apply(this,arguments)}}):!1},loadFilter:function(a){return"number"==typeof a.length&&"function"==typeof a.splice?{total:a.length,rows:a}:a},editors:_179,finder:{getTr:function(a,b,c,d){c=c||"body",d=d||0;var e=$.data(a,"datagrid"),f=e.dc,g=e.options;if(0==d){var h=g.finder.getTr(a,b,c,1),i=g.finder.getTr(a,b,c,2);return h.add(i)}if("body"==c){var j=$("#"+e.rowIdPrefix+"-"+d+"-"+b);return j.length||(j=(1==d?f.body1:f.body2).find(">table>tbody>tr[datagrid-row-index="+b+"]")),j}return"footer"==c?(1==d?f.footer1:f.footer2).find(">table>tbody>tr[datagrid-row-index="+b+"]"):"selected"==c?(1==d?f.body1:f.body2).find(">table>tbody>tr.datagrid-row-selected"):"highlight"==c?(1==d?f.body1:f.body2).find(">table>tbody>tr.datagrid-row-over"):"checked"==c?(1==d?f.body1:f.body2).find(">table>tbody>tr.datagrid-row-checked"):"last"==c?(1==d?f.body1:f.body2).find(">table>tbody>tr[datagrid-row-index]:last"):"allbody"==c?(1==d?f.body1:f.body2).find(">table>tbody>tr[datagrid-row-index]"):"allfooter"==c?(1==d?f.footer1:f.footer2).find(">table>tbody>tr[datagrid-row-index]"):void 0},getRow:function(a,b){var c="object"==typeof b?b.attr("datagrid-row-index"):b;return $.data(a,"datagrid").data.rows[parseInt(c)]}},view:_1e9,onBeforeLoad:function(a){},onLoadSuccess:function(){},onRenderFinish:function(){},onLoadError:function(){},onClickRow:function(a,b){},onDblClickRow:function(a,b){},onClickCell:function(a,b,c){},onDblClickCell:function(a,b,c){},onSortColumn:function(a,b){},onResizeColumn:function(a,b){},onSelect:function(a,b){},onUnselect:function(a,b){},onSelectAll:function(a){},onUnselectAll:function(a){},onCheck:function(a,b){},onUncheck:function(a,b){},onCheckAll:function(a){},onUncheckAll:function(a){},onBeforeEdit:function(a,b){},onAfterEdit:function(a,b,c){},onCancelEdit:function(a,b){},onHeaderContextMenu:function(a,b){},onRowContextMenu:function(a,b,c){}})}(jQuery);var _itc_gridsearches={};_itc_togglecheck=function(a,b){for(var c=0;c<a.length;c++){var d=$(a[c]).parent().next(".checkbox-fix").children(".icheckbox_flat-blue");0!=d.length&&(b?(d.addClass("checked"),d.children("input").iCheck("check")):(d.removeClass("checked"),d.children("input").iCheck("uncheck")))}},function(a){a.fn.extend({iFixCheckbox:function(){var b=a(this).prev(".datagrid-view2"),c=this;c.fixCheckBox=function(b){var c=b.parent(),d=1==b[0].checked?" checked":"";c.after("<div class='checkbox-fix'><input type='checkbox' "+d+"/></div>"),c.hide();var e=c.next("div").children("input");e.iCheck({checkboxClass:"icheckbox_flat-blue",radioClass:"iradio_flat-blue"}).on("ifClicked",function(){var b=a(this).parents(".checkbox-fix").prev("div").children("input");b.trigger("click")})},b.children(".datagrid-header").find(".datagrid-header-check > input").each(function(){a(this).parents("td").children(".checkbox-fix").length>0||c.fixCheckBox(a(this))}),b.children(".datagrid-body").find(".datagrid-cell-check > input").each(function(){a(this).parents("td").children(".checkbox-fix").length>0||c.fixCheckBox(a(this))})}})}(jQuery),function(a){a.fn.extend({ITCUI_GridSearch:function(b,c){var d=a(this),e=d.parents(".panel"),f=this;f.beginSearch=function(){d.attr("id");c=c||{},c.remoteSearch=c.remoteSearch||!1,c.onParseArgs=c.onParseArgs||function(a){return a},c.noSearchColumns=c.noSearchColumns||{},d.data("searchOpts",c);var b=d.datagrid("options");if(!b)return void FW.debug("无法找到表格参数，是否$操作符指向错误？");var g=b.frozenColumns&&b.frozenColumns.length>0,h=e.find(g?".datagrid-view1":".datagrid-view2").children(".datagrid-header").find(".datagrid-header-row"),i=b.rownumbers,j=h.children("td");sHtml="";var k=0,l=g?b.frozenColumns:b.columns;b.rownumbers&&(k+=25);for(var m=0;m<j.length;m++){var n=a(j[m]),o="gs_"+f.attr("id")+"_"+n.attr("field");if("none"!=n.css("display")&&!n.children(".datagrid-header-rownumber").length)if(n.children(".datagrid-header-check").length>0)k+=28;else{n.attr("id",o);var p=n.width();if(c.noSearchColumns[m])k+=p;else{p-=8,m==j.length-1&&(p-=10);var q=k?"margin-left:"+k+"px":"";k=0;var r="input",s=l[0][i?m-1:m];if(s&&s.editor&&"combobox"==s.editor.type){s.editor.type;r="combobox"}"input"==r?sHtml+='<div fieldid="'+o+'" class="itc-gs-wrap input-roup-sm pull-left" style="width:'+p+"px;"+q+'"><input type="text" class="enter-allowed" icon="itcui_btn_mag" field="'+n.attr("field")+'"></div>':"combobox"==r&&(sHtml+='<div fieldid="'+o+'" class="itc-gs-wrap pull-left" style="width:'+p+"px;"+q+'"><select style="width:100%" field="'+n.attr("field")+'" colindex="'+m+'"></select></div>')}}}var t="itc_gs_"+d.attr("id");a("<div class='bbox itc_gridsearch' style='height:28px;clear:both'></div>").prependTo(e).html(sHtml).attr("id",t),_itc_gridsearches[t]=!0,e.children(".itc_gridsearch").find("input").each(function(){a(this).keypress(function(a){13==a.which&&f.doSearch(this)}).ITCUI_Input()}),e.children(".itc_gridsearch").find("select").each(function(){var b=a(this),c=b.attr("colindex"),d=l[0][c].editor.options,e=d.data;e&&!d.multiSelect&&isArray(e)&&e[0]&&"全部"!=e[0][1]&&(3==e[0].length&&(e[0][2]=!1),e.unshift([null,"全部",!0])),d.onChange=function(a,b){f.doSearch(b)},d.initOnChange=!1,b.iCombo("init",d)}),e.find(".itcui_btn_mag").click(function(){f.doSearch(a(this).prev("input"))})},f.endSearch=function(){d.parents(".panel").children(".itc_gridsearch").remove();var a="itc_gs_"+d.attr("id");if(d.data("parsedArgs")){var b=d.datagrid("options").queryParams;for(var c in d.data("parsedArgs"))delete b[c];delete _itc_grids[d.attr("id")],d.datagrid("getPager").pagination("select",1),d.data("parsedArgs",null)}delete _itc_gridsearches[a]},f.doSearch=function(b){for(var c=a(b).parents(".itc_gridsearch"),d=c.parent(".datagrid").children(".datagrid-wrap").children(".datagrid-view").children("table"),e=d.data("searchOpts"),f=c.find("input"),g={},h=0;h<f.length;h++){var i=a(f[h]);"hidden"!=i.attr("type")&&(g[i.attr("field")]=i.val())}for(var j=c.find("select"),h=0;h<j.length;h++){var k=a(j[h]);g["_"+k.attr("field")]=k.iCombo("getVal")}if(e.remoteSearch){parsedArgs=e.onParseArgs(g);var l=d.datagrid("options").queryParams;for(var m in parsedArgs)l[m]=parsedArgs[m];d.data("parsedArgs",parsedArgs),"undefined"!=typeof _itc_grids&&delete _itc_grids[d.attr("id")],d.datagrid("getPager").pagination("select",1)}else d.ITCUI_Pagination("search",g)},"init"==b?f.beginSearch():"end"==b&&f.endSearch()}})}(jQuery),$.extend($.fn.datagrid.defaults.editors,{text:{init:function(a,b,c,d){var e=c+"_"+d,f=$('<div class="input-group-sm bbox" style="position:relative;padding-right:6px"><input type="text" name="'+e+'" class="form-control validatebox-text valid-field" /></div>').appendTo(a),g=f.children("input");if(b&&"object"==typeof b){for(var h in b)if(/^on.+/.test(h)&&"function"==typeof b[h]){var i=h.substring(2).toLowerCase();g.on(i,b[h])}b.dataType&&UiCommon.onlyNumKeyDown(b,g),"right"==b.align&&g.addClass("dg-align-right")}return _itc_bindvalidation(g,b),f},destroy:function(a){$(a).remove()},getValue:function(a){return $(a).children("input").val()},setValue:function(a,b){$(a).children("input").val(b)},resize:function(a,b){}},checkbox:{init:function(a,b){var c=$('<input type="checkbox">').appendTo(a);return c.iCheck({checkboxClass:"icheckbox_flat-blue",radioClass:"iradio_flat-blue"}),c},destroy:function(a){$(a).parent().remove()},getValue:function(a){return $(a).parent().hasClass("checked")},setValue:function(a,b){var c=$(a);b?c.iCheck("check"):c.iCheck("uncheck"),$(a).children("input").val(b)},resize:function(a,b){}},datebox:{init:function(a,b,c,d){var e=c+"_"+d,f=$('<div class="itc_lazypicker bbox" style="width:100%"></div>').appendTo(a);a.css("padding-right","6px"),b=b||{},b.dataType&&(f.data("dataType",b.dataType),"date"==b.dataType?(b.format=b.format||"yyyy-mm-dd",b.minView=b.minView||2):"datetime"==b.dataType&&(b.format=b.format||"yyyy-mm-dd hh:ii")),f.ITCUI_LazyLoadPicker({inputName:e},b);var g=f.children("input");if(_itc_bindvalidation(g,b),b&&"object"==typeof b)for(var h in b)if(/^on.+/.test(h)&&"function"==typeof b[h]){var i=h.substring(2).toLowerCase();g.on(i,b[h])}return f},destroy:function(a){$(a).remove()},getValue:function(a){var b=$(a).children("input").val();return"date"==a.data("dataType")?b=FW.date2long(b):"datetime"==a.data("dataType")&&(b=FW.time2long(b)),b},setValue:function(a,b){"date"==a.data("dataType")?b=FW.long2date(b):"datetime"==a.data("dataType")&&(b=FW.long2time(b)),$(a).children("input").val(b)},resize:function(a,b){}},combobox:{init:function(a,b,c,d){maxlength=b.maxlength||18;var e=c+"_"+d,f=$('<select style="width:100%" maxlength='+maxlength+' fixposition=1 _name="'+e+'">').appendTo(a);return f.iCombo("init",b),_itc_bindvalidation(f.prev("div").children("input"),b),f},destroy:function(a){$(a).prev(".itcui_combo").remove(),$(a).remove()},getValue:function(a){return $(a).iCombo("getVal")},setValue:function(a,b){
$(a).iCombo("setVal",b)},resize:function(a,b){}}}),function(a){a.fn.extend({validatebox:function(a){return!0}})}(jQuery);var _itc_treedblclick=!1,_itc_tlstclknode=null,_itc_tlstclktime=null;!function(a){function b(b){var c=a(b);return c.addClass("tree"),c}function c(b){var c=a.data(b,"tree").options;a(b).unbind().bind("mouseover",function(b){var c=a(b.target),d=c.closest("div.tree-node");d.length&&(d.addClass("tree-node-hover"),c.hasClass("tree-hit")&&(c.hasClass("tree-expanded")?c.addClass("tree-expanded-hover"):c.addClass("tree-collapsed-hover")),b.stopPropagation())}).bind("mouseout",function(d){var e=a(d.target),f=e.closest("div.tree-node");f.length&&(f.removeClass("tree-node-hover"),e.hasClass("tree-hit")&&(e.hasClass("tree-expanded")?e.removeClass("tree-expanded-hover"):e.removeClass("tree-collapsed-hover")),c.onMouseOut.call(b,d,C(b,f[0])),d.stopPropagation())}).bind("mouseenter",function(d){var e=a(d.target),f=e.closest("div.tree-node");c.onMouseEnter.call(b,d,C(b,f[0])),d.stopPropagation()}).bind("click",function(d){var e=a(d.target),g=e.closest("div.tree-node");if(g.length){if(e.hasClass("tree-hit"))return m(b,g[0]),!1;if(e.hasClass("tree-checkbox"))return f(b,g[0],!e.hasClass("tree-checkbox1")),!1;H(b,g[0]),c.onClick.call(b,C(b,g[0])),d.stopPropagation()}}).bind("dblclick",function(d){_itc_treedblclick=!0;var e=a(d.target).closest("div.tree-node");if(e.length){H(b,e[0]);var f=a(e[0]).children(".tree-hit");f.hasClass("tree-expanded")?l(b,e[0]):k(b,e[0]),c.onDblClick.call(b,C(b,e[0])),d.stopPropagation()}}).bind("contextmenu",function(d){var e=a(d.target).closest("div.tree-node");e.length&&(c.onContextMenu.call(b,d,C(b,e[0])),d.stopPropagation())})}function d(b){var c=a.data(b,"tree").options;c.dnd=!1;var d=a(b).find("div.tree-node");d.draggable("disable"),d.css("cursor","pointer")}function e(b){function c(b,c){return a(b).closest("ul.tree").tree(c?"pop":"getData",b)}function d(b,c){var d=a(b).draggable("proxy").find("span.tree-dnd-icon");d.removeClass("tree-dnd-yes tree-dnd-no").addClass(c?"tree-dnd-yes":"tree-dnd-no")}function e(d,e){function f(){var f=c(d,!0);a(b).tree("append",{parent:e,data:[f]}),h.onDrop.call(b,e,f,"append")}"closed"==C(b,e).state?k(b,e,function(){f()}):f()}function f(d,e,f){var g={};"top"==f?g.before=e:g.after=e;var i=c(d,!0);g.data=i,a(b).tree("insert",g),h.onDrop.call(b,e,i,f)}var g=a.data(b,"tree"),h=g.options,i=g.tree;g.disabledNodes=[],h.dnd=!0,i.find("div.tree-node").draggable({disabled:!1,revert:!0,cursor:"pointer",proxy:function(b){var c=a('<div class="tree-node-proxy"></div>').appendTo("body");return c.html('<span class="tree-dnd-icon tree-dnd-no">&nbsp;</span>'+a(b).find(".tree-title").html()),c.hide(),c},deltaX:15,deltaY:15,onBeforeDrag:function(c){if(0==h.onBeforeDrag.call(b,C(b,this)))return!1;if(a(c.target).hasClass("tree-hit")||a(c.target).hasClass("tree-checkbox"))return!1;if(1!=c.which)return!1;a(this).next("ul").find("div.tree-node").droppable({accept:"no-accept"});var d=a(this).find("span.tree-indent");d.length&&(c.data.offsetWidth-=d.length*d.width())},onStartDrag:function(){a(this).draggable("proxy").css({left:-1e4,top:-1e4}),h.onStartDrag.call(b,C(b,this));var c=C(b,this);void 0==c.id&&(c.id="easyui_tree_node_id_temp",u(b,c)),g.draggingNodeId=c.id},onDrag:function(b){var c=b.pageX,d=b.pageY,e=b.data.startX,f=b.data.startY,g=Math.sqrt((c-e)*(c-e)+(d-f)*(d-f));g>3&&a(this).draggable("proxy").show(),this.pageY=b.pageY},onStopDrag:function(){a(this).next("ul").find("div.tree-node").droppable({accept:"div.tree-node"});for(var c=0;c<g.disabledNodes.length;c++)a(g.disabledNodes[c]).droppable("enable");g.disabledNodes=[];var d=D(b,g.draggingNodeId);d&&"easyui_tree_node_id_temp"==d.id&&(d.id="",u(b,d)),h.onStopDrag.call(b,d)}}).droppable({accept:"div.tree-node",onDragEnter:function(e,f){0==h.onDragEnter.call(b,this,c(f))&&(d(f,!1),a(this).removeClass("tree-node-append tree-node-top tree-node-bottom"),a(this).droppable("disable"),g.disabledNodes.push(this))},onDragOver:function(e,f){if(!a(this).droppable("options").disabled){var i=f.pageY,j=a(this).offset().top,k=j+a(this).outerHeight();d(f,!0),a(this).removeClass("tree-node-append tree-node-top tree-node-bottom"),i>j+(k-j)/2?5>k-i?a(this).addClass("tree-node-bottom"):a(this).addClass("tree-node-append"):5>i-j?a(this).addClass("tree-node-top"):a(this).addClass("tree-node-append"),0==h.onDragOver.call(b,this,c(f))&&(d(f,!1),a(this).removeClass("tree-node-append tree-node-top tree-node-bottom"),a(this).droppable("disable"),g.disabledNodes.push(this))}},onDragLeave:function(e,f){d(f,!1),a(this).removeClass("tree-node-append tree-node-top tree-node-bottom"),h.onDragLeave.call(b,this,c(f))},onDrop:function(d,g){var i,j,k=this;return a(this).hasClass("tree-node-append")?(i=e,j="append"):(i=f,j=a(this).hasClass("tree-node-top")?"top":"bottom"),0==h.onBeforeDrop.call(b,k,c(g),j)?void a(this).removeClass("tree-node-append tree-node-top tree-node-bottom"):(i(g,k,j),void a(this).removeClass("tree-node-append tree-node-top tree-node-bottom"))}})}function f(b,c,d){function e(a){var b=a.next().find(".tree-checkbox");b.removeClass("tree-checkbox0 tree-checkbox1 tree-checkbox2"),a.find(".tree-checkbox").hasClass("tree-checkbox1")?b.addClass("tree-checkbox1"):b.addClass("tree-checkbox0")}function f(c){function d(b){var c=b.find(".tree-checkbox");if(c.hasClass("tree-checkbox0")||c.hasClass("tree-checkbox2"))return!1;var d=!0;return b.parent().siblings().each(function(){a(this).children("div.tree-node").children(".tree-checkbox").hasClass("tree-checkbox1")||(d=!1)}),d}function e(b){var c=b.find(".tree-checkbox");if(c.hasClass("tree-checkbox1")||c.hasClass("tree-checkbox2"))return!1;var d=!0;return b.parent().siblings().each(function(){a(this).children("div.tree-node").children(".tree-checkbox").hasClass("tree-checkbox0")||(d=!1)}),d}var g=y(b,c[0]);if(g){var h=a(g.target).find(".tree-checkbox");h.removeClass("tree-checkbox0 tree-checkbox1 tree-checkbox2"),d(c)?h.addClass("tree-checkbox1"):e(c)?h.addClass("tree-checkbox0"):h.addClass("tree-checkbox2"),f(a(g.target))}}var g=a.data(b,"tree").options;if(g.checkbox){var h=C(b,c);if(0!=g.onBeforeCheck.call(b,h,d)){var i=a(c),j=i.find(".tree-checkbox");j.removeClass("tree-checkbox0 tree-checkbox1 tree-checkbox2"),d?j.addClass("tree-checkbox1"):j.addClass("tree-checkbox0"),g.cascadeCheck&&(f(i),e(i)),g.onCheck.call(b,h,d)}}}function g(b,c){var d=a.data(b,"tree").options;if(d.checkbox){var e=a(c);if(I(b,c)){var g=e.find(".tree-checkbox");g.length?g.hasClass("tree-checkbox1")?f(b,c,!0):f(b,c,!1):d.onlyLeafCheck&&a('<span class="tree-checkbox tree-checkbox0"></span>').insertBefore(e.find(".tree-title"))}else{var g=e.find(".tree-checkbox");if(d.onlyLeafCheck)g.remove();else if(g.hasClass("tree-checkbox1"))f(b,c,!0);else if(g.hasClass("tree-checkbox2")){for(var h=!0,i=!0,j=x(b,c),k=0;k<j.length;k++)j[k].checked?i=!1:h=!1;h&&f(b,c,!0),i&&f(b,c,!1)}}}}function h(b,c,d,g){var h=a.data(b,"tree"),j=h.options,k=a(c).prevAll("div.tree-node:first");d=j.loadFilter.call(b,d,k[0]);var l=E(b,"domId",k.attr("id"));g?l?l.children?l.children=l.children.concat(d):l.children=d:h.data=h.data.concat(d):(l?l.children=d:h.data=d,a(c).empty()),j.view.render.call(j.view,b,c,d),j.dnd&&e(b),l&&u(b,l);for(var m=[],n=[],o=0;o<d.length;o++){var p=d[o];p.checked||m.push(p)}G(d,function(a){a.checked&&n.push(a)});var q=j.onCheck;j.onCheck=function(){},m.length&&f(b,a("#"+m[0].domId)[0],!1);for(var o=0;o<n.length;o++)f(b,a("#"+n[o].domId)[0],!0);j.onCheck=q,setTimeout(function(){i(b,b)},0),j.onLoadSuccess.call(b,l,d)}function i(b,c,d){function e(a,b){var c=a.find("span.tree-icon");c.prev("span.tree-indent").addClass("tree-join")}function f(b){var c=b.find("span.tree-indent, span.tree-hit").length;b.next().find("div.tree-node").each(function(){a(this).children("span:eq("+(c-1)+")").addClass("tree-line")})}var g=a.data(b,"tree").options;if(!g.lines)return void a(b).removeClass("tree-lines");if(a(b).addClass("tree-lines"),!d){d=!0,a(b).find("span.tree-indent").removeClass("tree-line tree-join tree-joinbottom"),a(b).find("div.tree-node").removeClass("tree-node-last tree-root-first tree-root-one");var h=a(b).tree("getRoots");h.length>1?a(h[0].target).addClass("tree-root-first"):1==h.length&&a(h[0].target).addClass("tree-root-one")}a(c).children("li").each(function(){var c=a(this).children("div.tree-node"),g=c.next("ul");g.length?(a(this).next().length&&f(c),i(b,g,d)):e(c)});var j=a(c).children("li:last").children("div.tree-node").addClass("tree-node-last");j.children("span.tree-join").removeClass("tree-join").addClass("tree-joinbottom")}function j(b,c,d,e){var f=a.data(b,"tree").options;d=d||{};var g=null;if(b!=c){var i=a(c).prev();g=C(b,i[0])}if(0!=f.onBeforeLoad.call(b,g,d)){var j=a(c).prev().children("span.tree-folder");j.addClass("tree-loading");var k=f.loader.call(b,d,function(a){j.removeClass("tree-loading"),h(b,c,a),e&&e()},function(){j.removeClass("tree-loading"),f.onLoadError.apply(b,arguments),e&&e()});0==k&&j.removeClass("tree-loading")}}function k(b,c,d){var e=a.data(b,"tree").options,f=a(c).children("span.tree-hit");if(0!=f.length&&!f.hasClass("tree-expanded")){var g=C(b,c);if(0!=e.onBeforeExpand.call(b,g)){f.removeClass("tree-collapsed tree-collapsed-hover").addClass("tree-expanded"),f.next().addClass("tree-folder-open");var h=a(c).next();if(h.length)e.animate?h.slideDown("normal",function(){g.state="open",e.onExpand.call(b,g),d&&d()}):(h.css("display","block"),g.state="open",e.onExpand.call(b,g),d&&d());else{var i=a('<ul style="display:none"></ul>').insertAfter(c);j(b,i[0],{id:g.id},function(){i.is(":empty")&&i.remove(),e.animate?i.slideDown("normal",function(){g.state="open",e.onExpand.call(b,g),d&&d()}):(i.css("display","block"),g.state="open",e.onExpand.call(b,g),d&&d())})}}}}function l(b,c){var d=a.data(b,"tree").options,e=a(c).children("span.tree-hit");if(0!=e.length&&!e.hasClass("tree-collapsed")){var f=C(b,c);if(0!=d.onBeforeCollapse.call(b,f)){e.removeClass("tree-expanded tree-expanded-hover").addClass("tree-collapsed"),e.next().removeClass("tree-folder-open");var g=a(c).next();d.animate?g.slideUp("normal",function(){f.state="closed",d.onCollapse.call(b,f)}):(g.css("display","none"),f.state="closed",d.onCollapse.call(b,f))}}}function m(b,c){var d=a(c).children("span.tree-hit");0!=d.length&&(d.hasClass("tree-expanded")?l(b,c):k(b,c))}function n(a,b){var c=x(a,b);b&&c.unshift(C(a,b));for(var d=0;d<c.length;d++)k(a,c[d].target)}function o(a,b){for(var c=[],d=y(a,b);d;)c.unshift(d),d=y(a,d.target);for(var e=0;e<c.length;e++)k(a,c[e].target)}function p(b,c){for(var d=a(b).parent();"BODY"!=d[0].tagName&&"auto"!=d.css("overflow-y");)d=d.parent();var e=a(c),f=e.offset().top;if("BODY"!=d[0].tagName){var g=d.offset().top;g>f?d.scrollTop(d.scrollTop()+f-g):f+e.outerHeight()>g+d.outerHeight()-18&&d.scrollTop(d.scrollTop()+f+e.outerHeight()-g-d.outerHeight()+18)}else d.scrollTop(f)}function q(a,b){var c=x(a,b);b&&c.unshift(C(a,b));for(var d=0;d<c.length;d++)l(a,c[d].target)}function r(b,c){var d=a(c.parent),e=c.data;if(e&&(e=a.isArray(e)?e:[e],e.length)){var f;if(0==d.length)f=a(b);else{if(I(b,d[0])){var i=d.find("span.tree-icon");i.removeClass("tree-file").addClass("tree-folder tree-folder-open");var j=a('<span class="tree-hit tree-expanded"></span>').insertBefore(i);j.prev().length&&j.prev().remove()}f=d.next(),f.length||(f=a("<ul></ul>").insertAfter(d))}h(b,f[0],e,!0),g(b,f.prev())}}function s(b,c){var d=c.before||c.after,e=y(b,d),f=c.data;if(f&&(f=a.isArray(f)?f:[f],f.length)){r(b,{parent:e?e.target:null,data:f});for(var g=e?e.children:a(b).tree("getRoots"),h=0;h<g.length;h++)if(g[h].domId==a(d).attr("id")){for(var i=f.length-1;i>=0;i--)g.splice(c.before?h:h+1,0,f[i]);g.splice(g.length-f.length,f.length);break}for(var j=a(),h=0;h<f.length;h++)j=j.add(a("#"+f[h].domId).parent());c.before?j.insertBefore(a(d).parent()):j.insertAfter(a(d).parent())}}function t(b,c){function d(c){for(var d=a(c).attr("id"),e=y(b,c),f=e?e.children:a.data(b,"tree").data,g=0;g<f.length;g++)if(f[g].domId==d){f.splice(g,1);break}return e}var e=d(c);if(a(c).parent().remove(),e){if(!e.children||!e.children.length){var f=a(e.target);f.find(".tree-icon").removeClass("tree-folder").addClass("tree-file"),f.find(".tree-hit").remove(),a('<span class="tree-indent"></span>').prependTo(f),f.next().remove()}u(b,e),g(b,e.target)}i(b,b)}function u(b,c){var d=a.data(b,"tree").options,e=a(c.target),g=C(b,c.target),h=g.checked;g.iconCls&&e.find(".tree-icon").removeClass(g.iconCls),a.extend(g,c);var i=a.extend({},g);i.text=FW.specialchars(i.text),e.find(".tree-title").html(d.formatter.call(b,i)),g.iconCls&&e.find(".tree-icon").addClass(g.iconCls),h!=g.checked&&f(b,c.target,g.checked)}function v(a){var b=w(a);return b.length?b[0]:null}function w(b){for(var c=a.data(b,"tree").data,d=0;d<c.length;d++)F(c[d]);return c}function x(b,c){var d=[],e=C(b,c),f=e?e.children:a.data(b,"tree").data;return G(f,function(a){d.push(F(a))}),d}function y(b,c){var d=a(c).closest("ul").prevAll("div.tree-node:first");return C(b,d[0])}function z(b,c){c=c||"checked",a.isArray(c)||(c=[c]);for(var d=[],e=0;e<c.length;e++){var f=c[e];"checked"==f?d.push("span.tree-checkbox1"):"unchecked"==f?d.push("span.tree-checkbox0"):"indeterminate"==f&&d.push("span.tree-checkbox2")}var g=[];return a(b).find(d.join(",")).each(function(){var c=a(this).parent();g.push(C(b,c[0]))}),g}function A(b){var c=a(b).find("div.tree-node-selected");return c.length?C(b,c[0]):null}function B(a,b){var c=C(a,b);return c&&c.children&&G(c.children,function(a){F(a)}),c}function C(b,c){return E(b,"domId",a(c).attr("id"))}function D(a,b){return E(a,"id",b)}function E(b,c,d){var e=a.data(b,"tree").data,f=null;return G(e,function(a){return a[c]==d?(f=F(a),!1):void 0}),f}function F(b){var c=a("#"+b.domId);return b.target=c[0],b.checked=c.find(".tree-checkbox").hasClass("tree-checkbox1"),b}function G(a,b){for(var c=[],d=0;d<a.length;d++)c.push(a[d]);for(;c.length;){var e=c.shift();if(0==b(e))return;if(e.children)for(var d=e.children.length-1;d>=0;d--)c.unshift(e.children[d])}}function H(b,c){var d=a.data(b,"tree").options,e=C(b,c),f=(new Date).getTime(),g=e.id;_itc_tlstclktime&&300>f-_itc_tlstclktime&&g==_itc_tlstclknode||(_itc_tlstclknode=g,_itc_tlstclktime=f,0!=d.onBeforeSelect.call(b,e)&&(a(b).find("div.tree-node-selected").removeClass("tree-node-selected"),a(c).addClass("tree-node-selected"),setTimeout(function(){_itc_treedblclick||d.onSelect.call(b,e),_itc_treedblclick=!1},300)))}function I(b,c){return 0==a(c).children("span.tree-hit").length}function J(b,c){var d=a.data(b,"tree").options,e=C(b,c);if(0!=d.onBeforeEdit.call(b,e)){a(c).css("position","relative");var f=a(c).find(".tree-title"),g=f.outerWidth();f.empty();var h=a('<input class="tree-editor">').appendTo(f);h.val(e.text).focus(),h.width(g+20),h.height("CSS1Compat"==document.compatMode?18-(h.outerHeight()-h.height()):18),h.bind("click",function(a){return!1}).bind("mousedown",function(a){a.stopPropagation()}).bind("mousemove",function(a){a.stopPropagation()}).bind("keydown",function(a){return 13==a.keyCode?(K(b,c),!1):27==a.keyCode?(L(b,c),!1):void 0}).bind("blur",function(a){a.stopPropagation(),K(b,c)})}}function K(b,c){var d=a.data(b,"tree").options;a(c).css("position","");var e=a(c).find("input.tree-editor"),f=e.val();e.remove();var g=C(b,c);g.text=f,u(b,g),d.onAfterEdit.call(b,g)}function L(b,c){var d=a.data(b,"tree").options;a(c).css("position",""),a(c).find("input.tree-editor").remove();var e=C(b,c);u(b,e),d.onCancelEdit.call(b,e)}a.fn.tree=function(d,e){if("string"==typeof d)return a.fn.tree.methods[d](this,e);var d=d||{};return this.each(function(){var e,f=a.data(this,"tree");if(f)e=a.extend(f.options,d),f.options=e;else{e=a.extend({},a.fn.tree.defaults,a.fn.tree.parseOptions(this),d),a.data(this,"tree",{options:e,tree:b(this),data:[]});var g=a.fn.tree.parseData(this);g.length&&h(this,this,g)}c(this),e.data&&h(this,this,a.extend(!0,[],e.data)),j(this,this)})},a.fn.tree.methods={options:function(b){return a.data(b[0],"tree").options},loadData:function(a,b){return a.each(function(){h(this,this,b)})},getNode:function(a,b){return C(a[0],b)},getData:function(a,b){return B(a[0],b)},reload:function(b,c){return b.each(function(){if(c){var b=a(c),d=b.children("span.tree-hit");d.removeClass("tree-expanded tree-expanded-hover").addClass("tree-collapsed"),b.next().remove(),k(this,c)}else a(this).empty(),j(this,this)})},getRoot:function(a){return v(a[0])},getRoots:function(a){return w(a[0])},getParent:function(a,b){return y(a[0],b)},getChildren:function(a,b){return x(a[0],b)},getChecked:function(a,b){return z(a[0],b)},getSelected:function(a){return A(a[0])},isLeaf:function(a,b){return I(a[0],b)},find:function(a,b){return D(a[0],b)},select:function(a,b){return a.each(function(){H(this,b)})},check:function(a,b){return a.each(function(){f(this,b,!0)})},uncheck:function(a,b){return a.each(function(){f(this,b,!1)})},collapse:function(a,b){return a.each(function(){l(this,b)})},expand:function(a,b){return a.each(function(){k(this,b)})},collapseAll:function(a,b){return a.each(function(){q(this,b)})},expandAll:function(a,b){return a.each(function(){n(this,b)})},expandTo:function(a,b){return a.each(function(){o(this,b)})},scrollTo:function(a,b){return a.each(function(){p(this,b)})},toggle:function(a,b){return a.each(function(){m(this,b)})},append:function(a,b){return a.each(function(){r(this,b)})},insert:function(a,b){return a.each(function(){s(this,b)})},remove:function(a,b){return a.each(function(){t(this,b)})},pop:function(a,b){var c=a.tree("getData",b);return a.tree("remove",b),c},update:function(a,b){return a.each(function(){u(this,b)})},enableDnd:function(a){return a.each(function(){e(this)})},disableDnd:function(a){return a.each(function(){d(this)})},beginEdit:function(a,b){return a.each(function(){J(this,b)})},endEdit:function(a,b){return a.each(function(){K(this,b)})},cancelEdit:function(a,b){return a.each(function(){L(this,b)})}},a.fn.tree.parseOptions=function(b){a(b);return a.extend({},a.parser.parseOptions(b,["url","method",{checkbox:"boolean",cascadeCheck:"boolean",onlyLeafCheck:"boolean"},{animate:"boolean",lines:"boolean",dnd:"boolean"}]))},a.fn.tree.parseData=function(b){function c(b,d){d.children("li").each(function(){var d=a(this),e=a.extend({},a.parser.parseOptions(this,["id","iconCls","state"]),{checked:d.attr("checked")?!0:void 0});e.text=d.children("span").html(),e.text||(e.text=d.html());var f=d.children("ul");f.length&&(e.children=[],c(e.children,f)),b.push(e)})}var d=[];return c(d,a(b)),d};var M=1,N={render:function(b,c,d){function e(c,d){for(var g=[],h=0;h<d.length;h++){var i=d[h];"open"!=i.state&&"closed"!=i.state&&(i.state="open"),i.domId="_easyui_tree_"+M++,g.push("<li>");var j=i.selected?" tree-node-selected":"";g.push('<div id="'+i.domId+'" class="tree-node'+j+'">');for(var k=0;c>k;k++)g.push('<span class="tree-indent"></span>');var l=!1;"closed"==i.state?(g.push('<span class="tree-hit tree-collapsed"></span>'),g.push('<span class="tree-icon tree-folder '+(i.iconCls?i.iconCls:"")+'"></span>')):i.children&&i.children.length?(g.push('<span class="tree-hit tree-expanded"></span>'),g.push('<span class="tree-icon tree-folder tree-folder-open '+(i.iconCls?i.iconCls:"")+'"></span>')):(g.push('<span class="tree-indent"></span>'),g.push('<span class="tree-icon tree-file '+(i.iconCls?i.iconCls:"")+'"></span>'),l=!0),f.checkbox&&(!f.onlyLeafCheck||l)&&g.push('<span class="tree-checkbox tree-checkbox0"></span>');var m=a.extend({},i);if(m.text=FW.specialchars(m.text),g.push('<span class="tree-title">'+f.formatter.call(b,m)+"</span>"),g.push("</div>"),i.children&&i.children.length){var n=e(c+1,i.children);g.push('<ul style="display:'+("closed"==i.state?"none":"block")+'">'),g=g.concat(n),g.push("</ul>")}g.push("</li>")}return g}var f=a.data(b,"tree").options,g=a(c).prev("div.tree-node").find("span.tree-indent, span.tree-hit").length,h=e(g,d);a(c).append(h.join(""))}};a.fn.tree.defaults={url:null,method:"post",animate:!1,checkbox:!1,cascadeCheck:!0,onlyLeafCheck:!1,lines:!1,dnd:!1,data:null,formatter:function(a){return a.text},loader:function(b,c,d){var e=a(this).tree("options");return e.url?void a.ajax({type:e.method,url:e.url,data:b,dataType:"json",success:function(a){c(a)},error:function(){d.apply(this,arguments)}}):!1},loadFilter:function(a,b){return a},view:N,onBeforeLoad:function(a,b){},onLoadSuccess:function(a,b){},onLoadError:function(){},onClick:function(a){},onDblClick:function(a){},onBeforeExpand:function(a){},onExpand:function(a){},onBeforeCollapse:function(a){},onCollapse:function(a){},onBeforeCheck:function(a,b){},onCheck:function(a,b){},onBeforeSelect:function(a){},onSelect:function(a){},onContextMenu:function(a,b){},onBeforeDrag:function(a){},onStartDrag:function(a){},onStopDrag:function(a){},onDragEnter:function(a,b){},onDragOver:function(a,b){},onDragLeave:function(a,b){},onBeforeDrop:function(a,b,c){},onDrop:function(a,b,c){},onBeforeEdit:function(a){},onAfterEdit:function(a){},onCancelEdit:function(a){},onMouseEnter:function(a,b){},onMouseOut:function(a,b){}}}(jQuery),$.extend($.fn.tree.methods,{unselect:function(a,b){return a.each(function(){var a=$(this).tree("options");$(b).removeClass("tree-node-selected"),a.onUnselect&&a.onUnselect.call(this,$(this).tree("getNode",b))})}}),function($){function _1(_2){function _9(a){var b=(_4.nav[a],$('<a href="javascript:void(0)"></a>').appendTo(tr));return b.wrap("<td></td>"),b}function _6(a,b){var c=$.inArray(b,a);return c>=0&&a.splice(c,1),a}var _3=$.data(_2,"pagination"),_4=_3.options,bb=_3.bb={},_5=$(_2).addClass("pagination").html('<table cellspacing="0" cellpadding="0" border="0"><tr></tr></table>'),tr=_5.find("tr"),aa=$.extend([],_4.layout);_4.showPageList||_6(aa,"list"),_4.showRefresh||_6(aa,"refresh"),"sep"==aa[0]&&aa.shift(),"sep"==aa[aa.length-1]&&aa.pop();for(var _7=0;_7<aa.length;_7++){var _8=aa[_7];if("list"==_8){var ps=$('<select class="pagination-page-list"></select>');ps.bind("change",function(){_4.pageSize=parseInt($(this).val()),_4.onChangePageSize.call(_2,_4.pageSize),_10(_2,_4.pageNumber)});for(var i=0;i<_4.pageList.length;i++)$("<option></option>").text(_4.pageList[i]).appendTo(ps);$("<td></td>").append(ps).appendTo(tr)}else"sep"==_8?$('<td><div class="pagination-btn-separator"></div></td>').appendTo(tr):"first"==_8?bb.first=_9("first"):"prev"==_8?bb.prev=_9("prev"):"next"==_8?bb.next=_9("next"):"last"==_8?bb.last=_9("last"):"manual"==_8?($('<span style="padding-left:6px;"></span>').html(_4.beforePageText).appendTo(tr).wrap("<td></td>"),bb.num=$('<input class="pagination-num" type="text" value="1" size="2">').appendTo(tr).wrap("<td></td>"),bb.num.unbind(".pagination").bind("keydown.pagination",function(a){if(13==a.keyCode){var b=parseInt($(this).val())||1;return _10(_2,b),!1}}),bb.after=$('<span style="padding-right:6px;"></span>').appendTo(tr).wrap("<td></td>")):"refresh"==_8?bb.refresh=_9("refresh"):"links"==_8&&$('<td class="pagination-links"></td>').appendTo(tr)}if(_4.buttons)if($('<td><div class="pagination-btn-separator"></div></td>').appendTo(tr),$.isArray(_4.buttons))for(var i=0;i<_4.buttons.length;i++){var _b=_4.buttons[i];if("-"==_b)$('<td><div class="pagination-btn-separator"></div></td>').appendTo(tr);else{var td=$("<td></td>").appendTo(tr),a=$('<a href="javascript:void(0)"></a>').appendTo(td);a[0].onclick=eval(_b.handler||function(){})}}else{var td=$("<td></td>").appendTo(tr);$(_4.buttons).appendTo(td).show()}$('<div class="pagination-info"></div>').appendTo(_5),$('<div style="clear:both;"></div>').appendTo(_5)}function _10(a,b){var c=$.data(a,"pagination").options;_14(a,{pageNumber:b}),c.onSelectPage.call(a,c.pageNumber,c.pageSize)}function _14(a,b){var c=$.data(a,"pagination"),d=c.options,e=c.bb;$.extend(d,b||{});var f=$(a).find("select.pagination-page-list");f.length&&(f.val(d.pageSize+""),d.pageSize=parseInt(f.val()));var g=Math.ceil(d.total/d.pageSize)||1;d.pageNumber<1&&(d.pageNumber=1),d.pageNumber>g&&(d.pageNumber=g),e.num&&e.num.val(d.pageNumber),e.after&&e.after.html(d.afterPageText.replace(/{pages}/,g));var h=$(a).find("td.pagination-links");if(h.length){h.empty();var i=d.pageNumber-Math.floor(d.links/2);1>i&&(i=1);var j=i+d.links-1;j>g&&(j=g),i=j-d.links+1,1>i&&(i=1);for(var k=i;j>=k;k++){$('<a class="pagination-link" href="javascript:void(0)"></a>').appendTo(h)}}var l=d.displayMsg;l=l.replace(/{from}/,0==d.total?0:d.pageSize*(d.pageNumber-1)+1),l=l.replace(/{to}/,Math.min(d.pageSize*d.pageNumber,d.total)),l=l.replace(/{total}/,d.total),$(a).find("div.pagination-info").html(l),_1d(a,d.loading)}function _1d(a,b){var c=$.data(a,"pagination"),d=c.options;d.loading=b}$.fn.pagination=function(a,b){return"string"==typeof a?$.fn.pagination.methods[a](this,b):(a=a||{},this.each(function(){var b,c=$.data(this,"pagination");c?b=$.extend(c.options,a):(b=$.extend({},$.fn.pagination.defaults,$.fn.pagination.parseOptions(this),a),$.data(this,"pagination",{options:b})),_1(this),_14(this)}))},$.fn.pagination.methods={options:function(a){return $.data(a[0],"pagination").options},loading:function(a){return a.each(function(){_1d(this,!0)})},loaded:function(a){return a.each(function(){_1d(this,!1)})},refresh:function(a,b){return a.each(function(){_14(this,b)})},select:function(a,b){return a.each(function(){_10(this,b)})}},$.fn.pagination.parseOptions=function(_28){var t=$(_28);return $.extend({},$.parser.parseOptions(_28,[{total:"number",pageSize:"number",pageNumber:"number",links:"number"},{loading:"boolean",showPageList:"boolean",showRefresh:"boolean"}]),{pageList:t.attr("pageList")?eval(t.attr("pageList")):void 0})},$.fn.pagination.defaults={total:1,pageSize:10,pageNumber:1,pageList:[10,20,30,50],loading:!1,buttons:null,showPageList:!0,showRefresh:!0,links:10,layout:["list","sep","first","prev","sep","manual","sep","next","last","sep","refresh"],onSelectPage:function(a,b){},onBeforeRefresh:function(a,b){},onRefresh:function(a,b){},onChangePageSize:function(a){},beforePageText:"Page",afterPageText:"of {pages}",displayMsg:"Displaying {from} to {to} of {total} items",nav:{first:{iconCls:"pagination-first",handler:function(){var a=$(this).pagination("options");a.pageNumber>1&&$(this).pagination("select",1)}},prev:{iconCls:"pagination-prev",handler:function(){var a=$(this).pagination("options");a.pageNumber>1&&$(this).pagination("select",a.pageNumber-1)}},next:{iconCls:"pagination-next",handler:function(){var a=$(this).pagination("options"),b=Math.ceil(a.total/a.pageSize);a.pageNumber<b&&$(this).pagination("select",a.pageNumber+1)}},last:{iconCls:"pagination-last",handler:function(){var a=$(this).pagination("options"),b=Math.ceil(a.total/a.pageSize);a.pageNumber<b&&$(this).pagination("select",b)}},refresh:{iconCls:"pagination-refresh",handler:function(){var a=$(this).pagination("options");0!=a.onBeforeRefresh.call(this,a.pageNumber,a.pageSize)&&($(this).pagination("select",a.pageNumber),a.onRefresh.call(this,a.pageNumber,a.pageSize))}}}}}(jQuery),function(a){a.parser={auto:!0,onComplete:function(a){},plugins:["draggable","droppable","resizable","pagination","tooltip","linkbutton","menu","menubutton","splitbutton","progressbar","tree","combobox","combotree","combogrid","numberbox","validatebox","searchbox","numberspinner","timespinner","calendar","datebox","datetimebox","slider","layout","panel","datagrid","propertygrid","treegrid","tabs","accordion","window","dialog"],parse:function(b){for(var c=[],d=0;d<a.parser.plugins.length;d++){var e=a.parser.plugins[d],f=a(".easyui-"+e,b);f.length&&(f[e]?f[e]():c.push({name:e,jq:f}))}if(c.length&&window.easyloader){for(var g=[],d=0;d<c.length;d++)g.push(c[d].name);easyloader.load(g,function(){for(var d=0;d<c.length;d++){var e=c[d].name,f=c[d].jq;f[e]()}a.parser.onComplete.call(a.parser,b)})}else a.parser.onComplete.call(a.parser,b)},parseOptions:function(b,c){var d=a(b),e={},f=a.trim(d.attr("data-options"));if(f&&("{"!=f.substring(0,1)&&(f="{"+f+"}"),e=new Function("return "+f)()),c){for(var g={},h=0;h<c.length;h++){var i=c[h];if("string"==typeof i)"width"==i||"height"==i||"left"==i||"top"==i?g[i]=parseInt(b.style[i])||void 0:g[i]=d.attr(i);else for(var j in i){var k=i[j];"boolean"==k?g[j]=d.attr(j)?"true"==d.attr(j):void 0:"number"==k&&(g[j]="0"==d.attr(j)?0:parseFloat(d.attr(j))||void 0)}}a.extend(e,g)}return e}},a(function(){var b=a('<div style="position:absolute;top:-1000px;width:100px;height:100px;padding:5px"></div>').appendTo("body");b.width(100),a._boxModel=100==parseInt(b.width()),b.remove(),!window.easyloader&&a.parser.auto&&a.parser.parse()}),a.fn._outerWidth=function(b){return void 0==b?this[0]==window?this.width()||document.body.clientWidth:this.outerWidth()||0:this.each(function(){a._boxModel?a(this).width(b-(a(this).outerWidth()-a(this).width())):a(this).width(b)})},a.fn._outerHeight=function(b){return void 0==b?this[0]==window?this.height()||document.body.clientHeight:this.outerHeight()||0:this.each(function(){a._boxModel?a(this).height(b-(a(this).outerHeight()-a(this).height())):a(this).height(b)})},a.fn._scrollLeft=function(b){return void 0==b?this.scrollLeft():this.each(function(){a(this).scrollLeft(b)})},a.fn._propAttr=a.fn.prop||a.fn.attr,a.fn._fit=function(b){b=void 0==b?!0:b;var c=this[0],d="BODY"==c.tagName?c:this.parent()[0],e=d.fcount||0;return b?c.fitted||(c.fitted=!0,d.fcount=e+1,a(d).addClass("panel-noscroll"),"BODY"==d.tagName&&a("html").addClass("panel-fit")):c.fitted&&(c.fitted=!1,d.fcount=e-1,0==d.fcount&&(a(d).removeClass("panel-noscroll"),"BODY"==d.tagName&&a("html").removeClass("panel-fit"))),{width:a(d).width(),height:a(d).height()}}}(jQuery),function(a){function b(b){1==b.touches.length&&(g?(clearTimeout(dblClickTimer),g=!1,e(b,"dblclick")):(g=!0,dblClickTimer=setTimeout(function(){g=!1},500)),f=setTimeout(function(){e(b,"contextmenu",3)},1e3),e(b,"mousedown"),(a.fn.draggable.isDragging||a.fn.resizable.isResizing)&&b.preventDefault())}function c(b){1==b.touches.length&&(f&&clearTimeout(f),e(b,"mousemove"),(a.fn.draggable.isDragging||a.fn.resizable.isResizing)&&b.preventDefault())}function d(b){f&&clearTimeout(f),e(b,"mouseup"),(a.fn.draggable.isDragging||a.fn.resizable.isResizing)&&b.preventDefault()}function e(b,c,d){var e=new a.Event(c);e.pageX=b.changedTouches[0].pageX,e.pageY=b.changedTouches[0].pageY,e.which=d||1,a(b.target).trigger(e)}var f=null,g=!1;document.addEventListener&&(document.addEventListener("touchstart",b,!0),document.addEventListener("touchmove",c,!0),document.addEventListener("touchend",d,!0))}(jQuery);
//# sourceMappingURL=itcui.min.js.map